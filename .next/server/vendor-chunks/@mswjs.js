"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@mswjs";
exports.ids = ["vendor-chunks/@mswjs"];
exports.modules = {

/***/ "(ssr)/./node_modules/@mswjs/cookies/lib/index.mjs":
/*!***************************************************!*\
  !*** ./node_modules/@mswjs/cookies/lib/index.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PERSISTENCY_KEY: () => (/* binding */ PERSISTENCY_KEY),\n/* harmony export */   store: () => (/* binding */ store)\n/* harmony export */ });\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\n\n// node_modules/set-cookie-parser/lib/set-cookie.js\nvar require_set_cookie = __commonJS({\n  \"node_modules/set-cookie-parser/lib/set-cookie.js\"(exports, module) {\n    \"use strict\";\n    var defaultParseOptions = {\n      decodeValues: true,\n      map: false,\n      silent: false\n    };\n    function isNonEmptyString(str) {\n      return typeof str === \"string\" && !!str.trim();\n    }\n    function parseString(setCookieValue, options) {\n      var parts = setCookieValue.split(\";\").filter(isNonEmptyString);\n      var nameValuePairStr = parts.shift();\n      var parsed = parseNameValuePair(nameValuePairStr);\n      var name = parsed.name;\n      var value = parsed.value;\n      options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n      try {\n        value = options.decodeValues ? decodeURIComponent(value) : value;\n      } catch (e) {\n        console.error(\n          \"set-cookie-parser encountered an error while decoding a cookie with value '\" + value + \"'. Set options.decodeValues to false to disable this feature.\",\n          e\n        );\n      }\n      var cookie = {\n        name,\n        value\n      };\n      parts.forEach(function(part) {\n        var sides = part.split(\"=\");\n        var key = sides.shift().trimLeft().toLowerCase();\n        var value2 = sides.join(\"=\");\n        if (key === \"expires\") {\n          cookie.expires = new Date(value2);\n        } else if (key === \"max-age\") {\n          cookie.maxAge = parseInt(value2, 10);\n        } else if (key === \"secure\") {\n          cookie.secure = true;\n        } else if (key === \"httponly\") {\n          cookie.httpOnly = true;\n        } else if (key === \"samesite\") {\n          cookie.sameSite = value2;\n        } else {\n          cookie[key] = value2;\n        }\n      });\n      return cookie;\n    }\n    function parseNameValuePair(nameValuePairStr) {\n      var name = \"\";\n      var value = \"\";\n      var nameValueArr = nameValuePairStr.split(\"=\");\n      if (nameValueArr.length > 1) {\n        name = nameValueArr.shift();\n        value = nameValueArr.join(\"=\");\n      } else {\n        value = nameValuePairStr;\n      }\n      return { name, value };\n    }\n    function parse(input, options) {\n      options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n      if (!input) {\n        if (!options.map) {\n          return [];\n        } else {\n          return {};\n        }\n      }\n      if (input.headers) {\n        if (typeof input.headers.getSetCookie === \"function\") {\n          input = input.headers.getSetCookie();\n        } else if (input.headers[\"set-cookie\"]) {\n          input = input.headers[\"set-cookie\"];\n        } else {\n          var sch = input.headers[Object.keys(input.headers).find(function(key) {\n            return key.toLowerCase() === \"set-cookie\";\n          })];\n          if (!sch && input.headers.cookie && !options.silent) {\n            console.warn(\n              \"Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning.\"\n            );\n          }\n          input = sch;\n        }\n      }\n      if (!Array.isArray(input)) {\n        input = [input];\n      }\n      options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n      if (!options.map) {\n        return input.filter(isNonEmptyString).map(function(str) {\n          return parseString(str, options);\n        });\n      } else {\n        var cookies = {};\n        return input.filter(isNonEmptyString).reduce(function(cookies2, str) {\n          var cookie = parseString(str, options);\n          cookies2[cookie.name] = cookie;\n          return cookies2;\n        }, cookies);\n      }\n    }\n    function splitCookiesString(cookiesString) {\n      if (Array.isArray(cookiesString)) {\n        return cookiesString;\n      }\n      if (typeof cookiesString !== \"string\") {\n        return [];\n      }\n      var cookiesStrings = [];\n      var pos = 0;\n      var start;\n      var ch;\n      var lastComma;\n      var nextStart;\n      var cookiesSeparatorFound;\n      function skipWhitespace() {\n        while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n          pos += 1;\n        }\n        return pos < cookiesString.length;\n      }\n      function notSpecialChar() {\n        ch = cookiesString.charAt(pos);\n        return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n      }\n      while (pos < cookiesString.length) {\n        start = pos;\n        cookiesSeparatorFound = false;\n        while (skipWhitespace()) {\n          ch = cookiesString.charAt(pos);\n          if (ch === \",\") {\n            lastComma = pos;\n            pos += 1;\n            skipWhitespace();\n            nextStart = pos;\n            while (pos < cookiesString.length && notSpecialChar()) {\n              pos += 1;\n            }\n            if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n              cookiesSeparatorFound = true;\n              pos = nextStart;\n              cookiesStrings.push(cookiesString.substring(start, lastComma));\n              start = pos;\n            } else {\n              pos = lastComma + 1;\n            }\n          } else {\n            pos += 1;\n          }\n        }\n        if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n          cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n        }\n      }\n      return cookiesStrings;\n    }\n    module.exports = parse;\n    module.exports.parse = parse;\n    module.exports.parseString = parseString;\n    module.exports.splitCookiesString = splitCookiesString;\n  }\n});\n\n// src/store.ts\nvar import_set_cookie_parser = __toESM(require_set_cookie());\nvar PERSISTENCY_KEY = \"MSW_COOKIE_STORE\";\nfunction supportsLocalStorage() {\n  try {\n    if (localStorage == null) {\n      return false;\n    }\n    const testKey = PERSISTENCY_KEY + \"_test\";\n    localStorage.setItem(testKey, \"test\");\n    localStorage.getItem(testKey);\n    localStorage.removeItem(testKey);\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\nfunction isPropertyAccessible(object, method) {\n  try {\n    object[method];\n    return true;\n  } catch {\n    return false;\n  }\n}\nvar CookieStore = class {\n  constructor() {\n    this.store = /* @__PURE__ */ new Map();\n  }\n  add(request, response) {\n    if (isPropertyAccessible(request, \"credentials\") && request.credentials === \"omit\") {\n      return;\n    }\n    const requestUrl = new URL(request.url);\n    const responseCookies = response.headers.get(\"set-cookie\");\n    if (!responseCookies) {\n      return;\n    }\n    const now = Date.now();\n    const parsedResponseCookies = (0, import_set_cookie_parser.parse)(responseCookies).map(\n      ({ maxAge, ...cookie }) => ({\n        ...cookie,\n        expires: maxAge === void 0 ? cookie.expires : new Date(now + maxAge * 1e3),\n        maxAge\n      })\n    );\n    const prevCookies = this.store.get(requestUrl.origin) || /* @__PURE__ */ new Map();\n    parsedResponseCookies.forEach((cookie) => {\n      this.store.set(requestUrl.origin, prevCookies.set(cookie.name, cookie));\n    });\n  }\n  get(request) {\n    this.deleteExpiredCookies();\n    const requestUrl = new URL(request.url);\n    const originCookies = this.store.get(requestUrl.origin) || /* @__PURE__ */ new Map();\n    if (!isPropertyAccessible(request, \"credentials\")) {\n      return originCookies;\n    }\n    switch (request.credentials) {\n      case \"include\": {\n        if (typeof document === \"undefined\") {\n          return originCookies;\n        }\n        const documentCookies = (0, import_set_cookie_parser.parse)(document.cookie);\n        documentCookies.forEach((cookie) => {\n          originCookies.set(cookie.name, cookie);\n        });\n        return originCookies;\n      }\n      case \"same-origin\": {\n        return originCookies;\n      }\n      default:\n        return /* @__PURE__ */ new Map();\n    }\n  }\n  getAll() {\n    this.deleteExpiredCookies();\n    return this.store;\n  }\n  deleteAll(request) {\n    const requestUrl = new URL(request.url);\n    this.store.delete(requestUrl.origin);\n  }\n  clear() {\n    this.store.clear();\n  }\n  hydrate() {\n    if (!supportsLocalStorage()) {\n      return;\n    }\n    const persistedCookies = localStorage.getItem(PERSISTENCY_KEY);\n    if (!persistedCookies) {\n      return;\n    }\n    try {\n      const parsedCookies = JSON.parse(persistedCookies);\n      parsedCookies.forEach(([origin, cookies]) => {\n        this.store.set(\n          origin,\n          new Map(\n            cookies.map(([token, { expires, ...cookie }]) => [\n              token,\n              expires === void 0 ? cookie : { ...cookie, expires: new Date(expires) }\n            ])\n          )\n        );\n      });\n    } catch (error) {\n      console.warn(`\n[virtual-cookie] Failed to parse a stored cookie from the localStorage (key \"${PERSISTENCY_KEY}\").\n\nStored value:\n${localStorage.getItem(PERSISTENCY_KEY)}\n\nThrown exception:\n${error}\n\nInvalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`);\n      localStorage.removeItem(PERSISTENCY_KEY);\n    }\n  }\n  persist() {\n    if (!supportsLocalStorage()) {\n      return;\n    }\n    const serializedCookies = Array.from(this.store.entries()).map(\n      ([origin, cookies]) => {\n        return [origin, Array.from(cookies.entries())];\n      }\n    );\n    localStorage.setItem(PERSISTENCY_KEY, JSON.stringify(serializedCookies));\n  }\n  deleteExpiredCookies() {\n    const now = Date.now();\n    this.store.forEach((originCookies, origin) => {\n      originCookies.forEach(({ expires, name }) => {\n        if (expires !== void 0 && expires.getTime() <= now) {\n          originCookies.delete(name);\n        }\n      });\n      if (originCookies.size === 0) {\n        this.store.delete(origin);\n      }\n    });\n  }\n};\nvar store = new CookieStore();\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2Nvb2tpZXMvbGliL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGFBQWE7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RkFBNEY7QUFDekg7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HO0FBQ25HLHlFQUF5RSw4QkFBOEI7QUFDdkc7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSx3TUFBd00sY0FBYztBQUN0TjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1CQUFtQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsb0JBQW9CO0FBQ3ZEO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQSwrRUFBK0UsZ0JBQWdCOztBQUUvRjtBQUNBLEVBQUU7O0FBRUY7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixlQUFlO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8tbG9naW4vLi9ub2RlX21vZHVsZXMvQG1zd2pzL2Nvb2tpZXMvbGliL2luZGV4Lm1qcz9iYzIxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NyZWF0ZSA9IE9iamVjdC5jcmVhdGU7XG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19nZXRQcm90b09mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xudmFyIF9faGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX19jb21tb25KUyA9IChjYiwgbW9kKSA9PiBmdW5jdGlvbiBfX3JlcXVpcmUoKSB7XG4gIHJldHVybiBtb2QgfHwgKDAsIGNiW19fZ2V0T3duUHJvcE5hbWVzKGNiKVswXV0pKChtb2QgPSB7IGV4cG9ydHM6IHt9IH0pLmV4cG9ydHMsIG1vZCksIG1vZC5leHBvcnRzO1xufTtcbnZhciBfX2NvcHlQcm9wcyA9ICh0bywgZnJvbSwgZXhjZXB0LCBkZXNjKSA9PiB7XG4gIGlmIChmcm9tICYmIHR5cGVvZiBmcm9tID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBmcm9tID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXG4gICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KVxuICAgICAgICBfX2RlZlByb3AodG8sIGtleSwgeyBnZXQ6ICgpID0+IGZyb21ba2V5XSwgZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGUgfSk7XG4gIH1cbiAgcmV0dXJuIHRvO1xufTtcbnZhciBfX3RvRVNNID0gKG1vZCwgaXNOb2RlTW9kZSwgdGFyZ2V0KSA9PiAodGFyZ2V0ID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIGlzTm9kZU1vZGUgfHwgIW1vZCB8fCAhbW9kLl9fZXNNb2R1bGUgPyBfX2RlZlByb3AodGFyZ2V0LCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0LFxuICBtb2RcbikpO1xuXG4vLyBub2RlX21vZHVsZXMvc2V0LWNvb2tpZS1wYXJzZXIvbGliL3NldC1jb29raWUuanNcbnZhciByZXF1aXJlX3NldF9jb29raWUgPSBfX2NvbW1vbkpTKHtcbiAgXCJub2RlX21vZHVsZXMvc2V0LWNvb2tpZS1wYXJzZXIvbGliL3NldC1jb29raWUuanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgZGVmYXVsdFBhcnNlT3B0aW9ucyA9IHtcbiAgICAgIGRlY29kZVZhbHVlczogdHJ1ZSxcbiAgICAgIG1hcDogZmFsc2UsXG4gICAgICBzaWxlbnQ6IGZhbHNlXG4gICAgfTtcbiAgICBmdW5jdGlvbiBpc05vbkVtcHR5U3RyaW5nKHN0cikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBzdHIgPT09IFwic3RyaW5nXCIgJiYgISFzdHIudHJpbSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYXJzZVN0cmluZyhzZXRDb29raWVWYWx1ZSwgb3B0aW9ucykge1xuICAgICAgdmFyIHBhcnRzID0gc2V0Q29va2llVmFsdWUuc3BsaXQoXCI7XCIpLmZpbHRlcihpc05vbkVtcHR5U3RyaW5nKTtcbiAgICAgIHZhciBuYW1lVmFsdWVQYWlyU3RyID0gcGFydHMuc2hpZnQoKTtcbiAgICAgIHZhciBwYXJzZWQgPSBwYXJzZU5hbWVWYWx1ZVBhaXIobmFtZVZhbHVlUGFpclN0cik7XG4gICAgICB2YXIgbmFtZSA9IHBhcnNlZC5uYW1lO1xuICAgICAgdmFyIHZhbHVlID0gcGFyc2VkLnZhbHVlO1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0UGFyc2VPcHRpb25zLCBvcHRpb25zKSA6IGRlZmF1bHRQYXJzZU9wdGlvbnM7XG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IG9wdGlvbnMuZGVjb2RlVmFsdWVzID8gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSA6IHZhbHVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwic2V0LWNvb2tpZS1wYXJzZXIgZW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgZGVjb2RpbmcgYSBjb29raWUgd2l0aCB2YWx1ZSAnXCIgKyB2YWx1ZSArIFwiJy4gU2V0IG9wdGlvbnMuZGVjb2RlVmFsdWVzIHRvIGZhbHNlIHRvIGRpc2FibGUgdGhpcyBmZWF0dXJlLlwiLFxuICAgICAgICAgIGVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb29raWUgPSB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHZhbHVlXG4gICAgICB9O1xuICAgICAgcGFydHMuZm9yRWFjaChmdW5jdGlvbihwYXJ0KSB7XG4gICAgICAgIHZhciBzaWRlcyA9IHBhcnQuc3BsaXQoXCI9XCIpO1xuICAgICAgICB2YXIga2V5ID0gc2lkZXMuc2hpZnQoKS50cmltTGVmdCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciB2YWx1ZTIgPSBzaWRlcy5qb2luKFwiPVwiKTtcbiAgICAgICAgaWYgKGtleSA9PT0gXCJleHBpcmVzXCIpIHtcbiAgICAgICAgICBjb29raWUuZXhwaXJlcyA9IG5ldyBEYXRlKHZhbHVlMik7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcIm1heC1hZ2VcIikge1xuICAgICAgICAgIGNvb2tpZS5tYXhBZ2UgPSBwYXJzZUludCh2YWx1ZTIsIDEwKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IFwic2VjdXJlXCIpIHtcbiAgICAgICAgICBjb29raWUuc2VjdXJlID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IFwiaHR0cG9ubHlcIikge1xuICAgICAgICAgIGNvb2tpZS5odHRwT25seSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBcInNhbWVzaXRlXCIpIHtcbiAgICAgICAgICBjb29raWUuc2FtZVNpdGUgPSB2YWx1ZTI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29va2llW2tleV0gPSB2YWx1ZTI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvb2tpZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VOYW1lVmFsdWVQYWlyKG5hbWVWYWx1ZVBhaXJTdHIpIHtcbiAgICAgIHZhciBuYW1lID0gXCJcIjtcbiAgICAgIHZhciB2YWx1ZSA9IFwiXCI7XG4gICAgICB2YXIgbmFtZVZhbHVlQXJyID0gbmFtZVZhbHVlUGFpclN0ci5zcGxpdChcIj1cIik7XG4gICAgICBpZiAobmFtZVZhbHVlQXJyLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbmFtZSA9IG5hbWVWYWx1ZUFyci5zaGlmdCgpO1xuICAgICAgICB2YWx1ZSA9IG5hbWVWYWx1ZUFyci5qb2luKFwiPVwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gbmFtZVZhbHVlUGFpclN0cjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IG5hbWUsIHZhbHVlIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRQYXJzZU9wdGlvbnMsIG9wdGlvbnMpIDogZGVmYXVsdFBhcnNlT3B0aW9ucztcbiAgICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zLm1hcCkge1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpbnB1dC5oZWFkZXJzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuaGVhZGVycy5nZXRTZXRDb29raWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGlucHV0ID0gaW5wdXQuaGVhZGVycy5nZXRTZXRDb29raWUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC5oZWFkZXJzW1wic2V0LWNvb2tpZVwiXSkge1xuICAgICAgICAgIGlucHV0ID0gaW5wdXQuaGVhZGVyc1tcInNldC1jb29raWVcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHNjaCA9IGlucHV0LmhlYWRlcnNbT2JqZWN0LmtleXMoaW5wdXQuaGVhZGVycykuZmluZChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gXCJzZXQtY29va2llXCI7XG4gICAgICAgICAgfSldO1xuICAgICAgICAgIGlmICghc2NoICYmIGlucHV0LmhlYWRlcnMuY29va2llICYmICFvcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBcIldhcm5pbmc6IHNldC1jb29raWUtcGFyc2VyIGFwcGVhcnMgdG8gaGF2ZSBiZWVuIGNhbGxlZCBvbiBhIHJlcXVlc3Qgb2JqZWN0LiBJdCBpcyBkZXNpZ25lZCB0byBwYXJzZSBTZXQtQ29va2llIGhlYWRlcnMgZnJvbSByZXNwb25zZXMsIG5vdCBDb29raWUgaGVhZGVycyBmcm9tIHJlcXVlc3RzLiBTZXQgdGhlIG9wdGlvbiB7c2lsZW50OiB0cnVlfSB0byBzdXBwcmVzcyB0aGlzIHdhcm5pbmcuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlucHV0ID0gc2NoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgIGlucHV0ID0gW2lucHV0XTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFBhcnNlT3B0aW9ucywgb3B0aW9ucykgOiBkZWZhdWx0UGFyc2VPcHRpb25zO1xuICAgICAgaWYgKCFvcHRpb25zLm1hcCkge1xuICAgICAgICByZXR1cm4gaW5wdXQuZmlsdGVyKGlzTm9uRW1wdHlTdHJpbmcpLm1hcChmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmcoc3RyLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY29va2llcyA9IHt9O1xuICAgICAgICByZXR1cm4gaW5wdXQuZmlsdGVyKGlzTm9uRW1wdHlTdHJpbmcpLnJlZHVjZShmdW5jdGlvbihjb29raWVzMiwgc3RyKSB7XG4gICAgICAgICAgdmFyIGNvb2tpZSA9IHBhcnNlU3RyaW5nKHN0ciwgb3B0aW9ucyk7XG4gICAgICAgICAgY29va2llczJbY29va2llLm5hbWVdID0gY29va2llO1xuICAgICAgICAgIHJldHVybiBjb29raWVzMjtcbiAgICAgICAgfSwgY29va2llcyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNwbGl0Q29va2llc1N0cmluZyhjb29raWVzU3RyaW5nKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjb29raWVzU3RyaW5nKSkge1xuICAgICAgICByZXR1cm4gY29va2llc1N0cmluZztcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY29va2llc1N0cmluZyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB2YXIgY29va2llc1N0cmluZ3MgPSBbXTtcbiAgICAgIHZhciBwb3MgPSAwO1xuICAgICAgdmFyIHN0YXJ0O1xuICAgICAgdmFyIGNoO1xuICAgICAgdmFyIGxhc3RDb21tYTtcbiAgICAgIHZhciBuZXh0U3RhcnQ7XG4gICAgICB2YXIgY29va2llc1NlcGFyYXRvckZvdW5kO1xuICAgICAgZnVuY3Rpb24gc2tpcFdoaXRlc3BhY2UoKSB7XG4gICAgICAgIHdoaWxlIChwb3MgPCBjb29raWVzU3RyaW5nLmxlbmd0aCAmJiAvXFxzLy50ZXN0KGNvb2tpZXNTdHJpbmcuY2hhckF0KHBvcykpKSB7XG4gICAgICAgICAgcG9zICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcyA8IGNvb2tpZXNTdHJpbmcubGVuZ3RoO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gbm90U3BlY2lhbENoYXIoKSB7XG4gICAgICAgIGNoID0gY29va2llc1N0cmluZy5jaGFyQXQocG9zKTtcbiAgICAgICAgcmV0dXJuIGNoICE9PSBcIj1cIiAmJiBjaCAhPT0gXCI7XCIgJiYgY2ggIT09IFwiLFwiO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHBvcyA8IGNvb2tpZXNTdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgIHN0YXJ0ID0gcG9zO1xuICAgICAgICBjb29raWVzU2VwYXJhdG9yRm91bmQgPSBmYWxzZTtcbiAgICAgICAgd2hpbGUgKHNraXBXaGl0ZXNwYWNlKCkpIHtcbiAgICAgICAgICBjaCA9IGNvb2tpZXNTdHJpbmcuY2hhckF0KHBvcyk7XG4gICAgICAgICAgaWYgKGNoID09PSBcIixcIikge1xuICAgICAgICAgICAgbGFzdENvbW1hID0gcG9zO1xuICAgICAgICAgICAgcG9zICs9IDE7XG4gICAgICAgICAgICBza2lwV2hpdGVzcGFjZSgpO1xuICAgICAgICAgICAgbmV4dFN0YXJ0ID0gcG9zO1xuICAgICAgICAgICAgd2hpbGUgKHBvcyA8IGNvb2tpZXNTdHJpbmcubGVuZ3RoICYmIG5vdFNwZWNpYWxDaGFyKCkpIHtcbiAgICAgICAgICAgICAgcG9zICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zIDwgY29va2llc1N0cmluZy5sZW5ndGggJiYgY29va2llc1N0cmluZy5jaGFyQXQocG9zKSA9PT0gXCI9XCIpIHtcbiAgICAgICAgICAgICAgY29va2llc1NlcGFyYXRvckZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgcG9zID0gbmV4dFN0YXJ0O1xuICAgICAgICAgICAgICBjb29raWVzU3RyaW5ncy5wdXNoKGNvb2tpZXNTdHJpbmcuc3Vic3RyaW5nKHN0YXJ0LCBsYXN0Q29tbWEpKTtcbiAgICAgICAgICAgICAgc3RhcnQgPSBwb3M7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwb3MgPSBsYXN0Q29tbWEgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb3MgKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb29raWVzU2VwYXJhdG9yRm91bmQgfHwgcG9zID49IGNvb2tpZXNTdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgY29va2llc1N0cmluZ3MucHVzaChjb29raWVzU3RyaW5nLnN1YnN0cmluZyhzdGFydCwgY29va2llc1N0cmluZy5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvb2tpZXNTdHJpbmdzO1xuICAgIH1cbiAgICBtb2R1bGUuZXhwb3J0cyA9IHBhcnNlO1xuICAgIG1vZHVsZS5leHBvcnRzLnBhcnNlID0gcGFyc2U7XG4gICAgbW9kdWxlLmV4cG9ydHMucGFyc2VTdHJpbmcgPSBwYXJzZVN0cmluZztcbiAgICBtb2R1bGUuZXhwb3J0cy5zcGxpdENvb2tpZXNTdHJpbmcgPSBzcGxpdENvb2tpZXNTdHJpbmc7XG4gIH1cbn0pO1xuXG4vLyBzcmMvc3RvcmUudHNcbnZhciBpbXBvcnRfc2V0X2Nvb2tpZV9wYXJzZXIgPSBfX3RvRVNNKHJlcXVpcmVfc2V0X2Nvb2tpZSgpKTtcbnZhciBQRVJTSVNURU5DWV9LRVkgPSBcIk1TV19DT09LSUVfU1RPUkVcIjtcbmZ1bmN0aW9uIHN1cHBvcnRzTG9jYWxTdG9yYWdlKCkge1xuICB0cnkge1xuICAgIGlmIChsb2NhbFN0b3JhZ2UgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0ZXN0S2V5ID0gUEVSU0lTVEVOQ1lfS0VZICsgXCJfdGVzdFwiO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRlc3RLZXksIFwidGVzdFwiKTtcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0ZXN0S2V5KTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0S2V5KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzUHJvcGVydHlBY2Nlc3NpYmxlKG9iamVjdCwgbWV0aG9kKSB7XG4gIHRyeSB7XG4gICAgb2JqZWN0W21ldGhvZF07XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxudmFyIENvb2tpZVN0b3JlID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0b3JlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgfVxuICBhZGQocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBpZiAoaXNQcm9wZXJ0eUFjY2Vzc2libGUocmVxdWVzdCwgXCJjcmVkZW50aWFsc1wiKSAmJiByZXF1ZXN0LmNyZWRlbnRpYWxzID09PSBcIm9taXRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0VXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgcmVzcG9uc2VDb29raWVzID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXCJzZXQtY29va2llXCIpO1xuICAgIGlmICghcmVzcG9uc2VDb29raWVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcGFyc2VkUmVzcG9uc2VDb29raWVzID0gKDAsIGltcG9ydF9zZXRfY29va2llX3BhcnNlci5wYXJzZSkocmVzcG9uc2VDb29raWVzKS5tYXAoXG4gICAgICAoeyBtYXhBZ2UsIC4uLmNvb2tpZSB9KSA9PiAoe1xuICAgICAgICAuLi5jb29raWUsXG4gICAgICAgIGV4cGlyZXM6IG1heEFnZSA9PT0gdm9pZCAwID8gY29va2llLmV4cGlyZXMgOiBuZXcgRGF0ZShub3cgKyBtYXhBZ2UgKiAxZTMpLFxuICAgICAgICBtYXhBZ2VcbiAgICAgIH0pXG4gICAgKTtcbiAgICBjb25zdCBwcmV2Q29va2llcyA9IHRoaXMuc3RvcmUuZ2V0KHJlcXVlc3RVcmwub3JpZ2luKSB8fCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHBhcnNlZFJlc3BvbnNlQ29va2llcy5mb3JFYWNoKChjb29raWUpID0+IHtcbiAgICAgIHRoaXMuc3RvcmUuc2V0KHJlcXVlc3RVcmwub3JpZ2luLCBwcmV2Q29va2llcy5zZXQoY29va2llLm5hbWUsIGNvb2tpZSkpO1xuICAgIH0pO1xuICB9XG4gIGdldChyZXF1ZXN0KSB7XG4gICAgdGhpcy5kZWxldGVFeHBpcmVkQ29va2llcygpO1xuICAgIGNvbnN0IHJlcXVlc3RVcmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBvcmlnaW5Db29raWVzID0gdGhpcy5zdG9yZS5nZXQocmVxdWVzdFVybC5vcmlnaW4pIHx8IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgaWYgKCFpc1Byb3BlcnR5QWNjZXNzaWJsZShyZXF1ZXN0LCBcImNyZWRlbnRpYWxzXCIpKSB7XG4gICAgICByZXR1cm4gb3JpZ2luQ29va2llcztcbiAgICB9XG4gICAgc3dpdGNoIChyZXF1ZXN0LmNyZWRlbnRpYWxzKSB7XG4gICAgICBjYXNlIFwiaW5jbHVkZVwiOiB7XG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICByZXR1cm4gb3JpZ2luQ29va2llcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkb2N1bWVudENvb2tpZXMgPSAoMCwgaW1wb3J0X3NldF9jb29raWVfcGFyc2VyLnBhcnNlKShkb2N1bWVudC5jb29raWUpO1xuICAgICAgICBkb2N1bWVudENvb2tpZXMuZm9yRWFjaCgoY29va2llKSA9PiB7XG4gICAgICAgICAgb3JpZ2luQ29va2llcy5zZXQoY29va2llLm5hbWUsIGNvb2tpZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3JpZ2luQ29va2llcztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJzYW1lLW9yaWdpblwiOiB7XG4gICAgICAgIHJldHVybiBvcmlnaW5Db29raWVzO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgfVxuICB9XG4gIGdldEFsbCgpIHtcbiAgICB0aGlzLmRlbGV0ZUV4cGlyZWRDb29raWVzKCk7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmU7XG4gIH1cbiAgZGVsZXRlQWxsKHJlcXVlc3QpIHtcbiAgICBjb25zdCByZXF1ZXN0VXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgdGhpcy5zdG9yZS5kZWxldGUocmVxdWVzdFVybC5vcmlnaW4pO1xuICB9XG4gIGNsZWFyKCkge1xuICAgIHRoaXMuc3RvcmUuY2xlYXIoKTtcbiAgfVxuICBoeWRyYXRlKCkge1xuICAgIGlmICghc3VwcG9ydHNMb2NhbFN0b3JhZ2UoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwZXJzaXN0ZWRDb29raWVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oUEVSU0lTVEVOQ1lfS0VZKTtcbiAgICBpZiAoIXBlcnNpc3RlZENvb2tpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZENvb2tpZXMgPSBKU09OLnBhcnNlKHBlcnNpc3RlZENvb2tpZXMpO1xuICAgICAgcGFyc2VkQ29va2llcy5mb3JFYWNoKChbb3JpZ2luLCBjb29raWVzXSkgPT4ge1xuICAgICAgICB0aGlzLnN0b3JlLnNldChcbiAgICAgICAgICBvcmlnaW4sXG4gICAgICAgICAgbmV3IE1hcChcbiAgICAgICAgICAgIGNvb2tpZXMubWFwKChbdG9rZW4sIHsgZXhwaXJlcywgLi4uY29va2llIH1dKSA9PiBbXG4gICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICBleHBpcmVzID09PSB2b2lkIDAgPyBjb29raWUgOiB7IC4uLmNvb2tpZSwgZXhwaXJlczogbmV3IERhdGUoZXhwaXJlcykgfVxuICAgICAgICAgICAgXSlcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGBcblt2aXJ0dWFsLWNvb2tpZV0gRmFpbGVkIHRvIHBhcnNlIGEgc3RvcmVkIGNvb2tpZSBmcm9tIHRoZSBsb2NhbFN0b3JhZ2UgKGtleSBcIiR7UEVSU0lTVEVOQ1lfS0VZfVwiKS5cblxuU3RvcmVkIHZhbHVlOlxuJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbShQRVJTSVNURU5DWV9LRVkpfVxuXG5UaHJvd24gZXhjZXB0aW9uOlxuJHtlcnJvcn1cblxuSW52YWxpZCB2YWx1ZSBoYXMgYmVlbiByZW1vdmVkIGZyb20gbG9jYWxTdG9yYWdlIHRvIHByZXZlbnQgc3Vic2VxdWVudCBmYWlsZWQgcGFyc2luZyBhdHRlbXB0cy5gKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFBFUlNJU1RFTkNZX0tFWSk7XG4gICAgfVxuICB9XG4gIHBlcnNpc3QoKSB7XG4gICAgaWYgKCFzdXBwb3J0c0xvY2FsU3RvcmFnZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNlcmlhbGl6ZWRDb29raWVzID0gQXJyYXkuZnJvbSh0aGlzLnN0b3JlLmVudHJpZXMoKSkubWFwKFxuICAgICAgKFtvcmlnaW4sIGNvb2tpZXNdKSA9PiB7XG4gICAgICAgIHJldHVybiBbb3JpZ2luLCBBcnJheS5mcm9tKGNvb2tpZXMuZW50cmllcygpKV07XG4gICAgICB9XG4gICAgKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShQRVJTSVNURU5DWV9LRVksIEpTT04uc3RyaW5naWZ5KHNlcmlhbGl6ZWRDb29raWVzKSk7XG4gIH1cbiAgZGVsZXRlRXhwaXJlZENvb2tpZXMoKSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLnN0b3JlLmZvckVhY2goKG9yaWdpbkNvb2tpZXMsIG9yaWdpbikgPT4ge1xuICAgICAgb3JpZ2luQ29va2llcy5mb3JFYWNoKCh7IGV4cGlyZXMsIG5hbWUgfSkgPT4ge1xuICAgICAgICBpZiAoZXhwaXJlcyAhPT0gdm9pZCAwICYmIGV4cGlyZXMuZ2V0VGltZSgpIDw9IG5vdykge1xuICAgICAgICAgIG9yaWdpbkNvb2tpZXMuZGVsZXRlKG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChvcmlnaW5Db29raWVzLnNpemUgPT09IDApIHtcbiAgICAgICAgdGhpcy5zdG9yZS5kZWxldGUob3JpZ2luKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcbnZhciBzdG9yZSA9IG5ldyBDb29raWVTdG9yZSgpO1xuZXhwb3J0IHtcbiAgUEVSU0lTVEVOQ1lfS0VZLFxuICBzdG9yZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/cookies/lib/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeBuffer: () => (/* binding */ decodeBuffer),\n/* harmony export */   encodeBuffer: () => (/* binding */ encodeBuffer),\n/* harmony export */   toArrayBuffer: () => (/* binding */ toArrayBuffer)\n/* harmony export */ });\n// src/utils/bufferUtils.ts\nvar encoder = new TextEncoder();\nfunction encodeBuffer(text) {\n  return encoder.encode(text);\n}\nfunction decodeBuffer(buffer, encoding) {\n  const decoder = new TextDecoder(encoding);\n  return decoder.decode(buffer);\n}\nfunction toArrayBuffer(array) {\n  return array.buffer.slice(\n    array.byteOffset,\n    array.byteOffset + array.byteLength\n  );\n}\n\n\n//# sourceMappingURL=chunk-6HYIRFX2.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay02SFlJUkZYMi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQU1FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZW1vLWxvZ2luLy4vbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvY2h1bmstNkhZSVJGWDIubWpzPzFhNDQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2J1ZmZlclV0aWxzLnRzXG52YXIgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuZnVuY3Rpb24gZW5jb2RlQnVmZmVyKHRleHQpIHtcbiAgcmV0dXJuIGVuY29kZXIuZW5jb2RlKHRleHQpO1xufVxuZnVuY3Rpb24gZGVjb2RlQnVmZmVyKGJ1ZmZlciwgZW5jb2RpbmcpIHtcbiAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihlbmNvZGluZyk7XG4gIHJldHVybiBkZWNvZGVyLmRlY29kZShidWZmZXIpO1xufVxuZnVuY3Rpb24gdG9BcnJheUJ1ZmZlcihhcnJheSkge1xuICByZXR1cm4gYXJyYXkuYnVmZmVyLnNsaWNlKFxuICAgIGFycmF5LmJ5dGVPZmZzZXQsXG4gICAgYXJyYXkuYnl0ZU9mZnNldCArIGFycmF5LmJ5dGVMZW5ndGhcbiAgKTtcbn1cblxuZXhwb3J0IHtcbiAgZW5jb2RlQnVmZmVyLFxuICBkZWNvZGVCdWZmZXIsXG4gIHRvQXJyYXlCdWZmZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay02SFlJUkZYMi5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-CCASONWB.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-CCASONWB.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientRequestInterceptor: () => (/* binding */ ClientRequestInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_IBYBTTYK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-IBYBTTYK.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-IBYBTTYK.mjs\");\n/* harmony import */ var _chunk_DERTLGL3_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-DERTLGL3.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-DERTLGL3.mjs\");\n/* harmony import */ var _chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-OUWBQF3Z.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-OUWBQF3Z.mjs\");\n/* harmony import */ var _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-QED3Q6Z2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var _open_draft_until__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @open-draft/until */ \"(ssr)/./node_modules/@open-draft/until/lib/index.mjs\");\n/* harmony import */ var _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @open-draft/deferred-promise */ \"(ssr)/./node_modules/@open-draft/deferred-promise/build/index.mjs\");\n/* harmony import */ var _open_draft_logger__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @open-draft/logger */ \"(ssr)/./node_modules/@open-draft/logger/lib/index.mjs\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! url */ \"url\");\n\n\n\n\n\n// src/interceptors/ClientRequest/index.ts\n\n\n\n// src/interceptors/ClientRequest/NodeClientRequest.ts\n\n\n\n\n// src/interceptors/ClientRequest/utils/normalizeClientRequestEndArgs.ts\n\nvar logger = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_8__.Logger(\"utils getUrlByRequestOptions\");\nfunction normalizeClientRequestEndArgs(...args) {\n  logger.info(\"arguments\", args);\n  const normalizedArgs = new Array(3).fill(null).map((value, index) => args[index] || value);\n  normalizedArgs.sort((a, b) => {\n    if (typeof a === \"function\") {\n      return 1;\n    }\n    if (typeof b === \"function\") {\n      return -1;\n    }\n    if (typeof a === \"string\" && typeof b === \"string\") {\n      return normalizedArgs.indexOf(a) - normalizedArgs.indexOf(b);\n    }\n    return 0;\n  });\n  logger.info(\"normalized args\", normalizedArgs);\n  return normalizedArgs;\n}\n\n// src/interceptors/ClientRequest/utils/normalizeClientRequestWriteArgs.ts\n\nvar logger2 = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_8__.Logger(\"http normalizeWriteArgs\");\nfunction normalizeClientRequestWriteArgs(args) {\n  logger2.info(\"normalizing ClientRequest.write arguments...\", args);\n  const chunk = args[0];\n  const encoding = typeof args[1] === \"string\" ? args[1] : void 0;\n  const callback = typeof args[1] === \"function\" ? args[1] : args[2];\n  const writeArgs = [\n    chunk,\n    encoding,\n    callback\n  ];\n  logger2.info(\n    \"successfully normalized ClientRequest.write arguments:\",\n    writeArgs\n  );\n  return writeArgs;\n}\n\n// src/interceptors/ClientRequest/utils/cloneIncomingMessage.ts\n\n\nvar IS_CLONE = Symbol(\"isClone\");\nfunction cloneIncomingMessage(message) {\n  const clone = message.pipe(new stream__WEBPACK_IMPORTED_MODULE_9__.PassThrough());\n  inheritProperties(message, clone);\n  const clonedPrototype = Object.create(http__WEBPACK_IMPORTED_MODULE_4__.IncomingMessage.prototype);\n  getPrototypes(clone).forEach((prototype) => {\n    inheritProperties(prototype, clonedPrototype);\n  });\n  Object.setPrototypeOf(clone, clonedPrototype);\n  Object.defineProperty(clone, IS_CLONE, {\n    enumerable: true,\n    value: true\n  });\n  return clone;\n}\nfunction getPrototypes(source) {\n  const prototypes = [];\n  let current = source;\n  while (current = Object.getPrototypeOf(current)) {\n    prototypes.push(current);\n  }\n  return prototypes;\n}\nfunction inheritProperties(source, target) {\n  const properties = [\n    ...Object.getOwnPropertyNames(source),\n    ...Object.getOwnPropertySymbols(source)\n  ];\n  for (const property of properties) {\n    if (target.hasOwnProperty(property)) {\n      continue;\n    }\n    const descriptor = Object.getOwnPropertyDescriptor(source, property);\n    if (!descriptor) {\n      continue;\n    }\n    Object.defineProperty(target, property, descriptor);\n  }\n}\n\n// src/interceptors/ClientRequest/utils/createResponse.ts\nfunction createResponse(message) {\n  const responseBodyOrNull = (0,_chunk_IBYBTTYK_mjs__WEBPACK_IMPORTED_MODULE_0__.isResponseWithoutBody)(message.statusCode || 200) ? null : new ReadableStream({\n    start(controller) {\n      message.on(\"data\", (chunk) => controller.enqueue(chunk));\n      message.on(\"end\", () => controller.close());\n    }\n  });\n  return new Response(responseBodyOrNull, {\n    status: message.statusCode,\n    statusText: message.statusMessage,\n    headers: createHeadersFromIncomingHttpHeaders(message.headers)\n  });\n}\nfunction createHeadersFromIncomingHttpHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const headerName in httpHeaders) {\n    const headerValues = httpHeaders[headerName];\n    if (typeof headerValues === \"undefined\") {\n      continue;\n    }\n    if (Array.isArray(headerValues)) {\n      headerValues.forEach((headerValue) => {\n        headers.append(headerName, headerValue);\n      });\n      continue;\n    }\n    headers.set(headerName, headerValues);\n  }\n  return headers;\n}\n\n// src/interceptors/ClientRequest/utils/createRequest.ts\nfunction createRequest(clientRequest) {\n  const headers = new Headers();\n  const outgoingHeaders = clientRequest.getHeaders();\n  for (const headerName in outgoingHeaders) {\n    const headerValue = outgoingHeaders[headerName];\n    if (typeof headerValue === \"undefined\") {\n      continue;\n    }\n    const valuesList = Array.prototype.concat([], headerValue);\n    for (const value of valuesList) {\n      headers.append(headerName, value.toString());\n    }\n  }\n  if (clientRequest.url.username || clientRequest.url.password) {\n    const auth = `${clientRequest.url.username || \"\"}:${clientRequest.url.password || \"\"}`;\n    headers.set(\"Authorization\", `Basic ${btoa(auth)}`);\n    clientRequest.url.username = \"\";\n    clientRequest.url.password = \"\";\n  }\n  const method = clientRequest.method || \"GET\";\n  return new Request(clientRequest.url, {\n    method,\n    headers,\n    credentials: \"same-origin\",\n    body: method === \"HEAD\" || method === \"GET\" ? null : clientRequest.requestBuffer\n  });\n}\n\n// src/utils/getValueBySymbol.ts\nfunction getValueBySymbol(symbolName, source) {\n  const ownSymbols = Object.getOwnPropertySymbols(source);\n  const symbol = ownSymbols.find((symbol2) => {\n    return symbol2.description === symbolName;\n  });\n  if (symbol) {\n    return Reflect.get(source, symbol);\n  }\n  return;\n}\n\n// src/utils/isObject.ts\nfunction isObject(value) {\n  return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n\n// src/utils/getRawFetchHeaders.ts\nfunction getRawFetchHeaders(headers) {\n  const headersList = getValueBySymbol(\"headers list\", headers);\n  if (!headersList) {\n    return;\n  }\n  const headersMap = getValueBySymbol(\"headers map\", headersList);\n  if (!headersMap || !isHeadersMapWithRawHeaderNames(headersMap)) {\n    return;\n  }\n  const rawHeaders = /* @__PURE__ */ new Map();\n  headersMap.forEach(({ name, value }) => {\n    rawHeaders.set(name, value);\n  });\n  return rawHeaders;\n}\nfunction isHeadersMapWithRawHeaderNames(headersMap) {\n  return Array.from(\n    headersMap.values()\n  ).every((value) => {\n    return isObject(value) && \"name\" in value;\n  });\n}\n\n// src/interceptors/ClientRequest/NodeClientRequest.ts\nvar _NodeClientRequest = class extends http__WEBPACK_IMPORTED_MODULE_4__.ClientRequest {\n  constructor([url, requestOptions, callback], options) {\n    super(requestOptions, callback);\n    this.chunks = [];\n    this.logger = options.logger.extend(\n      `request ${requestOptions.method} ${url.href}`\n    );\n    this.logger.info(\"constructing ClientRequest using options:\", {\n      url,\n      requestOptions,\n      callback\n    });\n    this.state = 0 /* Idle */;\n    this.url = url;\n    this.emitter = options.emitter;\n    this.requestBuffer = null;\n    this.response = new http__WEBPACK_IMPORTED_MODULE_4__.IncomingMessage(this.socket);\n  }\n  writeRequestBodyChunk(chunk, encoding) {\n    if (chunk == null) {\n      return;\n    }\n    if (this.requestBuffer == null) {\n      this.requestBuffer = Buffer.from([]);\n    }\n    const resolvedChunk = Buffer.isBuffer(chunk) ? chunk : Buffer.from(chunk, encoding);\n    this.requestBuffer = Buffer.concat([this.requestBuffer, resolvedChunk]);\n  }\n  write(...args) {\n    var _a;\n    const [chunk, encoding, callback] = normalizeClientRequestWriteArgs(args);\n    this.logger.info(\"write:\", { chunk, encoding, callback });\n    this.chunks.push({ chunk, encoding });\n    this.writeRequestBodyChunk(chunk, encoding);\n    this.logger.info(\n      \"chunk successfully stored!\",\n      (_a = this.requestBuffer) == null ? void 0 : _a.byteLength\n    );\n    if (!chunk || chunk.length === 0) {\n      this.logger.info(\"written chunk is empty, skipping callback...\");\n    } else {\n      callback == null ? void 0 : callback();\n    }\n    return true;\n  }\n  end(...args) {\n    this.logger.info(\"end\", args);\n    const requestId = (0,_chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_3__.createRequestId)();\n    const [chunk, encoding, callback] = normalizeClientRequestEndArgs(...args);\n    this.logger.info(\"normalized arguments:\", { chunk, encoding, callback });\n    this.writeRequestBodyChunk(chunk, encoding || void 0);\n    this.state = 2 /* Sent */;\n    const capturedRequest = createRequest(this);\n    const { interactiveRequest, requestController } = (0,_chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_2__.toInteractiveRequest)(capturedRequest);\n    Object.defineProperty(capturedRequest, \"respondWith\", {\n      value: requestController.respondWith.bind(requestController)\n    });\n    if (this.hasHeader(_chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_3__.INTERNAL_REQUEST_ID_HEADER_NAME)) {\n      this.removeHeader(_chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_3__.INTERNAL_REQUEST_ID_HEADER_NAME);\n      return this.passthrough(chunk, encoding, callback);\n    }\n    this.emitter.once(\"request\", ({ requestId: pendingRequestId }) => {\n      if (pendingRequestId !== requestId) {\n        return;\n      }\n      if (requestController.responsePromise.state === \"pending\") {\n        this.logger.info(\n          \"request has not been handled in listeners, executing fail-safe listener...\"\n        );\n        requestController.responsePromise.resolve(void 0);\n      }\n    });\n    (0,_open_draft_until__WEBPACK_IMPORTED_MODULE_6__.until)(async () => {\n      this.logger.info(\n        'emitting the \"request\" event for %d listener(s)...',\n        this.emitter.listenerCount(\"request\")\n      );\n      this.state = 3 /* MockLookupStart */;\n      await (0,_chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_2__.emitAsync)(this.emitter, \"request\", {\n        request: interactiveRequest,\n        requestId\n      });\n      this.logger.info('all \"request\" listeners done!');\n      const mockedResponse = await requestController.responsePromise;\n      this.logger.info(\"event.respondWith called with:\", mockedResponse);\n      return mockedResponse;\n    }).then((resolverResult) => {\n      this.logger.info(\"the listeners promise awaited!\");\n      this.state = 4 /* MockLookupEnd */;\n      if (!this.headersSent) {\n        for (const [headerName, headerValue] of capturedRequest.headers) {\n          this.setHeader(headerName, headerValue);\n        }\n      }\n      if (resolverResult.error) {\n        this.logger.info(\n          \"encountered resolver exception, aborting request...\",\n          resolverResult.error\n        );\n        this.destroyed = true;\n        this.emit(\"error\", resolverResult.error);\n        this.terminate();\n        return this;\n      }\n      const mockedResponse = resolverResult.data;\n      if (mockedResponse) {\n        this.logger.info(\n          \"received mocked response:\",\n          mockedResponse.status,\n          mockedResponse.statusText\n        );\n        this.destroyed = false;\n        if (\n          /**\n           * @note Some environments, like Miniflare (Cloudflare) do not\n           * implement the \"Response.type\" property and throw on its access.\n           * Safely check if we can access \"type\" on \"Response\" before continuing.\n           * @see https://github.com/mswjs/msw/issues/1834\n           */\n          (0,_chunk_DERTLGL3_mjs__WEBPACK_IMPORTED_MODULE_1__.isPropertyAccessible)(mockedResponse, \"type\") && mockedResponse.type === \"error\"\n        ) {\n          this.logger.info(\n            \"received network error response, aborting request...\"\n          );\n          this.emit(\"error\", new TypeError(\"Network error\"));\n          this.terminate();\n          return this;\n        }\n        const responseClone = mockedResponse.clone();\n        this.respondWith(mockedResponse);\n        this.logger.info(\n          mockedResponse.status,\n          mockedResponse.statusText,\n          \"(MOCKED)\"\n        );\n        callback == null ? void 0 : callback();\n        this.logger.info('emitting the custom \"response\" event...');\n        this.emitter.emit(\"response\", {\n          response: responseClone,\n          isMockedResponse: true,\n          request: capturedRequest,\n          requestId\n        });\n        this.logger.info(\"request (mock) is completed\");\n        return this;\n      }\n      this.logger.info(\"no mocked response received!\");\n      this.once(\"response-internal\", (message) => {\n        this.logger.info(message.statusCode, message.statusMessage);\n        this.logger.info(\"original response headers:\", message.headers);\n        this.logger.info('emitting the custom \"response\" event...');\n        this.emitter.emit(\"response\", {\n          response: createResponse(message),\n          isMockedResponse: false,\n          request: capturedRequest,\n          requestId\n        });\n      });\n      return this.passthrough(chunk, encoding, callback);\n    });\n    return this;\n  }\n  emit(event, ...data) {\n    this.logger.info(\"emit: %s\", event);\n    if (event === \"response\") {\n      this.logger.info('found \"response\" event, cloning the response...');\n      try {\n        const response = data[0];\n        const firstClone = cloneIncomingMessage(response);\n        const secondClone = cloneIncomingMessage(response);\n        this.emit(\"response-internal\", secondClone);\n        this.logger.info(\n          'response successfully cloned, emitting \"response\" event...'\n        );\n        return super.emit(event, firstClone, ...data.slice(1));\n      } catch (error) {\n        this.logger.info(\"error when cloning response:\", error);\n        return super.emit(event, ...data);\n      }\n    }\n    if (event === \"error\") {\n      const error = data[0];\n      const errorCode = error.code || \"\";\n      this.logger.info(\"error:\\n\", error);\n      if (_NodeClientRequest.suppressErrorCodes.includes(errorCode)) {\n        if (this.state < 4 /* MockLookupEnd */) {\n          if (!this.capturedError) {\n            this.capturedError = error;\n            this.logger.info(\"captured the first error:\", this.capturedError);\n          }\n          return false;\n        }\n        if (this.state === 5 /* ResponseReceived */ && this.responseType === \"mock\") {\n          return false;\n        }\n      }\n    }\n    return super.emit(event, ...data);\n  }\n  /**\n   * Performs the intercepted request as-is.\n   * Replays the captured request body chunks,\n   * still emits the internal events, and wraps\n   * up the request with `super.end()`.\n   */\n  passthrough(chunk, encoding, callback) {\n    this.state = 5 /* ResponseReceived */;\n    this.responseType = \"passthrough\";\n    if (this.capturedError) {\n      this.emit(\"error\", this.capturedError);\n      return this;\n    }\n    this.logger.info(\"writing request chunks...\", this.chunks);\n    for (const { chunk: chunk2, encoding: encoding2 } of this.chunks) {\n      if (encoding2) {\n        super.write(chunk2, encoding2);\n      } else {\n        super.write(chunk2);\n      }\n    }\n    this.once(\"error\", (error) => {\n      this.logger.info(\"original request error:\", error);\n    });\n    this.once(\"abort\", () => {\n      this.logger.info(\"original request aborted!\");\n    });\n    this.once(\"response-internal\", (message) => {\n      this.logger.info(message.statusCode, message.statusMessage);\n      this.logger.info(\"original response headers:\", message.headers);\n    });\n    this.logger.info(\"performing original request...\");\n    return super.end(...[chunk, encoding, callback].filter(Boolean));\n  }\n  /**\n   * Responds to this request instance using a mocked response.\n   */\n  respondWith(mockedResponse) {\n    this.logger.info(\"responding with a mocked response...\", mockedResponse);\n    this.state = 5 /* ResponseReceived */;\n    this.responseType = \"mock\";\n    Object.defineProperties(this, {\n      writableFinished: { value: true },\n      writableEnded: { value: true }\n    });\n    this.emit(\"finish\");\n    const { status, statusText, headers, body } = mockedResponse;\n    this.response.statusCode = status;\n    this.response.statusMessage = statusText;\n    const rawHeaders = getRawFetchHeaders(headers) || headers;\n    if (rawHeaders) {\n      this.response.headers = {};\n      rawHeaders.forEach((headerValue, headerName) => {\n        this.response.rawHeaders.push(headerName, headerValue);\n        const insensitiveHeaderName = headerName.toLowerCase();\n        const prevHeaders = this.response.headers[insensitiveHeaderName];\n        this.response.headers[insensitiveHeaderName] = prevHeaders ? Array.prototype.concat([], prevHeaders, headerValue) : headerValue;\n      });\n    }\n    this.logger.info(\"mocked response headers ready:\", headers);\n    this.res = this.response;\n    this.emit(\"response\", this.response);\n    const isResponseStreamFinished = new _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_7__.DeferredPromise();\n    const finishResponseStream = () => {\n      this.logger.info(\"finished response stream!\");\n      this.response.push(null);\n      this.response.complete = true;\n      isResponseStreamFinished.resolve();\n    };\n    if (body) {\n      const bodyReader = body.getReader();\n      const readNextChunk = async () => {\n        const { done, value } = await bodyReader.read();\n        if (done) {\n          finishResponseStream();\n          return;\n        }\n        this.response.emit(\"data\", value);\n        return readNextChunk();\n      };\n      readNextChunk();\n    } else {\n      finishResponseStream();\n    }\n    isResponseStreamFinished.then(() => {\n      this.logger.info(\"finalizing response...\");\n      this.response.emit(\"end\");\n      this.terminate();\n      this.logger.info(\"request complete!\");\n    });\n  }\n  /**\n   * Terminates a pending request.\n   */\n  terminate() {\n    var _a;\n    (_a = this.agent) == null ? void 0 : _a.destroy();\n  }\n};\nvar NodeClientRequest = _NodeClientRequest;\n/**\n * The list of internal Node.js errors to suppress while\n * using the \"mock\" response source.\n */\nNodeClientRequest.suppressErrorCodes = [\n  \"ENOTFOUND\",\n  \"ECONNREFUSED\",\n  \"ECONNRESET\",\n  \"EAI_AGAIN\",\n  \"ENETUNREACH\",\n  \"EHOSTUNREACH\"\n];\n\n// src/interceptors/ClientRequest/utils/normalizeClientRequestArgs.ts\n\n\n\n\n\n// src/utils/getRequestOptionsByUrl.ts\nfunction getRequestOptionsByUrl(url) {\n  const options = {\n    method: \"GET\",\n    protocol: url.protocol,\n    hostname: typeof url.hostname === \"string\" && url.hostname.startsWith(\"[\") ? url.hostname.slice(1, -1) : url.hostname,\n    host: url.host,\n    path: `${url.pathname}${url.search || \"\"}`\n  };\n  if (!!url.port) {\n    options.port = Number(url.port);\n  }\n  if (url.username || url.password) {\n    options.auth = `${url.username}:${url.password}`;\n  }\n  return options;\n}\n\n// src/utils/getUrlByRequestOptions.ts\n\n\nvar logger3 = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_8__.Logger(\"utils getUrlByRequestOptions\");\nvar DEFAULT_PATH = \"/\";\nvar DEFAULT_PROTOCOL = \"http:\";\nvar DEFAULT_HOST = \"localhost\";\nvar SSL_PORT = 443;\nfunction getAgent(options) {\n  return options.agent instanceof http__WEBPACK_IMPORTED_MODULE_4__.Agent ? options.agent : void 0;\n}\nfunction getProtocolByRequestOptions(options) {\n  var _a;\n  if (options.protocol) {\n    return options.protocol;\n  }\n  const agent = getAgent(options);\n  const agentProtocol = agent == null ? void 0 : agent.protocol;\n  if (agentProtocol) {\n    return agentProtocol;\n  }\n  const port = getPortByRequestOptions(options);\n  const isSecureRequest = options.cert || port === SSL_PORT;\n  return isSecureRequest ? \"https:\" : ((_a = options.uri) == null ? void 0 : _a.protocol) || DEFAULT_PROTOCOL;\n}\nfunction getPortByRequestOptions(options) {\n  if (options.port) {\n    return Number(options.port);\n  }\n  if (options.hostname != null) {\n    const [, extractedPort] = options.hostname.match(/:(\\d+)$/) || [];\n    if (extractedPort != null) {\n      return Number(extractedPort);\n    }\n  }\n  const agent = getAgent(options);\n  if (agent == null ? void 0 : agent.options.port) {\n    return Number(agent.options.port);\n  }\n  if (agent == null ? void 0 : agent.defaultPort) {\n    return Number(agent.defaultPort);\n  }\n  return void 0;\n}\nfunction getHostByRequestOptions(options) {\n  const { hostname, host } = options;\n  if (hostname != null) {\n    return hostname.replace(/:\\d+$/, \"\");\n  }\n  return host || DEFAULT_HOST;\n}\nfunction getAuthByRequestOptions(options) {\n  if (options.auth) {\n    const [username, password] = options.auth.split(\":\");\n    return { username, password };\n  }\n}\nfunction isRawIPv6Address(host) {\n  return host.includes(\":\") && !host.startsWith(\"[\") && !host.endsWith(\"]\");\n}\nfunction getHostname(host, port) {\n  const portString = typeof port !== \"undefined\" ? `:${port}` : \"\";\n  if (isRawIPv6Address(host)) {\n    return `[${host}]${portString}`;\n  }\n  if (typeof port === \"undefined\") {\n    return host;\n  }\n  return `${host}${portString}`;\n}\nfunction getUrlByRequestOptions(options) {\n  logger3.info(\"request options\", options);\n  if (options.uri) {\n    logger3.info(\n      'constructing url from explicitly provided \"options.uri\": %s',\n      options.uri\n    );\n    return new URL(options.uri.href);\n  }\n  logger3.info(\"figuring out url from request options...\");\n  const protocol = getProtocolByRequestOptions(options);\n  logger3.info(\"protocol\", protocol);\n  const host = getHostByRequestOptions(options);\n  logger3.info(\"host\", host);\n  const port = getPortByRequestOptions(options);\n  logger3.info(\"port\", port);\n  const hostname = getHostname(host, port);\n  logger3.info(\"hostname\", hostname);\n  const path = options.path || DEFAULT_PATH;\n  logger3.info(\"path\", path);\n  const credentials = getAuthByRequestOptions(options);\n  logger3.info(\"credentials\", credentials);\n  const authString = credentials ? `${credentials.username}:${credentials.password}@` : \"\";\n  logger3.info(\"auth string:\", authString);\n  const url = new URL(`${protocol}//${hostname}${path}`);\n  url.username = (credentials == null ? void 0 : credentials.username) || \"\";\n  url.password = (credentials == null ? void 0 : credentials.password) || \"\";\n  logger3.info(\"created url:\", url);\n  return url;\n}\n\n// src/utils/cloneObject.ts\n\nvar logger4 = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_8__.Logger(\"cloneObject\");\nfunction isPlainObject(obj) {\n  var _a;\n  logger4.info(\"is plain object?\", obj);\n  if (obj == null || !((_a = obj.constructor) == null ? void 0 : _a.name)) {\n    logger4.info(\"given object is undefined, not a plain object...\");\n    return false;\n  }\n  logger4.info(\"checking the object constructor:\", obj.constructor.name);\n  return obj.constructor.name === \"Object\";\n}\nfunction cloneObject(obj) {\n  logger4.info(\"cloning object:\", obj);\n  const enumerableProperties = Object.entries(obj).reduce(\n    (acc, [key, value]) => {\n      logger4.info(\"analyzing key-value pair:\", key, value);\n      acc[key] = isPlainObject(value) ? cloneObject(value) : value;\n      return acc;\n    },\n    {}\n  );\n  return isPlainObject(obj) ? enumerableProperties : Object.assign(Object.getPrototypeOf(obj), enumerableProperties);\n}\n\n// src/interceptors/ClientRequest/utils/normalizeClientRequestArgs.ts\nvar logger5 = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_8__.Logger(\"http normalizeClientRequestArgs\");\nfunction resolveRequestOptions(args, url) {\n  if (typeof args[1] === \"undefined\" || typeof args[1] === \"function\") {\n    logger5.info(\"request options not provided, deriving from the url\", url);\n    return getRequestOptionsByUrl(url);\n  }\n  if (args[1]) {\n    logger5.info(\"has custom RequestOptions!\", args[1]);\n    const requestOptionsFromUrl = getRequestOptionsByUrl(url);\n    logger5.info(\"derived RequestOptions from the URL:\", requestOptionsFromUrl);\n    logger5.info(\"cloning RequestOptions...\");\n    const clonedRequestOptions = cloneObject(args[1]);\n    logger5.info(\"successfully cloned RequestOptions!\", clonedRequestOptions);\n    return {\n      ...requestOptionsFromUrl,\n      ...clonedRequestOptions\n    };\n  }\n  logger5.info(\"using an empty object as request options\");\n  return {};\n}\nfunction overrideUrlByRequestOptions(url, options) {\n  url.host = options.host || url.host;\n  url.hostname = options.hostname || url.hostname;\n  url.port = options.port ? options.port.toString() : url.port;\n  if (options.path) {\n    const parsedOptionsPath = (0,url__WEBPACK_IMPORTED_MODULE_10__.parse)(options.path, false);\n    url.pathname = parsedOptionsPath.pathname || \"\";\n    url.search = parsedOptionsPath.search || \"\";\n  }\n  return url;\n}\nfunction resolveCallback(args) {\n  return typeof args[1] === \"function\" ? args[1] : args[2];\n}\nfunction normalizeClientRequestArgs(defaultProtocol, ...args) {\n  let url;\n  let options;\n  let callback;\n  logger5.info(\"arguments\", args);\n  logger5.info(\"using default protocol:\", defaultProtocol);\n  if (args.length === 0) {\n    const url2 = new URL(\"http://localhost\");\n    const options2 = resolveRequestOptions(args, url2);\n    return [url2, options2];\n  }\n  if (typeof args[0] === \"string\") {\n    logger5.info(\"first argument is a location string:\", args[0]);\n    url = new URL(args[0]);\n    logger5.info(\"created a url:\", url);\n    const requestOptionsFromUrl = getRequestOptionsByUrl(url);\n    logger5.info(\"request options from url:\", requestOptionsFromUrl);\n    options = resolveRequestOptions(args, url);\n    logger5.info(\"resolved request options:\", options);\n    callback = resolveCallback(args);\n  } else if (args[0] instanceof URL) {\n    url = args[0];\n    logger5.info(\"first argument is a URL:\", url);\n    if (typeof args[1] !== \"undefined\" && isObject(args[1])) {\n      url = overrideUrlByRequestOptions(url, args[1]);\n    }\n    options = resolveRequestOptions(args, url);\n    logger5.info(\"derived request options:\", options);\n    callback = resolveCallback(args);\n  } else if (\"hash\" in args[0] && !(\"method\" in args[0])) {\n    const [legacyUrl] = args;\n    logger5.info(\"first argument is a legacy URL:\", legacyUrl);\n    if (legacyUrl.hostname === null) {\n      logger5.info(\"given legacy URL is relative (no hostname)\");\n      return isObject(args[1]) ? normalizeClientRequestArgs(\n        defaultProtocol,\n        { path: legacyUrl.path, ...args[1] },\n        args[2]\n      ) : normalizeClientRequestArgs(\n        defaultProtocol,\n        { path: legacyUrl.path },\n        args[1]\n      );\n    }\n    logger5.info(\"given legacy url is absolute\");\n    const resolvedUrl = new URL(legacyUrl.href);\n    return args[1] === void 0 ? normalizeClientRequestArgs(defaultProtocol, resolvedUrl) : typeof args[1] === \"function\" ? normalizeClientRequestArgs(defaultProtocol, resolvedUrl, args[1]) : normalizeClientRequestArgs(\n      defaultProtocol,\n      resolvedUrl,\n      args[1],\n      args[2]\n    );\n  } else if (isObject(args[0])) {\n    options = args[0];\n    logger5.info(\"first argument is RequestOptions:\", options);\n    options.protocol = options.protocol || defaultProtocol;\n    logger5.info(\"normalized request options:\", options);\n    url = getUrlByRequestOptions(options);\n    logger5.info(\"created a URL from RequestOptions:\", url.href);\n    callback = resolveCallback(args);\n  } else {\n    throw new Error(\n      `Failed to construct ClientRequest with these parameters: ${args}`\n    );\n  }\n  options.protocol = options.protocol || url.protocol;\n  options.method = options.method || \"GET\";\n  if (typeof options.agent === \"undefined\") {\n    const agent = options.protocol === \"https:\" ? new https__WEBPACK_IMPORTED_MODULE_5__.Agent({\n      rejectUnauthorized: options.rejectUnauthorized\n    }) : new http__WEBPACK_IMPORTED_MODULE_4__.Agent();\n    options.agent = agent;\n    logger5.info(\"resolved fallback agent:\", agent);\n  }\n  if (!options._defaultAgent) {\n    logger5.info(\n      'has no default agent, setting the default agent for \"%s\"',\n      options.protocol\n    );\n    options._defaultAgent = options.protocol === \"https:\" ? https__WEBPACK_IMPORTED_MODULE_5__.globalAgent : http__WEBPACK_IMPORTED_MODULE_4__.globalAgent;\n  }\n  logger5.info(\"successfully resolved url:\", url.href);\n  logger5.info(\"successfully resolved options:\", options);\n  logger5.info(\"successfully resolved callback:\", callback);\n  return [url, options, callback];\n}\n\n// src/interceptors/ClientRequest/http.get.ts\nfunction get(protocol, options) {\n  return function interceptorsHttpGet(...args) {\n    const clientRequestArgs = normalizeClientRequestArgs(\n      `${protocol}:`,\n      ...args\n    );\n    const request2 = new NodeClientRequest(clientRequestArgs, options);\n    request2.end();\n    return request2;\n  };\n}\n\n// src/interceptors/ClientRequest/http.request.ts\n\nvar logger6 = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_8__.Logger(\"http request\");\nfunction request(protocol, options) {\n  return function interceptorsHttpRequest(...args) {\n    logger6.info('request call (protocol \"%s\"):', protocol, args);\n    const clientRequestArgs = normalizeClientRequestArgs(\n      `${protocol}:`,\n      ...args\n    );\n    return new NodeClientRequest(clientRequestArgs, options);\n  };\n}\n\n// src/interceptors/ClientRequest/index.ts\nvar _ClientRequestInterceptor = class extends _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_3__.Interceptor {\n  constructor() {\n    super(_ClientRequestInterceptor.interceptorSymbol);\n    this.modules = /* @__PURE__ */ new Map();\n    this.modules.set(\"http\", http__WEBPACK_IMPORTED_MODULE_4__);\n    this.modules.set(\"https\", https__WEBPACK_IMPORTED_MODULE_5__);\n  }\n  setup() {\n    const logger7 = this.logger.extend(\"setup\");\n    for (const [protocol, requestModule] of this.modules) {\n      const { request: pureRequest, get: pureGet } = requestModule;\n      this.subscriptions.push(() => {\n        requestModule.request = pureRequest;\n        requestModule.get = pureGet;\n        logger7.info('native \"%s\" module restored!', protocol);\n      });\n      const options = {\n        emitter: this.emitter,\n        logger: this.logger\n      };\n      requestModule.request = // Force a line break.\n      request(protocol, options);\n      requestModule.get = // Force a line break.\n      get(protocol, options);\n      logger7.info('native \"%s\" module patched!', protocol);\n    }\n  }\n};\nvar ClientRequestInterceptor = _ClientRequestInterceptor;\nClientRequestInterceptor.interceptorSymbol = Symbol(\"http\");\n\n\n//# sourceMappingURL=chunk-CCASONWB.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1DQ0FTT05XQi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBRThCO0FBR0E7QUFJQTtBQUtBOztBQUU5QjtBQUN3QjtBQUNFOztBQUUxQjtBQUMwRTtBQUNoQztBQUNxQjs7QUFFL0Q7QUFDNEM7QUFDNUMsaUJBQWlCLHNEQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3VEO0FBQ3ZELGtCQUFrQixzREFBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN1QztBQUNGO0FBQ3JDO0FBQ0E7QUFDQSxpQ0FBaUMsK0NBQVc7QUFDNUM7QUFDQSx3Q0FBd0MsaURBQWU7QUFDdkQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2QkFBNkIsMEVBQXFCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpQ0FBaUMsR0FBRyxpQ0FBaUM7QUFDekYsMENBQTBDLFdBQVc7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGFBQWE7QUFDckM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQSx1Q0FBdUMsK0NBQWE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdUJBQXVCLEVBQUUsU0FBUztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlEQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDJCQUEyQjtBQUM1RCx1QkFBdUIsaUJBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixvRUFBZTtBQUNyQztBQUNBLGdEQUFnRCwyQkFBMkI7QUFDM0U7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3Q0FBd0MsRUFBRSx5RUFBb0I7QUFDMUU7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsZ0ZBQStCO0FBQ3RELHdCQUF3QixnRkFBK0I7QUFDdkQ7QUFDQTtBQUNBLG9DQUFvQyw2QkFBNkI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUksd0RBQUs7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBUztBQUNyQjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlFQUFvQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHFDQUFxQztBQUN0RDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixhQUFhO0FBQ3ZDLHVCQUF1QjtBQUN2QixLQUFLO0FBQ0w7QUFDQSxZQUFZLG9DQUFvQztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx5RUFBZTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBSWM7QUFJQztBQUN5QjtBQUNlOztBQUV2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsYUFBYSxFQUFFLGlCQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGFBQWEsR0FBRyxhQUFhO0FBQ25EO0FBQ0E7QUFDQTs7QUFFQTtBQUM2QjtBQUMwQjtBQUN2RCxrQkFBa0Isc0RBQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx1Q0FBSztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxpQkFBaUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsS0FBSztBQUM1RDtBQUNBLGVBQWUsS0FBSyxHQUFHLFdBQVc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQUssRUFBRSxXQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUJBQXFCLEdBQUcscUJBQXFCO0FBQ25GO0FBQ0EseUJBQXlCLFNBQVMsSUFBSSxTQUFTLEVBQUUsS0FBSztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VEO0FBQ3ZELGtCQUFrQixzREFBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLHNEQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJDQUFRO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxrQ0FBa0M7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzQkFBc0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLGtFQUFrRSxLQUFLO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsd0NBQVU7QUFDaEU7QUFDQSxLQUFLLFFBQVEsdUNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCw4Q0FBZ0IsR0FBRyw2Q0FBZTtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFNBQVM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDdUQ7QUFDdkQsa0JBQWtCLHNEQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxTQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEMsNERBQVc7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlDQUFJO0FBQ2pDLDhCQUE4QixrQ0FBSztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMscUNBQXFDO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8tbG9naW4vLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1DQ0FTT05XQi5tanM/Yjc1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBpc1Jlc3BvbnNlV2l0aG91dEJvZHlcbn0gZnJvbSBcIi4vY2h1bmstSUJZQlRUWUsubWpzXCI7XG5pbXBvcnQge1xuICBpc1Byb3BlcnR5QWNjZXNzaWJsZVxufSBmcm9tIFwiLi9jaHVuay1ERVJUTEdMMy5tanNcIjtcbmltcG9ydCB7XG4gIGVtaXRBc3luYyxcbiAgdG9JbnRlcmFjdGl2ZVJlcXVlc3Rcbn0gZnJvbSBcIi4vY2h1bmstT1VXQlFGM1oubWpzXCI7XG5pbXBvcnQge1xuICBJTlRFUk5BTF9SRVFVRVNUX0lEX0hFQURFUl9OQU1FLFxuICBJbnRlcmNlcHRvcixcbiAgY3JlYXRlUmVxdWVzdElkXG59IGZyb20gXCIuL2NodW5rLVFFRDNRNloyLm1qc1wiO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL0NsaWVudFJlcXVlc3QvaW5kZXgudHNcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XG5pbXBvcnQgaHR0cHMgZnJvbSBcImh0dHBzXCI7XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC9Ob2RlQ2xpZW50UmVxdWVzdC50c1xuaW1wb3J0IHsgQ2xpZW50UmVxdWVzdCwgSW5jb21pbmdNZXNzYWdlIGFzIEluY29taW5nTWVzc2FnZTIgfSBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IHsgdW50aWwgfSBmcm9tIFwiQG9wZW4tZHJhZnQvdW50aWxcIjtcbmltcG9ydCB7IERlZmVycmVkUHJvbWlzZSB9IGZyb20gXCJAb3Blbi1kcmFmdC9kZWZlcnJlZC1wcm9taXNlXCI7XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC91dGlscy9ub3JtYWxpemVDbGllbnRSZXF1ZXN0RW5kQXJncy50c1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIkBvcGVuLWRyYWZ0L2xvZ2dlclwiO1xudmFyIGxvZ2dlciA9IG5ldyBMb2dnZXIoXCJ1dGlscyBnZXRVcmxCeVJlcXVlc3RPcHRpb25zXCIpO1xuZnVuY3Rpb24gbm9ybWFsaXplQ2xpZW50UmVxdWVzdEVuZEFyZ3MoLi4uYXJncykge1xuICBsb2dnZXIuaW5mbyhcImFyZ3VtZW50c1wiLCBhcmdzKTtcbiAgY29uc3Qgbm9ybWFsaXplZEFyZ3MgPSBuZXcgQXJyYXkoMykuZmlsbChudWxsKS5tYXAoKHZhbHVlLCBpbmRleCkgPT4gYXJnc1tpbmRleF0gfHwgdmFsdWUpO1xuICBub3JtYWxpemVkQXJncy5zb3J0KChhLCBiKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBhID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGEgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemVkQXJncy5pbmRleE9mKGEpIC0gbm9ybWFsaXplZEFyZ3MuaW5kZXhPZihiKTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH0pO1xuICBsb2dnZXIuaW5mbyhcIm5vcm1hbGl6ZWQgYXJnc1wiLCBub3JtYWxpemVkQXJncyk7XG4gIHJldHVybiBub3JtYWxpemVkQXJncztcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9DbGllbnRSZXF1ZXN0L3V0aWxzL25vcm1hbGl6ZUNsaWVudFJlcXVlc3RXcml0ZUFyZ3MudHNcbmltcG9ydCB7IExvZ2dlciBhcyBMb2dnZXIyIH0gZnJvbSBcIkBvcGVuLWRyYWZ0L2xvZ2dlclwiO1xudmFyIGxvZ2dlcjIgPSBuZXcgTG9nZ2VyMihcImh0dHAgbm9ybWFsaXplV3JpdGVBcmdzXCIpO1xuZnVuY3Rpb24gbm9ybWFsaXplQ2xpZW50UmVxdWVzdFdyaXRlQXJncyhhcmdzKSB7XG4gIGxvZ2dlcjIuaW5mbyhcIm5vcm1hbGl6aW5nIENsaWVudFJlcXVlc3Qud3JpdGUgYXJndW1lbnRzLi4uXCIsIGFyZ3MpO1xuICBjb25zdCBjaHVuayA9IGFyZ3NbMF07XG4gIGNvbnN0IGVuY29kaW5nID0gdHlwZW9mIGFyZ3NbMV0gPT09IFwic3RyaW5nXCIgPyBhcmdzWzFdIDogdm9pZCAwO1xuICBjb25zdCBjYWxsYmFjayA9IHR5cGVvZiBhcmdzWzFdID09PSBcImZ1bmN0aW9uXCIgPyBhcmdzWzFdIDogYXJnc1syXTtcbiAgY29uc3Qgd3JpdGVBcmdzID0gW1xuICAgIGNodW5rLFxuICAgIGVuY29kaW5nLFxuICAgIGNhbGxiYWNrXG4gIF07XG4gIGxvZ2dlcjIuaW5mbyhcbiAgICBcInN1Y2Nlc3NmdWxseSBub3JtYWxpemVkIENsaWVudFJlcXVlc3Qud3JpdGUgYXJndW1lbnRzOlwiLFxuICAgIHdyaXRlQXJnc1xuICApO1xuICByZXR1cm4gd3JpdGVBcmdzO1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL0NsaWVudFJlcXVlc3QvdXRpbHMvY2xvbmVJbmNvbWluZ01lc3NhZ2UudHNcbmltcG9ydCB7IEluY29taW5nTWVzc2FnZSB9IGZyb20gXCJodHRwXCI7XG5pbXBvcnQgeyBQYXNzVGhyb3VnaCB9IGZyb20gXCJzdHJlYW1cIjtcbnZhciBJU19DTE9ORSA9IFN5bWJvbChcImlzQ2xvbmVcIik7XG5mdW5jdGlvbiBjbG9uZUluY29taW5nTWVzc2FnZShtZXNzYWdlKSB7XG4gIGNvbnN0IGNsb25lID0gbWVzc2FnZS5waXBlKG5ldyBQYXNzVGhyb3VnaCgpKTtcbiAgaW5oZXJpdFByb3BlcnRpZXMobWVzc2FnZSwgY2xvbmUpO1xuICBjb25zdCBjbG9uZWRQcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEluY29taW5nTWVzc2FnZS5wcm90b3R5cGUpO1xuICBnZXRQcm90b3R5cGVzKGNsb25lKS5mb3JFYWNoKChwcm90b3R5cGUpID0+IHtcbiAgICBpbmhlcml0UHJvcGVydGllcyhwcm90b3R5cGUsIGNsb25lZFByb3RvdHlwZSk7XG4gIH0pO1xuICBPYmplY3Quc2V0UHJvdG90eXBlT2YoY2xvbmUsIGNsb25lZFByb3RvdHlwZSk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbG9uZSwgSVNfQ0xPTkUsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiB0cnVlXG4gIH0pO1xuICByZXR1cm4gY2xvbmU7XG59XG5mdW5jdGlvbiBnZXRQcm90b3R5cGVzKHNvdXJjZSkge1xuICBjb25zdCBwcm90b3R5cGVzID0gW107XG4gIGxldCBjdXJyZW50ID0gc291cmNlO1xuICB3aGlsZSAoY3VycmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjdXJyZW50KSkge1xuICAgIHByb3RvdHlwZXMucHVzaChjdXJyZW50KTtcbiAgfVxuICByZXR1cm4gcHJvdG90eXBlcztcbn1cbmZ1bmN0aW9uIGluaGVyaXRQcm9wZXJ0aWVzKHNvdXJjZSwgdGFyZ2V0KSB7XG4gIGNvbnN0IHByb3BlcnRpZXMgPSBbXG4gICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc291cmNlKSxcbiAgICAuLi5PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSlcbiAgXTtcbiAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiBwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKHRhcmdldC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHByb3BlcnR5KTtcbiAgICBpZiAoIWRlc2NyaXB0b3IpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9DbGllbnRSZXF1ZXN0L3V0aWxzL2NyZWF0ZVJlc3BvbnNlLnRzXG5mdW5jdGlvbiBjcmVhdGVSZXNwb25zZShtZXNzYWdlKSB7XG4gIGNvbnN0IHJlc3BvbnNlQm9keU9yTnVsbCA9IGlzUmVzcG9uc2VXaXRob3V0Qm9keShtZXNzYWdlLnN0YXR1c0NvZGUgfHwgMjAwKSA/IG51bGwgOiBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgIG1lc3NhZ2Uub24oXCJkYXRhXCIsIChjaHVuaykgPT4gY29udHJvbGxlci5lbnF1ZXVlKGNodW5rKSk7XG4gICAgICBtZXNzYWdlLm9uKFwiZW5kXCIsICgpID0+IGNvbnRyb2xsZXIuY2xvc2UoKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG5ldyBSZXNwb25zZShyZXNwb25zZUJvZHlPck51bGwsIHtcbiAgICBzdGF0dXM6IG1lc3NhZ2Uuc3RhdHVzQ29kZSxcbiAgICBzdGF0dXNUZXh0OiBtZXNzYWdlLnN0YXR1c01lc3NhZ2UsXG4gICAgaGVhZGVyczogY3JlYXRlSGVhZGVyc0Zyb21JbmNvbWluZ0h0dHBIZWFkZXJzKG1lc3NhZ2UuaGVhZGVycylcbiAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVIZWFkZXJzRnJvbUluY29taW5nSHR0cEhlYWRlcnMoaHR0cEhlYWRlcnMpIHtcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gIGZvciAoY29uc3QgaGVhZGVyTmFtZSBpbiBodHRwSGVhZGVycykge1xuICAgIGNvbnN0IGhlYWRlclZhbHVlcyA9IGh0dHBIZWFkZXJzW2hlYWRlck5hbWVdO1xuICAgIGlmICh0eXBlb2YgaGVhZGVyVmFsdWVzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVyVmFsdWVzKSkge1xuICAgICAgaGVhZGVyVmFsdWVzLmZvckVhY2goKGhlYWRlclZhbHVlKSA9PiB7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKGhlYWRlck5hbWUsIGhlYWRlclZhbHVlKTtcbiAgICAgIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGhlYWRlcnMuc2V0KGhlYWRlck5hbWUsIGhlYWRlclZhbHVlcyk7XG4gIH1cbiAgcmV0dXJuIGhlYWRlcnM7XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC91dGlscy9jcmVhdGVSZXF1ZXN0LnRzXG5mdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KGNsaWVudFJlcXVlc3QpIHtcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gIGNvbnN0IG91dGdvaW5nSGVhZGVycyA9IGNsaWVudFJlcXVlc3QuZ2V0SGVhZGVycygpO1xuICBmb3IgKGNvbnN0IGhlYWRlck5hbWUgaW4gb3V0Z29pbmdIZWFkZXJzKSB7XG4gICAgY29uc3QgaGVhZGVyVmFsdWUgPSBvdXRnb2luZ0hlYWRlcnNbaGVhZGVyTmFtZV07XG4gICAgaWYgKHR5cGVvZiBoZWFkZXJWYWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlc0xpc3QgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0KFtdLCBoZWFkZXJWYWx1ZSk7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXNMaXN0KSB7XG4gICAgICBoZWFkZXJzLmFwcGVuZChoZWFkZXJOYW1lLCB2YWx1ZS50b1N0cmluZygpKTtcbiAgICB9XG4gIH1cbiAgaWYgKGNsaWVudFJlcXVlc3QudXJsLnVzZXJuYW1lIHx8IGNsaWVudFJlcXVlc3QudXJsLnBhc3N3b3JkKSB7XG4gICAgY29uc3QgYXV0aCA9IGAke2NsaWVudFJlcXVlc3QudXJsLnVzZXJuYW1lIHx8IFwiXCJ9OiR7Y2xpZW50UmVxdWVzdC51cmwucGFzc3dvcmQgfHwgXCJcIn1gO1xuICAgIGhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBgQmFzaWMgJHtidG9hKGF1dGgpfWApO1xuICAgIGNsaWVudFJlcXVlc3QudXJsLnVzZXJuYW1lID0gXCJcIjtcbiAgICBjbGllbnRSZXF1ZXN0LnVybC5wYXNzd29yZCA9IFwiXCI7XG4gIH1cbiAgY29uc3QgbWV0aG9kID0gY2xpZW50UmVxdWVzdC5tZXRob2QgfHwgXCJHRVRcIjtcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KGNsaWVudFJlcXVlc3QudXJsLCB7XG4gICAgbWV0aG9kLFxuICAgIGhlYWRlcnMsXG4gICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICBib2R5OiBtZXRob2QgPT09IFwiSEVBRFwiIHx8IG1ldGhvZCA9PT0gXCJHRVRcIiA/IG51bGwgOiBjbGllbnRSZXF1ZXN0LnJlcXVlc3RCdWZmZXJcbiAgfSk7XG59XG5cbi8vIHNyYy91dGlscy9nZXRWYWx1ZUJ5U3ltYm9sLnRzXG5mdW5jdGlvbiBnZXRWYWx1ZUJ5U3ltYm9sKHN5bWJvbE5hbWUsIHNvdXJjZSkge1xuICBjb25zdCBvd25TeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpO1xuICBjb25zdCBzeW1ib2wgPSBvd25TeW1ib2xzLmZpbmQoKHN5bWJvbDIpID0+IHtcbiAgICByZXR1cm4gc3ltYm9sMi5kZXNjcmlwdGlvbiA9PT0gc3ltYm9sTmFtZTtcbiAgfSk7XG4gIGlmIChzeW1ib2wpIHtcbiAgICByZXR1cm4gUmVmbGVjdC5nZXQoc291cmNlLCBzeW1ib2wpO1xuICB9XG4gIHJldHVybjtcbn1cblxuLy8gc3JjL3V0aWxzL2lzT2JqZWN0LnRzXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbn1cblxuLy8gc3JjL3V0aWxzL2dldFJhd0ZldGNoSGVhZGVycy50c1xuZnVuY3Rpb24gZ2V0UmF3RmV0Y2hIZWFkZXJzKGhlYWRlcnMpIHtcbiAgY29uc3QgaGVhZGVyc0xpc3QgPSBnZXRWYWx1ZUJ5U3ltYm9sKFwiaGVhZGVycyBsaXN0XCIsIGhlYWRlcnMpO1xuICBpZiAoIWhlYWRlcnNMaXN0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGhlYWRlcnNNYXAgPSBnZXRWYWx1ZUJ5U3ltYm9sKFwiaGVhZGVycyBtYXBcIiwgaGVhZGVyc0xpc3QpO1xuICBpZiAoIWhlYWRlcnNNYXAgfHwgIWlzSGVhZGVyc01hcFdpdGhSYXdIZWFkZXJOYW1lcyhoZWFkZXJzTWFwKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCByYXdIZWFkZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgaGVhZGVyc01hcC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlIH0pID0+IHtcbiAgICByYXdIZWFkZXJzLnNldChuYW1lLCB2YWx1ZSk7XG4gIH0pO1xuICByZXR1cm4gcmF3SGVhZGVycztcbn1cbmZ1bmN0aW9uIGlzSGVhZGVyc01hcFdpdGhSYXdIZWFkZXJOYW1lcyhoZWFkZXJzTWFwKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKFxuICAgIGhlYWRlcnNNYXAudmFsdWVzKClcbiAgKS5ldmVyeSgodmFsdWUpID0+IHtcbiAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIFwibmFtZVwiIGluIHZhbHVlO1xuICB9KTtcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9DbGllbnRSZXF1ZXN0L05vZGVDbGllbnRSZXF1ZXN0LnRzXG52YXIgX05vZGVDbGllbnRSZXF1ZXN0ID0gY2xhc3MgZXh0ZW5kcyBDbGllbnRSZXF1ZXN0IHtcbiAgY29uc3RydWN0b3IoW3VybCwgcmVxdWVzdE9wdGlvbnMsIGNhbGxiYWNrXSwgb3B0aW9ucykge1xuICAgIHN1cGVyKHJlcXVlc3RPcHRpb25zLCBjYWxsYmFjayk7XG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgICB0aGlzLmxvZ2dlciA9IG9wdGlvbnMubG9nZ2VyLmV4dGVuZChcbiAgICAgIGByZXF1ZXN0ICR7cmVxdWVzdE9wdGlvbnMubWV0aG9kfSAke3VybC5ocmVmfWBcbiAgICApO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJjb25zdHJ1Y3RpbmcgQ2xpZW50UmVxdWVzdCB1c2luZyBvcHRpb25zOlwiLCB7XG4gICAgICB1cmwsXG4gICAgICByZXF1ZXN0T3B0aW9ucyxcbiAgICAgIGNhbGxiYWNrXG4gICAgfSk7XG4gICAgdGhpcy5zdGF0ZSA9IDAgLyogSWRsZSAqLztcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLmVtaXR0ZXIgPSBvcHRpb25zLmVtaXR0ZXI7XG4gICAgdGhpcy5yZXF1ZXN0QnVmZmVyID0gbnVsbDtcbiAgICB0aGlzLnJlc3BvbnNlID0gbmV3IEluY29taW5nTWVzc2FnZTIodGhpcy5zb2NrZXQpO1xuICB9XG4gIHdyaXRlUmVxdWVzdEJvZHlDaHVuayhjaHVuaywgZW5jb2RpbmcpIHtcbiAgICBpZiAoY2h1bmsgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5yZXF1ZXN0QnVmZmVyID09IG51bGwpIHtcbiAgICAgIHRoaXMucmVxdWVzdEJ1ZmZlciA9IEJ1ZmZlci5mcm9tKFtdKTtcbiAgICB9XG4gICAgY29uc3QgcmVzb2x2ZWRDaHVuayA9IEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykgPyBjaHVuayA6IEJ1ZmZlci5mcm9tKGNodW5rLCBlbmNvZGluZyk7XG4gICAgdGhpcy5yZXF1ZXN0QnVmZmVyID0gQnVmZmVyLmNvbmNhdChbdGhpcy5yZXF1ZXN0QnVmZmVyLCByZXNvbHZlZENodW5rXSk7XG4gIH1cbiAgd3JpdGUoLi4uYXJncykge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBbY2h1bmssIGVuY29kaW5nLCBjYWxsYmFja10gPSBub3JtYWxpemVDbGllbnRSZXF1ZXN0V3JpdGVBcmdzKGFyZ3MpO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJ3cml0ZTpcIiwgeyBjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrIH0pO1xuICAgIHRoaXMuY2h1bmtzLnB1c2goeyBjaHVuaywgZW5jb2RpbmcgfSk7XG4gICAgdGhpcy53cml0ZVJlcXVlc3RCb2R5Q2h1bmsoY2h1bmssIGVuY29kaW5nKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgXCJjaHVuayBzdWNjZXNzZnVsbHkgc3RvcmVkIVwiLFxuICAgICAgKF9hID0gdGhpcy5yZXF1ZXN0QnVmZmVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EuYnl0ZUxlbmd0aFxuICAgICk7XG4gICAgaWYgKCFjaHVuayB8fCBjaHVuay5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJ3cml0dGVuIGNodW5rIGlzIGVtcHR5LCBza2lwcGluZyBjYWxsYmFjay4uLlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGVuZCguLi5hcmdzKSB7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcImVuZFwiLCBhcmdzKTtcbiAgICBjb25zdCByZXF1ZXN0SWQgPSBjcmVhdGVSZXF1ZXN0SWQoKTtcbiAgICBjb25zdCBbY2h1bmssIGVuY29kaW5nLCBjYWxsYmFja10gPSBub3JtYWxpemVDbGllbnRSZXF1ZXN0RW5kQXJncyguLi5hcmdzKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwibm9ybWFsaXplZCBhcmd1bWVudHM6XCIsIHsgY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjayB9KTtcbiAgICB0aGlzLndyaXRlUmVxdWVzdEJvZHlDaHVuayhjaHVuaywgZW5jb2RpbmcgfHwgdm9pZCAwKTtcbiAgICB0aGlzLnN0YXRlID0gMiAvKiBTZW50ICovO1xuICAgIGNvbnN0IGNhcHR1cmVkUmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3QodGhpcyk7XG4gICAgY29uc3QgeyBpbnRlcmFjdGl2ZVJlcXVlc3QsIHJlcXVlc3RDb250cm9sbGVyIH0gPSB0b0ludGVyYWN0aXZlUmVxdWVzdChjYXB0dXJlZFJlcXVlc3QpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYXB0dXJlZFJlcXVlc3QsIFwicmVzcG9uZFdpdGhcIiwge1xuICAgICAgdmFsdWU6IHJlcXVlc3RDb250cm9sbGVyLnJlc3BvbmRXaXRoLmJpbmQocmVxdWVzdENvbnRyb2xsZXIpXG4gICAgfSk7XG4gICAgaWYgKHRoaXMuaGFzSGVhZGVyKElOVEVSTkFMX1JFUVVFU1RfSURfSEVBREVSX05BTUUpKSB7XG4gICAgICB0aGlzLnJlbW92ZUhlYWRlcihJTlRFUk5BTF9SRVFVRVNUX0lEX0hFQURFUl9OQU1FKTtcbiAgICAgIHJldHVybiB0aGlzLnBhc3N0aHJvdWdoKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spO1xuICAgIH1cbiAgICB0aGlzLmVtaXR0ZXIub25jZShcInJlcXVlc3RcIiwgKHsgcmVxdWVzdElkOiBwZW5kaW5nUmVxdWVzdElkIH0pID0+IHtcbiAgICAgIGlmIChwZW5kaW5nUmVxdWVzdElkICE9PSByZXF1ZXN0SWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHJlcXVlc3RDb250cm9sbGVyLnJlc3BvbnNlUHJvbWlzZS5zdGF0ZSA9PT0gXCJwZW5kaW5nXCIpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICBcInJlcXVlc3QgaGFzIG5vdCBiZWVuIGhhbmRsZWQgaW4gbGlzdGVuZXJzLCBleGVjdXRpbmcgZmFpbC1zYWZlIGxpc3RlbmVyLi4uXCJcbiAgICAgICAgKTtcbiAgICAgICAgcmVxdWVzdENvbnRyb2xsZXIucmVzcG9uc2VQcm9taXNlLnJlc29sdmUodm9pZCAwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB1bnRpbChhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAnZW1pdHRpbmcgdGhlIFwicmVxdWVzdFwiIGV2ZW50IGZvciAlZCBsaXN0ZW5lcihzKS4uLicsXG4gICAgICAgIHRoaXMuZW1pdHRlci5saXN0ZW5lckNvdW50KFwicmVxdWVzdFwiKVxuICAgICAgKTtcbiAgICAgIHRoaXMuc3RhdGUgPSAzIC8qIE1vY2tMb29rdXBTdGFydCAqLztcbiAgICAgIGF3YWl0IGVtaXRBc3luYyh0aGlzLmVtaXR0ZXIsIFwicmVxdWVzdFwiLCB7XG4gICAgICAgIHJlcXVlc3Q6IGludGVyYWN0aXZlUmVxdWVzdCxcbiAgICAgICAgcmVxdWVzdElkXG4gICAgICB9KTtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oJ2FsbCBcInJlcXVlc3RcIiBsaXN0ZW5lcnMgZG9uZSEnKTtcbiAgICAgIGNvbnN0IG1vY2tlZFJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdENvbnRyb2xsZXIucmVzcG9uc2VQcm9taXNlO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImV2ZW50LnJlc3BvbmRXaXRoIGNhbGxlZCB3aXRoOlwiLCBtb2NrZWRSZXNwb25zZSk7XG4gICAgICByZXR1cm4gbW9ja2VkUmVzcG9uc2U7XG4gICAgfSkudGhlbigocmVzb2x2ZXJSZXN1bHQpID0+IHtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJ0aGUgbGlzdGVuZXJzIHByb21pc2UgYXdhaXRlZCFcIik7XG4gICAgICB0aGlzLnN0YXRlID0gNCAvKiBNb2NrTG9va3VwRW5kICovO1xuICAgICAgaWYgKCF0aGlzLmhlYWRlcnNTZW50KSB7XG4gICAgICAgIGZvciAoY29uc3QgW2hlYWRlck5hbWUsIGhlYWRlclZhbHVlXSBvZiBjYXB0dXJlZFJlcXVlc3QuaGVhZGVycykge1xuICAgICAgICAgIHRoaXMuc2V0SGVhZGVyKGhlYWRlck5hbWUsIGhlYWRlclZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHJlc29sdmVyUmVzdWx0LmVycm9yKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgXCJlbmNvdW50ZXJlZCByZXNvbHZlciBleGNlcHRpb24sIGFib3J0aW5nIHJlcXVlc3QuLi5cIixcbiAgICAgICAgICByZXNvbHZlclJlc3VsdC5lcnJvclxuICAgICAgICApO1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIHJlc29sdmVyUmVzdWx0LmVycm9yKTtcbiAgICAgICAgdGhpcy50ZXJtaW5hdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBjb25zdCBtb2NrZWRSZXNwb25zZSA9IHJlc29sdmVyUmVzdWx0LmRhdGE7XG4gICAgICBpZiAobW9ja2VkUmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICBcInJlY2VpdmVkIG1vY2tlZCByZXNwb25zZTpcIixcbiAgICAgICAgICBtb2NrZWRSZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgbW9ja2VkUmVzcG9uc2Uuc3RhdHVzVGV4dFxuICAgICAgICApO1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5vdGUgU29tZSBlbnZpcm9ubWVudHMsIGxpa2UgTWluaWZsYXJlIChDbG91ZGZsYXJlKSBkbyBub3RcbiAgICAgICAgICAgKiBpbXBsZW1lbnQgdGhlIFwiUmVzcG9uc2UudHlwZVwiIHByb3BlcnR5IGFuZCB0aHJvdyBvbiBpdHMgYWNjZXNzLlxuICAgICAgICAgICAqIFNhZmVseSBjaGVjayBpZiB3ZSBjYW4gYWNjZXNzIFwidHlwZVwiIG9uIFwiUmVzcG9uc2VcIiBiZWZvcmUgY29udGludWluZy5cbiAgICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tc3dqcy9tc3cvaXNzdWVzLzE4MzRcbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpc1Byb3BlcnR5QWNjZXNzaWJsZShtb2NrZWRSZXNwb25zZSwgXCJ0eXBlXCIpICYmIG1vY2tlZFJlc3BvbnNlLnR5cGUgPT09IFwiZXJyb3JcIlxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgXCJyZWNlaXZlZCBuZXR3b3JrIGVycm9yIHJlc3BvbnNlLCBhYm9ydGluZyByZXF1ZXN0Li4uXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIG5ldyBUeXBlRXJyb3IoXCJOZXR3b3JrIGVycm9yXCIpKTtcbiAgICAgICAgICB0aGlzLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlQ2xvbmUgPSBtb2NrZWRSZXNwb25zZS5jbG9uZSgpO1xuICAgICAgICB0aGlzLnJlc3BvbmRXaXRoKG1vY2tlZFJlc3BvbnNlKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICBtb2NrZWRSZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgbW9ja2VkUmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICBcIihNT0NLRUQpXCJcbiAgICAgICAgKTtcbiAgICAgICAgY2FsbGJhY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oJ2VtaXR0aW5nIHRoZSBjdXN0b20gXCJyZXNwb25zZVwiIGV2ZW50Li4uJyk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5lbWl0KFwicmVzcG9uc2VcIiwge1xuICAgICAgICAgIHJlc3BvbnNlOiByZXNwb25zZUNsb25lLFxuICAgICAgICAgIGlzTW9ja2VkUmVzcG9uc2U6IHRydWUsXG4gICAgICAgICAgcmVxdWVzdDogY2FwdHVyZWRSZXF1ZXN0LFxuICAgICAgICAgIHJlcXVlc3RJZFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlcXVlc3QgKG1vY2spIGlzIGNvbXBsZXRlZFwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFwibm8gbW9ja2VkIHJlc3BvbnNlIHJlY2VpdmVkIVwiKTtcbiAgICAgIHRoaXMub25jZShcInJlc3BvbnNlLWludGVybmFsXCIsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8obWVzc2FnZS5zdGF0dXNDb2RlLCBtZXNzYWdlLnN0YXR1c01lc3NhZ2UpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwib3JpZ2luYWwgcmVzcG9uc2UgaGVhZGVyczpcIiwgbWVzc2FnZS5oZWFkZXJzKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbygnZW1pdHRpbmcgdGhlIGN1c3RvbSBcInJlc3BvbnNlXCIgZXZlbnQuLi4nKTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoXCJyZXNwb25zZVwiLCB7XG4gICAgICAgICAgcmVzcG9uc2U6IGNyZWF0ZVJlc3BvbnNlKG1lc3NhZ2UpLFxuICAgICAgICAgIGlzTW9ja2VkUmVzcG9uc2U6IGZhbHNlLFxuICAgICAgICAgIHJlcXVlc3Q6IGNhcHR1cmVkUmVxdWVzdCxcbiAgICAgICAgICByZXF1ZXN0SWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzLnBhc3N0aHJvdWdoKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGVtaXQoZXZlbnQsIC4uLmRhdGEpIHtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwiZW1pdDogJXNcIiwgZXZlbnQpO1xuICAgIGlmIChldmVudCA9PT0gXCJyZXNwb25zZVwiKSB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKCdmb3VuZCBcInJlc3BvbnNlXCIgZXZlbnQsIGNsb25pbmcgdGhlIHJlc3BvbnNlLi4uJyk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGRhdGFbMF07XG4gICAgICAgIGNvbnN0IGZpcnN0Q2xvbmUgPSBjbG9uZUluY29taW5nTWVzc2FnZShyZXNwb25zZSk7XG4gICAgICAgIGNvbnN0IHNlY29uZENsb25lID0gY2xvbmVJbmNvbWluZ01lc3NhZ2UocmVzcG9uc2UpO1xuICAgICAgICB0aGlzLmVtaXQoXCJyZXNwb25zZS1pbnRlcm5hbFwiLCBzZWNvbmRDbG9uZSk7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgJ3Jlc3BvbnNlIHN1Y2Nlc3NmdWxseSBjbG9uZWQsIGVtaXR0aW5nIFwicmVzcG9uc2VcIiBldmVudC4uLidcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmVtaXQoZXZlbnQsIGZpcnN0Q2xvbmUsIC4uLmRhdGEuc2xpY2UoMSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImVycm9yIHdoZW4gY2xvbmluZyByZXNwb25zZTpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gc3VwZXIuZW1pdChldmVudCwgLi4uZGF0YSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChldmVudCA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBjb25zdCBlcnJvciA9IGRhdGFbMF07XG4gICAgICBjb25zdCBlcnJvckNvZGUgPSBlcnJvci5jb2RlIHx8IFwiXCI7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiZXJyb3I6XFxuXCIsIGVycm9yKTtcbiAgICAgIGlmIChfTm9kZUNsaWVudFJlcXVlc3Quc3VwcHJlc3NFcnJvckNvZGVzLmluY2x1ZGVzKGVycm9yQ29kZSkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPCA0IC8qIE1vY2tMb29rdXBFbmQgKi8pIHtcbiAgICAgICAgICBpZiAoIXRoaXMuY2FwdHVyZWRFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiY2FwdHVyZWQgdGhlIGZpcnN0IGVycm9yOlwiLCB0aGlzLmNhcHR1cmVkRXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IDUgLyogUmVzcG9uc2VSZWNlaXZlZCAqLyAmJiB0aGlzLnJlc3BvbnNlVHlwZSA9PT0gXCJtb2NrXCIpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLmVtaXQoZXZlbnQsIC4uLmRhdGEpO1xuICB9XG4gIC8qKlxuICAgKiBQZXJmb3JtcyB0aGUgaW50ZXJjZXB0ZWQgcmVxdWVzdCBhcy1pcy5cbiAgICogUmVwbGF5cyB0aGUgY2FwdHVyZWQgcmVxdWVzdCBib2R5IGNodW5rcyxcbiAgICogc3RpbGwgZW1pdHMgdGhlIGludGVybmFsIGV2ZW50cywgYW5kIHdyYXBzXG4gICAqIHVwIHRoZSByZXF1ZXN0IHdpdGggYHN1cGVyLmVuZCgpYC5cbiAgICovXG4gIHBhc3N0aHJvdWdoKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spIHtcbiAgICB0aGlzLnN0YXRlID0gNSAvKiBSZXNwb25zZVJlY2VpdmVkICovO1xuICAgIHRoaXMucmVzcG9uc2VUeXBlID0gXCJwYXNzdGhyb3VnaFwiO1xuICAgIGlmICh0aGlzLmNhcHR1cmVkRXJyb3IpIHtcbiAgICAgIHRoaXMuZW1pdChcImVycm9yXCIsIHRoaXMuY2FwdHVyZWRFcnJvcik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcIndyaXRpbmcgcmVxdWVzdCBjaHVua3MuLi5cIiwgdGhpcy5jaHVua3MpO1xuICAgIGZvciAoY29uc3QgeyBjaHVuazogY2h1bmsyLCBlbmNvZGluZzogZW5jb2RpbmcyIH0gb2YgdGhpcy5jaHVua3MpIHtcbiAgICAgIGlmIChlbmNvZGluZzIpIHtcbiAgICAgICAgc3VwZXIud3JpdGUoY2h1bmsyLCBlbmNvZGluZzIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VwZXIud3JpdGUoY2h1bmsyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5vbmNlKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFwib3JpZ2luYWwgcmVxdWVzdCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIH0pO1xuICAgIHRoaXMub25jZShcImFib3J0XCIsICgpID0+IHtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJvcmlnaW5hbCByZXF1ZXN0IGFib3J0ZWQhXCIpO1xuICAgIH0pO1xuICAgIHRoaXMub25jZShcInJlc3BvbnNlLWludGVybmFsXCIsIChtZXNzYWdlKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKG1lc3NhZ2Uuc3RhdHVzQ29kZSwgbWVzc2FnZS5zdGF0dXNNZXNzYWdlKTtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJvcmlnaW5hbCByZXNwb25zZSBoZWFkZXJzOlwiLCBtZXNzYWdlLmhlYWRlcnMpO1xuICAgIH0pO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJwZXJmb3JtaW5nIG9yaWdpbmFsIHJlcXVlc3QuLi5cIik7XG4gICAgcmV0dXJuIHN1cGVyLmVuZCguLi5bY2h1bmssIGVuY29kaW5nLCBjYWxsYmFja10uZmlsdGVyKEJvb2xlYW4pKTtcbiAgfVxuICAvKipcbiAgICogUmVzcG9uZHMgdG8gdGhpcyByZXF1ZXN0IGluc3RhbmNlIHVzaW5nIGEgbW9ja2VkIHJlc3BvbnNlLlxuICAgKi9cbiAgcmVzcG9uZFdpdGgobW9ja2VkUmVzcG9uc2UpIHtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVzcG9uZGluZyB3aXRoIGEgbW9ja2VkIHJlc3BvbnNlLi4uXCIsIG1vY2tlZFJlc3BvbnNlKTtcbiAgICB0aGlzLnN0YXRlID0gNSAvKiBSZXNwb25zZVJlY2VpdmVkICovO1xuICAgIHRoaXMucmVzcG9uc2VUeXBlID0gXCJtb2NrXCI7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgd3JpdGFibGVGaW5pc2hlZDogeyB2YWx1ZTogdHJ1ZSB9LFxuICAgICAgd3JpdGFibGVFbmRlZDogeyB2YWx1ZTogdHJ1ZSB9XG4gICAgfSk7XG4gICAgdGhpcy5lbWl0KFwiZmluaXNoXCIpO1xuICAgIGNvbnN0IHsgc3RhdHVzLCBzdGF0dXNUZXh0LCBoZWFkZXJzLCBib2R5IH0gPSBtb2NrZWRSZXNwb25zZTtcbiAgICB0aGlzLnJlc3BvbnNlLnN0YXR1c0NvZGUgPSBzdGF0dXM7XG4gICAgdGhpcy5yZXNwb25zZS5zdGF0dXNNZXNzYWdlID0gc3RhdHVzVGV4dDtcbiAgICBjb25zdCByYXdIZWFkZXJzID0gZ2V0UmF3RmV0Y2hIZWFkZXJzKGhlYWRlcnMpIHx8IGhlYWRlcnM7XG4gICAgaWYgKHJhd0hlYWRlcnMpIHtcbiAgICAgIHRoaXMucmVzcG9uc2UuaGVhZGVycyA9IHt9O1xuICAgICAgcmF3SGVhZGVycy5mb3JFYWNoKChoZWFkZXJWYWx1ZSwgaGVhZGVyTmFtZSkgPT4ge1xuICAgICAgICB0aGlzLnJlc3BvbnNlLnJhd0hlYWRlcnMucHVzaChoZWFkZXJOYW1lLCBoZWFkZXJWYWx1ZSk7XG4gICAgICAgIGNvbnN0IGluc2Vuc2l0aXZlSGVhZGVyTmFtZSA9IGhlYWRlck5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgcHJldkhlYWRlcnMgPSB0aGlzLnJlc3BvbnNlLmhlYWRlcnNbaW5zZW5zaXRpdmVIZWFkZXJOYW1lXTtcbiAgICAgICAgdGhpcy5yZXNwb25zZS5oZWFkZXJzW2luc2Vuc2l0aXZlSGVhZGVyTmFtZV0gPSBwcmV2SGVhZGVycyA/IEFycmF5LnByb3RvdHlwZS5jb25jYXQoW10sIHByZXZIZWFkZXJzLCBoZWFkZXJWYWx1ZSkgOiBoZWFkZXJWYWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwibW9ja2VkIHJlc3BvbnNlIGhlYWRlcnMgcmVhZHk6XCIsIGhlYWRlcnMpO1xuICAgIHRoaXMucmVzID0gdGhpcy5yZXNwb25zZTtcbiAgICB0aGlzLmVtaXQoXCJyZXNwb25zZVwiLCB0aGlzLnJlc3BvbnNlKTtcbiAgICBjb25zdCBpc1Jlc3BvbnNlU3RyZWFtRmluaXNoZWQgPSBuZXcgRGVmZXJyZWRQcm9taXNlKCk7XG4gICAgY29uc3QgZmluaXNoUmVzcG9uc2VTdHJlYW0gPSAoKSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiZmluaXNoZWQgcmVzcG9uc2Ugc3RyZWFtIVwiKTtcbiAgICAgIHRoaXMucmVzcG9uc2UucHVzaChudWxsKTtcbiAgICAgIHRoaXMucmVzcG9uc2UuY29tcGxldGUgPSB0cnVlO1xuICAgICAgaXNSZXNwb25zZVN0cmVhbUZpbmlzaGVkLnJlc29sdmUoKTtcbiAgICB9O1xuICAgIGlmIChib2R5KSB7XG4gICAgICBjb25zdCBib2R5UmVhZGVyID0gYm9keS5nZXRSZWFkZXIoKTtcbiAgICAgIGNvbnN0IHJlYWROZXh0Q2h1bmsgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IGJvZHlSZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgIGZpbmlzaFJlc3BvbnNlU3RyZWFtKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzcG9uc2UuZW1pdChcImRhdGFcIiwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gcmVhZE5leHRDaHVuaygpO1xuICAgICAgfTtcbiAgICAgIHJlYWROZXh0Q2h1bmsoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmluaXNoUmVzcG9uc2VTdHJlYW0oKTtcbiAgICB9XG4gICAgaXNSZXNwb25zZVN0cmVhbUZpbmlzaGVkLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImZpbmFsaXppbmcgcmVzcG9uc2UuLi5cIik7XG4gICAgICB0aGlzLnJlc3BvbnNlLmVtaXQoXCJlbmRcIik7XG4gICAgICB0aGlzLnRlcm1pbmF0ZSgpO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlcXVlc3QgY29tcGxldGUhXCIpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBUZXJtaW5hdGVzIGEgcGVuZGluZyByZXF1ZXN0LlxuICAgKi9cbiAgdGVybWluYXRlKCkge1xuICAgIHZhciBfYTtcbiAgICAoX2EgPSB0aGlzLmFnZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EuZGVzdHJveSgpO1xuICB9XG59O1xudmFyIE5vZGVDbGllbnRSZXF1ZXN0ID0gX05vZGVDbGllbnRSZXF1ZXN0O1xuLyoqXG4gKiBUaGUgbGlzdCBvZiBpbnRlcm5hbCBOb2RlLmpzIGVycm9ycyB0byBzdXBwcmVzcyB3aGlsZVxuICogdXNpbmcgdGhlIFwibW9ja1wiIHJlc3BvbnNlIHNvdXJjZS5cbiAqL1xuTm9kZUNsaWVudFJlcXVlc3Quc3VwcHJlc3NFcnJvckNvZGVzID0gW1xuICBcIkVOT1RGT1VORFwiLFxuICBcIkVDT05OUkVGVVNFRFwiLFxuICBcIkVDT05OUkVTRVRcIixcbiAgXCJFQUlfQUdBSU5cIixcbiAgXCJFTkVUVU5SRUFDSFwiLFxuICBcIkVIT1NUVU5SRUFDSFwiXG5dO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL0NsaWVudFJlcXVlc3QvdXRpbHMvbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3MudHNcbmltcG9ydCB7XG4gIEFnZW50IGFzIEh0dHBBZ2VudCxcbiAgZ2xvYmFsQWdlbnQgYXMgaHR0cEdsb2JhbEFnZW50XG59IGZyb20gXCJodHRwXCI7XG5pbXBvcnQge1xuICBBZ2VudCBhcyBIdHRwc0FnZW50LFxuICBnbG9iYWxBZ2VudCBhcyBodHRwc0dsb2JhbEFnZW50XG59IGZyb20gXCJodHRwc1wiO1xuaW1wb3J0IHsgcGFyc2UgYXMgcGFyc2VVcmwgfSBmcm9tIFwidXJsXCI7XG5pbXBvcnQgeyBMb2dnZXIgYXMgTG9nZ2VyNSB9IGZyb20gXCJAb3Blbi1kcmFmdC9sb2dnZXJcIjtcblxuLy8gc3JjL3V0aWxzL2dldFJlcXVlc3RPcHRpb25zQnlVcmwudHNcbmZ1bmN0aW9uIGdldFJlcXVlc3RPcHRpb25zQnlVcmwodXJsKSB7XG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIHByb3RvY29sOiB1cmwucHJvdG9jb2wsXG4gICAgaG9zdG5hbWU6IHR5cGVvZiB1cmwuaG9zdG5hbWUgPT09IFwic3RyaW5nXCIgJiYgdXJsLmhvc3RuYW1lLnN0YXJ0c1dpdGgoXCJbXCIpID8gdXJsLmhvc3RuYW1lLnNsaWNlKDEsIC0xKSA6IHVybC5ob3N0bmFtZSxcbiAgICBob3N0OiB1cmwuaG9zdCxcbiAgICBwYXRoOiBgJHt1cmwucGF0aG5hbWV9JHt1cmwuc2VhcmNoIHx8IFwiXCJ9YFxuICB9O1xuICBpZiAoISF1cmwucG9ydCkge1xuICAgIG9wdGlvbnMucG9ydCA9IE51bWJlcih1cmwucG9ydCk7XG4gIH1cbiAgaWYgKHVybC51c2VybmFtZSB8fCB1cmwucGFzc3dvcmQpIHtcbiAgICBvcHRpb25zLmF1dGggPSBgJHt1cmwudXNlcm5hbWV9OiR7dXJsLnBhc3N3b3JkfWA7XG4gIH1cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbi8vIHNyYy91dGlscy9nZXRVcmxCeVJlcXVlc3RPcHRpb25zLnRzXG5pbXBvcnQgeyBBZ2VudCB9IGZyb20gXCJodHRwXCI7XG5pbXBvcnQgeyBMb2dnZXIgYXMgTG9nZ2VyMyB9IGZyb20gXCJAb3Blbi1kcmFmdC9sb2dnZXJcIjtcbnZhciBsb2dnZXIzID0gbmV3IExvZ2dlcjMoXCJ1dGlscyBnZXRVcmxCeVJlcXVlc3RPcHRpb25zXCIpO1xudmFyIERFRkFVTFRfUEFUSCA9IFwiL1wiO1xudmFyIERFRkFVTFRfUFJPVE9DT0wgPSBcImh0dHA6XCI7XG52YXIgREVGQVVMVF9IT1NUID0gXCJsb2NhbGhvc3RcIjtcbnZhciBTU0xfUE9SVCA9IDQ0MztcbmZ1bmN0aW9uIGdldEFnZW50KG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMuYWdlbnQgaW5zdGFuY2VvZiBBZ2VudCA/IG9wdGlvbnMuYWdlbnQgOiB2b2lkIDA7XG59XG5mdW5jdGlvbiBnZXRQcm90b2NvbEJ5UmVxdWVzdE9wdGlvbnMob3B0aW9ucykge1xuICB2YXIgX2E7XG4gIGlmIChvcHRpb25zLnByb3RvY29sKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMucHJvdG9jb2w7XG4gIH1cbiAgY29uc3QgYWdlbnQgPSBnZXRBZ2VudChvcHRpb25zKTtcbiAgY29uc3QgYWdlbnRQcm90b2NvbCA9IGFnZW50ID09IG51bGwgPyB2b2lkIDAgOiBhZ2VudC5wcm90b2NvbDtcbiAgaWYgKGFnZW50UHJvdG9jb2wpIHtcbiAgICByZXR1cm4gYWdlbnRQcm90b2NvbDtcbiAgfVxuICBjb25zdCBwb3J0ID0gZ2V0UG9ydEJ5UmVxdWVzdE9wdGlvbnMob3B0aW9ucyk7XG4gIGNvbnN0IGlzU2VjdXJlUmVxdWVzdCA9IG9wdGlvbnMuY2VydCB8fCBwb3J0ID09PSBTU0xfUE9SVDtcbiAgcmV0dXJuIGlzU2VjdXJlUmVxdWVzdCA/IFwiaHR0cHM6XCIgOiAoKF9hID0gb3B0aW9ucy51cmkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5wcm90b2NvbCkgfHwgREVGQVVMVF9QUk9UT0NPTDtcbn1cbmZ1bmN0aW9uIGdldFBvcnRCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMucG9ydCkge1xuICAgIHJldHVybiBOdW1iZXIob3B0aW9ucy5wb3J0KTtcbiAgfVxuICBpZiAob3B0aW9ucy5ob3N0bmFtZSAhPSBudWxsKSB7XG4gICAgY29uc3QgWywgZXh0cmFjdGVkUG9ydF0gPSBvcHRpb25zLmhvc3RuYW1lLm1hdGNoKC86KFxcZCspJC8pIHx8IFtdO1xuICAgIGlmIChleHRyYWN0ZWRQb3J0ICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBOdW1iZXIoZXh0cmFjdGVkUG9ydCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGFnZW50ID0gZ2V0QWdlbnQob3B0aW9ucyk7XG4gIGlmIChhZ2VudCA9PSBudWxsID8gdm9pZCAwIDogYWdlbnQub3B0aW9ucy5wb3J0KSB7XG4gICAgcmV0dXJuIE51bWJlcihhZ2VudC5vcHRpb25zLnBvcnQpO1xuICB9XG4gIGlmIChhZ2VudCA9PSBudWxsID8gdm9pZCAwIDogYWdlbnQuZGVmYXVsdFBvcnQpIHtcbiAgICByZXR1cm4gTnVtYmVyKGFnZW50LmRlZmF1bHRQb3J0KTtcbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufVxuZnVuY3Rpb24gZ2V0SG9zdEJ5UmVxdWVzdE9wdGlvbnMob3B0aW9ucykge1xuICBjb25zdCB7IGhvc3RuYW1lLCBob3N0IH0gPSBvcHRpb25zO1xuICBpZiAoaG9zdG5hbWUgIT0gbnVsbCkge1xuICAgIHJldHVybiBob3N0bmFtZS5yZXBsYWNlKC86XFxkKyQvLCBcIlwiKTtcbiAgfVxuICByZXR1cm4gaG9zdCB8fCBERUZBVUxUX0hPU1Q7XG59XG5mdW5jdGlvbiBnZXRBdXRoQnlSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLmF1dGgpIHtcbiAgICBjb25zdCBbdXNlcm5hbWUsIHBhc3N3b3JkXSA9IG9wdGlvbnMuYXV0aC5zcGxpdChcIjpcIik7XG4gICAgcmV0dXJuIHsgdXNlcm5hbWUsIHBhc3N3b3JkIH07XG4gIH1cbn1cbmZ1bmN0aW9uIGlzUmF3SVB2NkFkZHJlc3MoaG9zdCkge1xuICByZXR1cm4gaG9zdC5pbmNsdWRlcyhcIjpcIikgJiYgIWhvc3Quc3RhcnRzV2l0aChcIltcIikgJiYgIWhvc3QuZW5kc1dpdGgoXCJdXCIpO1xufVxuZnVuY3Rpb24gZ2V0SG9zdG5hbWUoaG9zdCwgcG9ydCkge1xuICBjb25zdCBwb3J0U3RyaW5nID0gdHlwZW9mIHBvcnQgIT09IFwidW5kZWZpbmVkXCIgPyBgOiR7cG9ydH1gIDogXCJcIjtcbiAgaWYgKGlzUmF3SVB2NkFkZHJlc3MoaG9zdCkpIHtcbiAgICByZXR1cm4gYFske2hvc3R9XSR7cG9ydFN0cmluZ31gO1xuICB9XG4gIGlmICh0eXBlb2YgcG9ydCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBob3N0O1xuICB9XG4gIHJldHVybiBgJHtob3N0fSR7cG9ydFN0cmluZ31gO1xufVxuZnVuY3Rpb24gZ2V0VXJsQnlSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKSB7XG4gIGxvZ2dlcjMuaW5mbyhcInJlcXVlc3Qgb3B0aW9uc1wiLCBvcHRpb25zKTtcbiAgaWYgKG9wdGlvbnMudXJpKSB7XG4gICAgbG9nZ2VyMy5pbmZvKFxuICAgICAgJ2NvbnN0cnVjdGluZyB1cmwgZnJvbSBleHBsaWNpdGx5IHByb3ZpZGVkIFwib3B0aW9ucy51cmlcIjogJXMnLFxuICAgICAgb3B0aW9ucy51cmlcbiAgICApO1xuICAgIHJldHVybiBuZXcgVVJMKG9wdGlvbnMudXJpLmhyZWYpO1xuICB9XG4gIGxvZ2dlcjMuaW5mbyhcImZpZ3VyaW5nIG91dCB1cmwgZnJvbSByZXF1ZXN0IG9wdGlvbnMuLi5cIik7XG4gIGNvbnN0IHByb3RvY29sID0gZ2V0UHJvdG9jb2xCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xuICBsb2dnZXIzLmluZm8oXCJwcm90b2NvbFwiLCBwcm90b2NvbCk7XG4gIGNvbnN0IGhvc3QgPSBnZXRIb3N0QnlSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcbiAgbG9nZ2VyMy5pbmZvKFwiaG9zdFwiLCBob3N0KTtcbiAgY29uc3QgcG9ydCA9IGdldFBvcnRCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xuICBsb2dnZXIzLmluZm8oXCJwb3J0XCIsIHBvcnQpO1xuICBjb25zdCBob3N0bmFtZSA9IGdldEhvc3RuYW1lKGhvc3QsIHBvcnQpO1xuICBsb2dnZXIzLmluZm8oXCJob3N0bmFtZVwiLCBob3N0bmFtZSk7XG4gIGNvbnN0IHBhdGggPSBvcHRpb25zLnBhdGggfHwgREVGQVVMVF9QQVRIO1xuICBsb2dnZXIzLmluZm8oXCJwYXRoXCIsIHBhdGgpO1xuICBjb25zdCBjcmVkZW50aWFscyA9IGdldEF1dGhCeVJlcXVlc3RPcHRpb25zKG9wdGlvbnMpO1xuICBsb2dnZXIzLmluZm8oXCJjcmVkZW50aWFsc1wiLCBjcmVkZW50aWFscyk7XG4gIGNvbnN0IGF1dGhTdHJpbmcgPSBjcmVkZW50aWFscyA/IGAke2NyZWRlbnRpYWxzLnVzZXJuYW1lfToke2NyZWRlbnRpYWxzLnBhc3N3b3JkfUBgIDogXCJcIjtcbiAgbG9nZ2VyMy5pbmZvKFwiYXV0aCBzdHJpbmc6XCIsIGF1dGhTdHJpbmcpO1xuICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3Byb3RvY29sfS8vJHtob3N0bmFtZX0ke3BhdGh9YCk7XG4gIHVybC51c2VybmFtZSA9IChjcmVkZW50aWFscyA9PSBudWxsID8gdm9pZCAwIDogY3JlZGVudGlhbHMudXNlcm5hbWUpIHx8IFwiXCI7XG4gIHVybC5wYXNzd29yZCA9IChjcmVkZW50aWFscyA9PSBudWxsID8gdm9pZCAwIDogY3JlZGVudGlhbHMucGFzc3dvcmQpIHx8IFwiXCI7XG4gIGxvZ2dlcjMuaW5mbyhcImNyZWF0ZWQgdXJsOlwiLCB1cmwpO1xuICByZXR1cm4gdXJsO1xufVxuXG4vLyBzcmMvdXRpbHMvY2xvbmVPYmplY3QudHNcbmltcG9ydCB7IExvZ2dlciBhcyBMb2dnZXI0IH0gZnJvbSBcIkBvcGVuLWRyYWZ0L2xvZ2dlclwiO1xudmFyIGxvZ2dlcjQgPSBuZXcgTG9nZ2VyNChcImNsb25lT2JqZWN0XCIpO1xuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgdmFyIF9hO1xuICBsb2dnZXI0LmluZm8oXCJpcyBwbGFpbiBvYmplY3Q/XCIsIG9iaik7XG4gIGlmIChvYmogPT0gbnVsbCB8fCAhKChfYSA9IG9iai5jb25zdHJ1Y3RvcikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm5hbWUpKSB7XG4gICAgbG9nZ2VyNC5pbmZvKFwiZ2l2ZW4gb2JqZWN0IGlzIHVuZGVmaW5lZCwgbm90IGEgcGxhaW4gb2JqZWN0Li4uXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBsb2dnZXI0LmluZm8oXCJjaGVja2luZyB0aGUgb2JqZWN0IGNvbnN0cnVjdG9yOlwiLCBvYmouY29uc3RydWN0b3IubmFtZSk7XG4gIHJldHVybiBvYmouY29uc3RydWN0b3IubmFtZSA9PT0gXCJPYmplY3RcIjtcbn1cbmZ1bmN0aW9uIGNsb25lT2JqZWN0KG9iaikge1xuICBsb2dnZXI0LmluZm8oXCJjbG9uaW5nIG9iamVjdDpcIiwgb2JqKTtcbiAgY29uc3QgZW51bWVyYWJsZVByb3BlcnRpZXMgPSBPYmplY3QuZW50cmllcyhvYmopLnJlZHVjZShcbiAgICAoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGxvZ2dlcjQuaW5mbyhcImFuYWx5emluZyBrZXktdmFsdWUgcGFpcjpcIiwga2V5LCB2YWx1ZSk7XG4gICAgICBhY2Nba2V5XSA9IGlzUGxhaW5PYmplY3QodmFsdWUpID8gY2xvbmVPYmplY3QodmFsdWUpIDogdmFsdWU7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sXG4gICAge31cbiAgKTtcbiAgcmV0dXJuIGlzUGxhaW5PYmplY3Qob2JqKSA/IGVudW1lcmFibGVQcm9wZXJ0aWVzIDogT2JqZWN0LmFzc2lnbihPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSwgZW51bWVyYWJsZVByb3BlcnRpZXMpO1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL0NsaWVudFJlcXVlc3QvdXRpbHMvbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3MudHNcbnZhciBsb2dnZXI1ID0gbmV3IExvZ2dlcjUoXCJodHRwIG5vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzXCIpO1xuZnVuY3Rpb24gcmVzb2x2ZVJlcXVlc3RPcHRpb25zKGFyZ3MsIHVybCkge1xuICBpZiAodHlwZW9mIGFyZ3NbMV0gPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGFyZ3NbMV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGxvZ2dlcjUuaW5mbyhcInJlcXVlc3Qgb3B0aW9ucyBub3QgcHJvdmlkZWQsIGRlcml2aW5nIGZyb20gdGhlIHVybFwiLCB1cmwpO1xuICAgIHJldHVybiBnZXRSZXF1ZXN0T3B0aW9uc0J5VXJsKHVybCk7XG4gIH1cbiAgaWYgKGFyZ3NbMV0pIHtcbiAgICBsb2dnZXI1LmluZm8oXCJoYXMgY3VzdG9tIFJlcXVlc3RPcHRpb25zIVwiLCBhcmdzWzFdKTtcbiAgICBjb25zdCByZXF1ZXN0T3B0aW9uc0Zyb21VcmwgPSBnZXRSZXF1ZXN0T3B0aW9uc0J5VXJsKHVybCk7XG4gICAgbG9nZ2VyNS5pbmZvKFwiZGVyaXZlZCBSZXF1ZXN0T3B0aW9ucyBmcm9tIHRoZSBVUkw6XCIsIHJlcXVlc3RPcHRpb25zRnJvbVVybCk7XG4gICAgbG9nZ2VyNS5pbmZvKFwiY2xvbmluZyBSZXF1ZXN0T3B0aW9ucy4uLlwiKTtcbiAgICBjb25zdCBjbG9uZWRSZXF1ZXN0T3B0aW9ucyA9IGNsb25lT2JqZWN0KGFyZ3NbMV0pO1xuICAgIGxvZ2dlcjUuaW5mbyhcInN1Y2Nlc3NmdWxseSBjbG9uZWQgUmVxdWVzdE9wdGlvbnMhXCIsIGNsb25lZFJlcXVlc3RPcHRpb25zKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucmVxdWVzdE9wdGlvbnNGcm9tVXJsLFxuICAgICAgLi4uY2xvbmVkUmVxdWVzdE9wdGlvbnNcbiAgICB9O1xuICB9XG4gIGxvZ2dlcjUuaW5mbyhcInVzaW5nIGFuIGVtcHR5IG9iamVjdCBhcyByZXF1ZXN0IG9wdGlvbnNcIik7XG4gIHJldHVybiB7fTtcbn1cbmZ1bmN0aW9uIG92ZXJyaWRlVXJsQnlSZXF1ZXN0T3B0aW9ucyh1cmwsIG9wdGlvbnMpIHtcbiAgdXJsLmhvc3QgPSBvcHRpb25zLmhvc3QgfHwgdXJsLmhvc3Q7XG4gIHVybC5ob3N0bmFtZSA9IG9wdGlvbnMuaG9zdG5hbWUgfHwgdXJsLmhvc3RuYW1lO1xuICB1cmwucG9ydCA9IG9wdGlvbnMucG9ydCA/IG9wdGlvbnMucG9ydC50b1N0cmluZygpIDogdXJsLnBvcnQ7XG4gIGlmIChvcHRpb25zLnBhdGgpIHtcbiAgICBjb25zdCBwYXJzZWRPcHRpb25zUGF0aCA9IHBhcnNlVXJsKG9wdGlvbnMucGF0aCwgZmFsc2UpO1xuICAgIHVybC5wYXRobmFtZSA9IHBhcnNlZE9wdGlvbnNQYXRoLnBhdGhuYW1lIHx8IFwiXCI7XG4gICAgdXJsLnNlYXJjaCA9IHBhcnNlZE9wdGlvbnNQYXRoLnNlYXJjaCB8fCBcIlwiO1xuICB9XG4gIHJldHVybiB1cmw7XG59XG5mdW5jdGlvbiByZXNvbHZlQ2FsbGJhY2soYXJncykge1xuICByZXR1cm4gdHlwZW9mIGFyZ3NbMV0gPT09IFwiZnVuY3Rpb25cIiA/IGFyZ3NbMV0gOiBhcmdzWzJdO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3MoZGVmYXVsdFByb3RvY29sLCAuLi5hcmdzKSB7XG4gIGxldCB1cmw7XG4gIGxldCBvcHRpb25zO1xuICBsZXQgY2FsbGJhY2s7XG4gIGxvZ2dlcjUuaW5mbyhcImFyZ3VtZW50c1wiLCBhcmdzKTtcbiAgbG9nZ2VyNS5pbmZvKFwidXNpbmcgZGVmYXVsdCBwcm90b2NvbDpcIiwgZGVmYXVsdFByb3RvY29sKTtcbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc3QgdXJsMiA9IG5ldyBVUkwoXCJodHRwOi8vbG9jYWxob3N0XCIpO1xuICAgIGNvbnN0IG9wdGlvbnMyID0gcmVzb2x2ZVJlcXVlc3RPcHRpb25zKGFyZ3MsIHVybDIpO1xuICAgIHJldHVybiBbdXJsMiwgb3B0aW9uczJdO1xuICB9XG4gIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGxvZ2dlcjUuaW5mbyhcImZpcnN0IGFyZ3VtZW50IGlzIGEgbG9jYXRpb24gc3RyaW5nOlwiLCBhcmdzWzBdKTtcbiAgICB1cmwgPSBuZXcgVVJMKGFyZ3NbMF0pO1xuICAgIGxvZ2dlcjUuaW5mbyhcImNyZWF0ZWQgYSB1cmw6XCIsIHVybCk7XG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnNGcm9tVXJsID0gZ2V0UmVxdWVzdE9wdGlvbnNCeVVybCh1cmwpO1xuICAgIGxvZ2dlcjUuaW5mbyhcInJlcXVlc3Qgb3B0aW9ucyBmcm9tIHVybDpcIiwgcmVxdWVzdE9wdGlvbnNGcm9tVXJsKTtcbiAgICBvcHRpb25zID0gcmVzb2x2ZVJlcXVlc3RPcHRpb25zKGFyZ3MsIHVybCk7XG4gICAgbG9nZ2VyNS5pbmZvKFwicmVzb2x2ZWQgcmVxdWVzdCBvcHRpb25zOlwiLCBvcHRpb25zKTtcbiAgICBjYWxsYmFjayA9IHJlc29sdmVDYWxsYmFjayhhcmdzKTtcbiAgfSBlbHNlIGlmIChhcmdzWzBdIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgdXJsID0gYXJnc1swXTtcbiAgICBsb2dnZXI1LmluZm8oXCJmaXJzdCBhcmd1bWVudCBpcyBhIFVSTDpcIiwgdXJsKTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMV0gIT09IFwidW5kZWZpbmVkXCIgJiYgaXNPYmplY3QoYXJnc1sxXSkpIHtcbiAgICAgIHVybCA9IG92ZXJyaWRlVXJsQnlSZXF1ZXN0T3B0aW9ucyh1cmwsIGFyZ3NbMV0pO1xuICAgIH1cbiAgICBvcHRpb25zID0gcmVzb2x2ZVJlcXVlc3RPcHRpb25zKGFyZ3MsIHVybCk7XG4gICAgbG9nZ2VyNS5pbmZvKFwiZGVyaXZlZCByZXF1ZXN0IG9wdGlvbnM6XCIsIG9wdGlvbnMpO1xuICAgIGNhbGxiYWNrID0gcmVzb2x2ZUNhbGxiYWNrKGFyZ3MpO1xuICB9IGVsc2UgaWYgKFwiaGFzaFwiIGluIGFyZ3NbMF0gJiYgIShcIm1ldGhvZFwiIGluIGFyZ3NbMF0pKSB7XG4gICAgY29uc3QgW2xlZ2FjeVVybF0gPSBhcmdzO1xuICAgIGxvZ2dlcjUuaW5mbyhcImZpcnN0IGFyZ3VtZW50IGlzIGEgbGVnYWN5IFVSTDpcIiwgbGVnYWN5VXJsKTtcbiAgICBpZiAobGVnYWN5VXJsLmhvc3RuYW1lID09PSBudWxsKSB7XG4gICAgICBsb2dnZXI1LmluZm8oXCJnaXZlbiBsZWdhY3kgVVJMIGlzIHJlbGF0aXZlIChubyBob3N0bmFtZSlcIik7XG4gICAgICByZXR1cm4gaXNPYmplY3QoYXJnc1sxXSkgPyBub3JtYWxpemVDbGllbnRSZXF1ZXN0QXJncyhcbiAgICAgICAgZGVmYXVsdFByb3RvY29sLFxuICAgICAgICB7IHBhdGg6IGxlZ2FjeVVybC5wYXRoLCAuLi5hcmdzWzFdIH0sXG4gICAgICAgIGFyZ3NbMl1cbiAgICAgICkgOiBub3JtYWxpemVDbGllbnRSZXF1ZXN0QXJncyhcbiAgICAgICAgZGVmYXVsdFByb3RvY29sLFxuICAgICAgICB7IHBhdGg6IGxlZ2FjeVVybC5wYXRoIH0sXG4gICAgICAgIGFyZ3NbMV1cbiAgICAgICk7XG4gICAgfVxuICAgIGxvZ2dlcjUuaW5mbyhcImdpdmVuIGxlZ2FjeSB1cmwgaXMgYWJzb2x1dGVcIik7XG4gICAgY29uc3QgcmVzb2x2ZWRVcmwgPSBuZXcgVVJMKGxlZ2FjeVVybC5ocmVmKTtcbiAgICByZXR1cm4gYXJnc1sxXSA9PT0gdm9pZCAwID8gbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3MoZGVmYXVsdFByb3RvY29sLCByZXNvbHZlZFVybCkgOiB0eXBlb2YgYXJnc1sxXSA9PT0gXCJmdW5jdGlvblwiID8gbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3MoZGVmYXVsdFByb3RvY29sLCByZXNvbHZlZFVybCwgYXJnc1sxXSkgOiBub3JtYWxpemVDbGllbnRSZXF1ZXN0QXJncyhcbiAgICAgIGRlZmF1bHRQcm90b2NvbCxcbiAgICAgIHJlc29sdmVkVXJsLFxuICAgICAgYXJnc1sxXSxcbiAgICAgIGFyZ3NbMl1cbiAgICApO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGFyZ3NbMF0pKSB7XG4gICAgb3B0aW9ucyA9IGFyZ3NbMF07XG4gICAgbG9nZ2VyNS5pbmZvKFwiZmlyc3QgYXJndW1lbnQgaXMgUmVxdWVzdE9wdGlvbnM6XCIsIG9wdGlvbnMpO1xuICAgIG9wdGlvbnMucHJvdG9jb2wgPSBvcHRpb25zLnByb3RvY29sIHx8IGRlZmF1bHRQcm90b2NvbDtcbiAgICBsb2dnZXI1LmluZm8oXCJub3JtYWxpemVkIHJlcXVlc3Qgb3B0aW9uczpcIiwgb3B0aW9ucyk7XG4gICAgdXJsID0gZ2V0VXJsQnlSZXF1ZXN0T3B0aW9ucyhvcHRpb25zKTtcbiAgICBsb2dnZXI1LmluZm8oXCJjcmVhdGVkIGEgVVJMIGZyb20gUmVxdWVzdE9wdGlvbnM6XCIsIHVybC5ocmVmKTtcbiAgICBjYWxsYmFjayA9IHJlc29sdmVDYWxsYmFjayhhcmdzKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmFpbGVkIHRvIGNvbnN0cnVjdCBDbGllbnRSZXF1ZXN0IHdpdGggdGhlc2UgcGFyYW1ldGVyczogJHthcmdzfWBcbiAgICApO1xuICB9XG4gIG9wdGlvbnMucHJvdG9jb2wgPSBvcHRpb25zLnByb3RvY29sIHx8IHVybC5wcm90b2NvbDtcbiAgb3B0aW9ucy5tZXRob2QgPSBvcHRpb25zLm1ldGhvZCB8fCBcIkdFVFwiO1xuICBpZiAodHlwZW9mIG9wdGlvbnMuYWdlbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjb25zdCBhZ2VudCA9IG9wdGlvbnMucHJvdG9jb2wgPT09IFwiaHR0cHM6XCIgPyBuZXcgSHR0cHNBZ2VudCh7XG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IG9wdGlvbnMucmVqZWN0VW5hdXRob3JpemVkXG4gICAgfSkgOiBuZXcgSHR0cEFnZW50KCk7XG4gICAgb3B0aW9ucy5hZ2VudCA9IGFnZW50O1xuICAgIGxvZ2dlcjUuaW5mbyhcInJlc29sdmVkIGZhbGxiYWNrIGFnZW50OlwiLCBhZ2VudCk7XG4gIH1cbiAgaWYgKCFvcHRpb25zLl9kZWZhdWx0QWdlbnQpIHtcbiAgICBsb2dnZXI1LmluZm8oXG4gICAgICAnaGFzIG5vIGRlZmF1bHQgYWdlbnQsIHNldHRpbmcgdGhlIGRlZmF1bHQgYWdlbnQgZm9yIFwiJXNcIicsXG4gICAgICBvcHRpb25zLnByb3RvY29sXG4gICAgKTtcbiAgICBvcHRpb25zLl9kZWZhdWx0QWdlbnQgPSBvcHRpb25zLnByb3RvY29sID09PSBcImh0dHBzOlwiID8gaHR0cHNHbG9iYWxBZ2VudCA6IGh0dHBHbG9iYWxBZ2VudDtcbiAgfVxuICBsb2dnZXI1LmluZm8oXCJzdWNjZXNzZnVsbHkgcmVzb2x2ZWQgdXJsOlwiLCB1cmwuaHJlZik7XG4gIGxvZ2dlcjUuaW5mbyhcInN1Y2Nlc3NmdWxseSByZXNvbHZlZCBvcHRpb25zOlwiLCBvcHRpb25zKTtcbiAgbG9nZ2VyNS5pbmZvKFwic3VjY2Vzc2Z1bGx5IHJlc29sdmVkIGNhbGxiYWNrOlwiLCBjYWxsYmFjayk7XG4gIHJldHVybiBbdXJsLCBvcHRpb25zLCBjYWxsYmFja107XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC9odHRwLmdldC50c1xuZnVuY3Rpb24gZ2V0KHByb3RvY29sLCBvcHRpb25zKSB7XG4gIHJldHVybiBmdW5jdGlvbiBpbnRlcmNlcHRvcnNIdHRwR2V0KC4uLmFyZ3MpIHtcbiAgICBjb25zdCBjbGllbnRSZXF1ZXN0QXJncyA9IG5vcm1hbGl6ZUNsaWVudFJlcXVlc3RBcmdzKFxuICAgICAgYCR7cHJvdG9jb2x9OmAsXG4gICAgICAuLi5hcmdzXG4gICAgKTtcbiAgICBjb25zdCByZXF1ZXN0MiA9IG5ldyBOb2RlQ2xpZW50UmVxdWVzdChjbGllbnRSZXF1ZXN0QXJncywgb3B0aW9ucyk7XG4gICAgcmVxdWVzdDIuZW5kKCk7XG4gICAgcmV0dXJuIHJlcXVlc3QyO1xuICB9O1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL0NsaWVudFJlcXVlc3QvaHR0cC5yZXF1ZXN0LnRzXG5pbXBvcnQgeyBMb2dnZXIgYXMgTG9nZ2VyNiB9IGZyb20gXCJAb3Blbi1kcmFmdC9sb2dnZXJcIjtcbnZhciBsb2dnZXI2ID0gbmV3IExvZ2dlcjYoXCJodHRwIHJlcXVlc3RcIik7XG5mdW5jdGlvbiByZXF1ZXN0KHByb3RvY29sLCBvcHRpb25zKSB7XG4gIHJldHVybiBmdW5jdGlvbiBpbnRlcmNlcHRvcnNIdHRwUmVxdWVzdCguLi5hcmdzKSB7XG4gICAgbG9nZ2VyNi5pbmZvKCdyZXF1ZXN0IGNhbGwgKHByb3RvY29sIFwiJXNcIik6JywgcHJvdG9jb2wsIGFyZ3MpO1xuICAgIGNvbnN0IGNsaWVudFJlcXVlc3RBcmdzID0gbm9ybWFsaXplQ2xpZW50UmVxdWVzdEFyZ3MoXG4gICAgICBgJHtwcm90b2NvbH06YCxcbiAgICAgIC4uLmFyZ3NcbiAgICApO1xuICAgIHJldHVybiBuZXcgTm9kZUNsaWVudFJlcXVlc3QoY2xpZW50UmVxdWVzdEFyZ3MsIG9wdGlvbnMpO1xuICB9O1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL0NsaWVudFJlcXVlc3QvaW5kZXgudHNcbnZhciBfQ2xpZW50UmVxdWVzdEludGVyY2VwdG9yID0gY2xhc3MgZXh0ZW5kcyBJbnRlcmNlcHRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKF9DbGllbnRSZXF1ZXN0SW50ZXJjZXB0b3IuaW50ZXJjZXB0b3JTeW1ib2wpO1xuICAgIHRoaXMubW9kdWxlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5tb2R1bGVzLnNldChcImh0dHBcIiwgaHR0cCk7XG4gICAgdGhpcy5tb2R1bGVzLnNldChcImh0dHBzXCIsIGh0dHBzKTtcbiAgfVxuICBzZXR1cCgpIHtcbiAgICBjb25zdCBsb2dnZXI3ID0gdGhpcy5sb2dnZXIuZXh0ZW5kKFwic2V0dXBcIik7XG4gICAgZm9yIChjb25zdCBbcHJvdG9jb2wsIHJlcXVlc3RNb2R1bGVdIG9mIHRoaXMubW9kdWxlcykge1xuICAgICAgY29uc3QgeyByZXF1ZXN0OiBwdXJlUmVxdWVzdCwgZ2V0OiBwdXJlR2V0IH0gPSByZXF1ZXN0TW9kdWxlO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goKCkgPT4ge1xuICAgICAgICByZXF1ZXN0TW9kdWxlLnJlcXVlc3QgPSBwdXJlUmVxdWVzdDtcbiAgICAgICAgcmVxdWVzdE1vZHVsZS5nZXQgPSBwdXJlR2V0O1xuICAgICAgICBsb2dnZXI3LmluZm8oJ25hdGl2ZSBcIiVzXCIgbW9kdWxlIHJlc3RvcmVkIScsIHByb3RvY29sKTtcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgZW1pdHRlcjogdGhpcy5lbWl0dGVyLFxuICAgICAgICBsb2dnZXI6IHRoaXMubG9nZ2VyXG4gICAgICB9O1xuICAgICAgcmVxdWVzdE1vZHVsZS5yZXF1ZXN0ID0gLy8gRm9yY2UgYSBsaW5lIGJyZWFrLlxuICAgICAgcmVxdWVzdChwcm90b2NvbCwgb3B0aW9ucyk7XG4gICAgICByZXF1ZXN0TW9kdWxlLmdldCA9IC8vIEZvcmNlIGEgbGluZSBicmVhay5cbiAgICAgIGdldChwcm90b2NvbCwgb3B0aW9ucyk7XG4gICAgICBsb2dnZXI3LmluZm8oJ25hdGl2ZSBcIiVzXCIgbW9kdWxlIHBhdGNoZWQhJywgcHJvdG9jb2wpO1xuICAgIH1cbiAgfVxufTtcbnZhciBDbGllbnRSZXF1ZXN0SW50ZXJjZXB0b3IgPSBfQ2xpZW50UmVxdWVzdEludGVyY2VwdG9yO1xuQ2xpZW50UmVxdWVzdEludGVyY2VwdG9yLmludGVyY2VwdG9yU3ltYm9sID0gU3ltYm9sKFwiaHR0cFwiKTtcblxuZXhwb3J0IHtcbiAgQ2xpZW50UmVxdWVzdEludGVyY2VwdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstQ0NBU09OV0IubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-CCASONWB.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-DERTLGL3.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-DERTLGL3.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPropertyAccessible: () => (/* binding */ isPropertyAccessible)\n/* harmony export */ });\n// src/utils/isPropertyAccessible.ts\nfunction isPropertyAccessible(obj, key) {\n  try {\n    obj[key];\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n\n//# sourceMappingURL=chunk-DERTLGL3.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1ERVJUTEdMMy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZW1vLWxvZ2luLy4vbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvY2h1bmstREVSVExHTDMubWpzPzdiZDAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2lzUHJvcGVydHlBY2Nlc3NpYmxlLnRzXG5mdW5jdGlvbiBpc1Byb3BlcnR5QWNjZXNzaWJsZShvYmosIGtleSkge1xuICB0cnkge1xuICAgIG9ialtrZXldO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIGlzUHJvcGVydHlBY2Nlc3NpYmxlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstREVSVExHTDMubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-DERTLGL3.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-GUY7XK43.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-GUY7XK43.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BatchInterceptor: () => (/* binding */ BatchInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-QED3Q6Z2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs\");\n\n\n// src/BatchInterceptor.ts\nvar BatchInterceptor = class extends _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_0__.Interceptor {\n  constructor(options) {\n    BatchInterceptor.symbol = Symbol(options.name);\n    super(BatchInterceptor.symbol);\n    this.interceptors = options.interceptors;\n  }\n  setup() {\n    const logger = this.logger.extend(\"setup\");\n    logger.info(\"applying all %d interceptors...\", this.interceptors.length);\n    for (const interceptor of this.interceptors) {\n      logger.info('applying \"%s\" interceptor...', interceptor.constructor.name);\n      interceptor.apply();\n      logger.info(\"adding interceptor dispose subscription\");\n      this.subscriptions.push(() => interceptor.dispose());\n    }\n  }\n  on(event, listener) {\n    for (const interceptor of this.interceptors) {\n      interceptor.on(event, listener);\n    }\n    return this;\n  }\n  once(event, listener) {\n    for (const interceptor of this.interceptors) {\n      interceptor.once(event, listener);\n    }\n    return this;\n  }\n  off(event, listener) {\n    for (const interceptor of this.interceptors) {\n      interceptor.off(event, listener);\n    }\n    return this;\n  }\n  removeAllListeners(event) {\n    for (const interceptors of this.interceptors) {\n      interceptors.removeAllListeners(event);\n    }\n    return this;\n  }\n};\n\n\n//# sourceMappingURL=chunk-GUY7XK43.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1HVVk3WEs0My5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFOEI7O0FBRTlCO0FBQ0EscUNBQXFDLDREQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZW1vLWxvZ2luLy4vbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvY2h1bmstR1VZN1hLNDMubWpzPzhiMDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgSW50ZXJjZXB0b3Jcbn0gZnJvbSBcIi4vY2h1bmstUUVEM1E2WjIubWpzXCI7XG5cbi8vIHNyYy9CYXRjaEludGVyY2VwdG9yLnRzXG52YXIgQmF0Y2hJbnRlcmNlcHRvciA9IGNsYXNzIGV4dGVuZHMgSW50ZXJjZXB0b3Ige1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgQmF0Y2hJbnRlcmNlcHRvci5zeW1ib2wgPSBTeW1ib2wob3B0aW9ucy5uYW1lKTtcbiAgICBzdXBlcihCYXRjaEludGVyY2VwdG9yLnN5bWJvbCk7XG4gICAgdGhpcy5pbnRlcmNlcHRvcnMgPSBvcHRpb25zLmludGVyY2VwdG9ycztcbiAgfVxuICBzZXR1cCgpIHtcbiAgICBjb25zdCBsb2dnZXIgPSB0aGlzLmxvZ2dlci5leHRlbmQoXCJzZXR1cFwiKTtcbiAgICBsb2dnZXIuaW5mbyhcImFwcGx5aW5nIGFsbCAlZCBpbnRlcmNlcHRvcnMuLi5cIiwgdGhpcy5pbnRlcmNlcHRvcnMubGVuZ3RoKTtcbiAgICBmb3IgKGNvbnN0IGludGVyY2VwdG9yIG9mIHRoaXMuaW50ZXJjZXB0b3JzKSB7XG4gICAgICBsb2dnZXIuaW5mbygnYXBwbHlpbmcgXCIlc1wiIGludGVyY2VwdG9yLi4uJywgaW50ZXJjZXB0b3IuY29uc3RydWN0b3IubmFtZSk7XG4gICAgICBpbnRlcmNlcHRvci5hcHBseSgpO1xuICAgICAgbG9nZ2VyLmluZm8oXCJhZGRpbmcgaW50ZXJjZXB0b3IgZGlzcG9zZSBzdWJzY3JpcHRpb25cIik7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCgoKSA9PiBpbnRlcmNlcHRvci5kaXNwb3NlKCkpO1xuICAgIH1cbiAgfVxuICBvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICBmb3IgKGNvbnN0IGludGVyY2VwdG9yIG9mIHRoaXMuaW50ZXJjZXB0b3JzKSB7XG4gICAgICBpbnRlcmNlcHRvci5vbihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGZvciAoY29uc3QgaW50ZXJjZXB0b3Igb2YgdGhpcy5pbnRlcmNlcHRvcnMpIHtcbiAgICAgIGludGVyY2VwdG9yLm9uY2UoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGZvciAoY29uc3QgaW50ZXJjZXB0b3Igb2YgdGhpcy5pbnRlcmNlcHRvcnMpIHtcbiAgICAgIGludGVyY2VwdG9yLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgICBmb3IgKGNvbnN0IGludGVyY2VwdG9ycyBvZiB0aGlzLmludGVyY2VwdG9ycykge1xuICAgICAgaW50ZXJjZXB0b3JzLnJlbW92ZUFsbExpc3RlbmVycyhldmVudCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5leHBvcnQge1xuICBCYXRjaEludGVyY2VwdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstR1VZN1hLNDMubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-GUY7XK43.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-HAGW22AN.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-HAGW22AN.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IS_PATCHED_MODULE: () => (/* binding */ IS_PATCHED_MODULE)\n/* harmony export */ });\n// src/glossary.ts\nvar IS_PATCHED_MODULE = Symbol(\"isPatchedModule\");\n\n\n//# sourceMappingURL=chunk-HAGW22AN.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1IQUdXMjJBTi5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8tbG9naW4vLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1IQUdXMjJBTi5tanM/NzIxMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvZ2xvc3NhcnkudHNcbnZhciBJU19QQVRDSEVEX01PRFVMRSA9IFN5bWJvbChcImlzUGF0Y2hlZE1vZHVsZVwiKTtcblxuZXhwb3J0IHtcbiAgSVNfUEFUQ0hFRF9NT0RVTEVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1IQUdXMjJBTi5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-HAGW22AN.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-IBYBTTYK.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-IBYBTTYK.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isResponseWithoutBody: () => (/* binding */ isResponseWithoutBody)\n/* harmony export */ });\n// src/utils/responseUtils.ts\nvar RESPONSE_STATUS_CODES_WITHOUT_BODY = /* @__PURE__ */ new Set([\n  101,\n  103,\n  204,\n  205,\n  304\n]);\nfunction isResponseWithoutBody(status) {\n  return RESPONSE_STATUS_CODES_WITHOUT_BODY.has(status);\n}\n\n\n//# sourceMappingURL=chunk-IBYBTTYK.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1JQllCVFRZSy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8tbG9naW4vLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1JQllCVFRZSy5tanM/NGYyYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvcmVzcG9uc2VVdGlscy50c1xudmFyIFJFU1BPTlNFX1NUQVRVU19DT0RFU19XSVRIT1VUX0JPRFkgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIDEwMSxcbiAgMTAzLFxuICAyMDQsXG4gIDIwNSxcbiAgMzA0XG5dKTtcbmZ1bmN0aW9uIGlzUmVzcG9uc2VXaXRob3V0Qm9keShzdGF0dXMpIHtcbiAgcmV0dXJuIFJFU1BPTlNFX1NUQVRVU19DT0RFU19XSVRIT1VUX0JPRFkuaGFzKHN0YXR1cyk7XG59XG5cbmV4cG9ydCB7XG4gIGlzUmVzcG9uc2VXaXRob3V0Qm9keVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNodW5rLUlCWUJUVFlLLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-IBYBTTYK.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-OUWBQF3Z.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-OUWBQF3Z.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emitAsync: () => (/* binding */ emitAsync),\n/* harmony export */   toInteractiveRequest: () => (/* binding */ toInteractiveRequest)\n/* harmony export */ });\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @open-draft/deferred-promise */ \"(ssr)/./node_modules/@open-draft/deferred-promise/build/index.mjs\");\n// src/utils/RequestController.ts\n\n\nvar RequestController = class {\n  constructor(request) {\n    this.request = request;\n    this.responsePromise = new _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_1__.DeferredPromise();\n  }\n  respondWith(response) {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_0__.invariant)(\n      this.responsePromise.state === \"pending\",\n      'Failed to respond to \"%s %s\" request: the \"request\" event has already been responded to.',\n      this.request.method,\n      this.request.url\n    );\n    this.responsePromise.resolve(response);\n  }\n};\n\n// src/utils/toInteractiveRequest.ts\nfunction toInteractiveRequest(request) {\n  const requestController = new RequestController(request);\n  Reflect.set(\n    request,\n    \"respondWith\",\n    requestController.respondWith.bind(requestController)\n  );\n  return {\n    interactiveRequest: request,\n    requestController\n  };\n}\n\n// src/utils/emitAsync.ts\nasync function emitAsync(emitter, eventName, ...data) {\n  const listners = emitter.listeners(eventName);\n  if (listners.length === 0) {\n    return;\n  }\n  for (const listener of listners) {\n    await listener.apply(emitter, data);\n  }\n}\n\n\n//# sourceMappingURL=chunk-OUWBQF3Z.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1PVVdCUUYzWi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ3VDO0FBQ3dCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5RUFBZTtBQUM5QztBQUNBO0FBQ0EsSUFBSSxxREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBS0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8tbG9naW4vLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1PVVdCUUYzWi5tanM/ZjkxYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvUmVxdWVzdENvbnRyb2xsZXIudHNcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gXCJvdXR2YXJpYW50XCI7XG5pbXBvcnQgeyBEZWZlcnJlZFByb21pc2UgfSBmcm9tIFwiQG9wZW4tZHJhZnQvZGVmZXJyZWQtcHJvbWlzZVwiO1xudmFyIFJlcXVlc3RDb250cm9sbGVyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXF1ZXN0KSB7XG4gICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgICB0aGlzLnJlc3BvbnNlUHJvbWlzZSA9IG5ldyBEZWZlcnJlZFByb21pc2UoKTtcbiAgfVxuICByZXNwb25kV2l0aChyZXNwb25zZSkge1xuICAgIGludmFyaWFudChcbiAgICAgIHRoaXMucmVzcG9uc2VQcm9taXNlLnN0YXRlID09PSBcInBlbmRpbmdcIixcbiAgICAgICdGYWlsZWQgdG8gcmVzcG9uZCB0byBcIiVzICVzXCIgcmVxdWVzdDogdGhlIFwicmVxdWVzdFwiIGV2ZW50IGhhcyBhbHJlYWR5IGJlZW4gcmVzcG9uZGVkIHRvLicsXG4gICAgICB0aGlzLnJlcXVlc3QubWV0aG9kLFxuICAgICAgdGhpcy5yZXF1ZXN0LnVybFxuICAgICk7XG4gICAgdGhpcy5yZXNwb25zZVByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gIH1cbn07XG5cbi8vIHNyYy91dGlscy90b0ludGVyYWN0aXZlUmVxdWVzdC50c1xuZnVuY3Rpb24gdG9JbnRlcmFjdGl2ZVJlcXVlc3QocmVxdWVzdCkge1xuICBjb25zdCByZXF1ZXN0Q29udHJvbGxlciA9IG5ldyBSZXF1ZXN0Q29udHJvbGxlcihyZXF1ZXN0KTtcbiAgUmVmbGVjdC5zZXQoXG4gICAgcmVxdWVzdCxcbiAgICBcInJlc3BvbmRXaXRoXCIsXG4gICAgcmVxdWVzdENvbnRyb2xsZXIucmVzcG9uZFdpdGguYmluZChyZXF1ZXN0Q29udHJvbGxlcilcbiAgKTtcbiAgcmV0dXJuIHtcbiAgICBpbnRlcmFjdGl2ZVJlcXVlc3Q6IHJlcXVlc3QsXG4gICAgcmVxdWVzdENvbnRyb2xsZXJcbiAgfTtcbn1cblxuLy8gc3JjL3V0aWxzL2VtaXRBc3luYy50c1xuYXN5bmMgZnVuY3Rpb24gZW1pdEFzeW5jKGVtaXR0ZXIsIGV2ZW50TmFtZSwgLi4uZGF0YSkge1xuICBjb25zdCBsaXN0bmVycyA9IGVtaXR0ZXIubGlzdGVuZXJzKGV2ZW50TmFtZSk7XG4gIGlmIChsaXN0bmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0bmVycykge1xuICAgIGF3YWl0IGxpc3RlbmVyLmFwcGx5KGVtaXR0ZXIsIGRhdGEpO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIHRvSW50ZXJhY3RpdmVSZXF1ZXN0LFxuICBlbWl0QXN5bmNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1PVVdCUUYzWi5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-OUWBQF3Z.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INTERNAL_REQUEST_ID_HEADER_NAME: () => (/* binding */ INTERNAL_REQUEST_ID_HEADER_NAME),\n/* harmony export */   Interceptor: () => (/* binding */ Interceptor),\n/* harmony export */   InterceptorReadyState: () => (/* binding */ InterceptorReadyState),\n/* harmony export */   createRequestId: () => (/* binding */ createRequestId),\n/* harmony export */   deleteGlobalSymbol: () => (/* binding */ deleteGlobalSymbol),\n/* harmony export */   getGlobalSymbol: () => (/* binding */ getGlobalSymbol)\n/* harmony export */ });\n/* harmony import */ var _open_draft_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @open-draft/logger */ \"(ssr)/./node_modules/@open-draft/logger/lib/index.mjs\");\n/* harmony import */ var strict_event_emitter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! strict-event-emitter */ \"(ssr)/./node_modules/strict-event-emitter/lib/index.mjs\");\n// src/Interceptor.ts\n\n\nvar INTERNAL_REQUEST_ID_HEADER_NAME = \"x-interceptors-internal-request-id\";\nfunction getGlobalSymbol(symbol) {\n  return (\n    // @ts-ignore https://github.com/Microsoft/TypeScript/issues/24587\n    globalThis[symbol] || void 0\n  );\n}\nfunction setGlobalSymbol(symbol, value) {\n  globalThis[symbol] = value;\n}\nfunction deleteGlobalSymbol(symbol) {\n  delete globalThis[symbol];\n}\nvar InterceptorReadyState = /* @__PURE__ */ ((InterceptorReadyState2) => {\n  InterceptorReadyState2[\"INACTIVE\"] = \"INACTIVE\";\n  InterceptorReadyState2[\"APPLYING\"] = \"APPLYING\";\n  InterceptorReadyState2[\"APPLIED\"] = \"APPLIED\";\n  InterceptorReadyState2[\"DISPOSING\"] = \"DISPOSING\";\n  InterceptorReadyState2[\"DISPOSED\"] = \"DISPOSED\";\n  return InterceptorReadyState2;\n})(InterceptorReadyState || {});\nvar Interceptor = class {\n  constructor(symbol) {\n    this.symbol = symbol;\n    this.readyState = \"INACTIVE\" /* INACTIVE */;\n    this.emitter = new strict_event_emitter__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    this.subscriptions = [];\n    this.logger = new _open_draft_logger__WEBPACK_IMPORTED_MODULE_0__.Logger(symbol.description);\n    this.emitter.setMaxListeners(0);\n    this.logger.info(\"constructing the interceptor...\");\n  }\n  /**\n   * Determine if this interceptor can be applied\n   * in the current environment.\n   */\n  checkEnvironment() {\n    return true;\n  }\n  /**\n   * Apply this interceptor to the current process.\n   * Returns an already running interceptor instance if it's present.\n   */\n  apply() {\n    const logger = this.logger.extend(\"apply\");\n    logger.info(\"applying the interceptor...\");\n    if (this.readyState === \"APPLIED\" /* APPLIED */) {\n      logger.info(\"intercepted already applied!\");\n      return;\n    }\n    const shouldApply = this.checkEnvironment();\n    if (!shouldApply) {\n      logger.info(\"the interceptor cannot be applied in this environment!\");\n      return;\n    }\n    this.readyState = \"APPLYING\" /* APPLYING */;\n    const runningInstance = this.getInstance();\n    if (runningInstance) {\n      logger.info(\"found a running instance, reusing...\");\n      this.on = (event, listener) => {\n        logger.info('proxying the \"%s\" listener', event);\n        runningInstance.emitter.addListener(event, listener);\n        this.subscriptions.push(() => {\n          runningInstance.emitter.removeListener(event, listener);\n          logger.info('removed proxied \"%s\" listener!', event);\n        });\n        return this;\n      };\n      this.readyState = \"APPLIED\" /* APPLIED */;\n      return;\n    }\n    logger.info(\"no running instance found, setting up a new instance...\");\n    this.setup();\n    this.setInstance();\n    this.readyState = \"APPLIED\" /* APPLIED */;\n  }\n  /**\n   * Setup the module augments and stubs necessary for this interceptor.\n   * This method is not run if there's a running interceptor instance\n   * to prevent instantiating an interceptor multiple times.\n   */\n  setup() {\n  }\n  /**\n   * Listen to the interceptor's public events.\n   */\n  on(event, listener) {\n    const logger = this.logger.extend(\"on\");\n    if (this.readyState === \"DISPOSING\" /* DISPOSING */ || this.readyState === \"DISPOSED\" /* DISPOSED */) {\n      logger.info(\"cannot listen to events, already disposed!\");\n      return this;\n    }\n    logger.info('adding \"%s\" event listener:', event, listener);\n    this.emitter.on(event, listener);\n    return this;\n  }\n  once(event, listener) {\n    this.emitter.once(event, listener);\n    return this;\n  }\n  off(event, listener) {\n    this.emitter.off(event, listener);\n    return this;\n  }\n  removeAllListeners(event) {\n    this.emitter.removeAllListeners(event);\n    return this;\n  }\n  /**\n   * Disposes of any side-effects this interceptor has introduced.\n   */\n  dispose() {\n    const logger = this.logger.extend(\"dispose\");\n    if (this.readyState === \"DISPOSED\" /* DISPOSED */) {\n      logger.info(\"cannot dispose, already disposed!\");\n      return;\n    }\n    logger.info(\"disposing the interceptor...\");\n    this.readyState = \"DISPOSING\" /* DISPOSING */;\n    if (!this.getInstance()) {\n      logger.info(\"no interceptors running, skipping dispose...\");\n      return;\n    }\n    this.clearInstance();\n    logger.info(\"global symbol deleted:\", getGlobalSymbol(this.symbol));\n    if (this.subscriptions.length > 0) {\n      logger.info(\"disposing of %d subscriptions...\", this.subscriptions.length);\n      for (const dispose of this.subscriptions) {\n        dispose();\n      }\n      this.subscriptions = [];\n      logger.info(\"disposed of all subscriptions!\", this.subscriptions.length);\n    }\n    this.emitter.removeAllListeners();\n    logger.info(\"destroyed the listener!\");\n    this.readyState = \"DISPOSED\" /* DISPOSED */;\n  }\n  getInstance() {\n    var _a;\n    const instance = getGlobalSymbol(this.symbol);\n    this.logger.info(\"retrieved global instance:\", (_a = instance == null ? void 0 : instance.constructor) == null ? void 0 : _a.name);\n    return instance;\n  }\n  setInstance() {\n    setGlobalSymbol(this.symbol, this);\n    this.logger.info(\"set global instance!\", this.symbol.description);\n  }\n  clearInstance() {\n    deleteGlobalSymbol(this.symbol);\n    this.logger.info(\"cleared global instance!\", this.symbol.description);\n  }\n};\n\n// src/createRequestId.ts\nfunction createRequestId() {\n  return Math.random().toString(16).slice(2);\n}\n\n\n//# sourceMappingURL=chunk-QED3Q6Z2.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1RRUQzUTZaMi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUM0QztBQUNHO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDZCQUE2QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix5REFBTztBQUM5QjtBQUNBLHNCQUFzQixzREFBTTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFTRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVtby1sb2dpbi8uL25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2NodW5rLVFFRDNRNloyLm1qcz8xNmNjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9JbnRlcmNlcHRvci50c1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIkBvcGVuLWRyYWZ0L2xvZ2dlclwiO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gXCJzdHJpY3QtZXZlbnQtZW1pdHRlclwiO1xudmFyIElOVEVSTkFMX1JFUVVFU1RfSURfSEVBREVSX05BTUUgPSBcIngtaW50ZXJjZXB0b3JzLWludGVybmFsLXJlcXVlc3QtaWRcIjtcbmZ1bmN0aW9uIGdldEdsb2JhbFN5bWJvbChzeW1ib2wpIHtcbiAgcmV0dXJuIChcbiAgICAvLyBAdHMtaWdub3JlIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMjQ1ODdcbiAgICBnbG9iYWxUaGlzW3N5bWJvbF0gfHwgdm9pZCAwXG4gICk7XG59XG5mdW5jdGlvbiBzZXRHbG9iYWxTeW1ib2woc3ltYm9sLCB2YWx1ZSkge1xuICBnbG9iYWxUaGlzW3N5bWJvbF0gPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZUdsb2JhbFN5bWJvbChzeW1ib2wpIHtcbiAgZGVsZXRlIGdsb2JhbFRoaXNbc3ltYm9sXTtcbn1cbnZhciBJbnRlcmNlcHRvclJlYWR5U3RhdGUgPSAvKiBAX19QVVJFX18gKi8gKChJbnRlcmNlcHRvclJlYWR5U3RhdGUyKSA9PiB7XG4gIEludGVyY2VwdG9yUmVhZHlTdGF0ZTJbXCJJTkFDVElWRVwiXSA9IFwiSU5BQ1RJVkVcIjtcbiAgSW50ZXJjZXB0b3JSZWFkeVN0YXRlMltcIkFQUExZSU5HXCJdID0gXCJBUFBMWUlOR1wiO1xuICBJbnRlcmNlcHRvclJlYWR5U3RhdGUyW1wiQVBQTElFRFwiXSA9IFwiQVBQTElFRFwiO1xuICBJbnRlcmNlcHRvclJlYWR5U3RhdGUyW1wiRElTUE9TSU5HXCJdID0gXCJESVNQT1NJTkdcIjtcbiAgSW50ZXJjZXB0b3JSZWFkeVN0YXRlMltcIkRJU1BPU0VEXCJdID0gXCJESVNQT1NFRFwiO1xuICByZXR1cm4gSW50ZXJjZXB0b3JSZWFkeVN0YXRlMjtcbn0pKEludGVyY2VwdG9yUmVhZHlTdGF0ZSB8fCB7fSk7XG52YXIgSW50ZXJjZXB0b3IgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHN5bWJvbCkge1xuICAgIHRoaXMuc3ltYm9sID0gc3ltYm9sO1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiSU5BQ1RJVkVcIiAvKiBJTkFDVElWRSAqLztcbiAgICB0aGlzLmVtaXR0ZXIgPSBuZXcgRW1pdHRlcigpO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcihzeW1ib2wuZGVzY3JpcHRpb24pO1xuICAgIHRoaXMuZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoMCk7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcImNvbnN0cnVjdGluZyB0aGUgaW50ZXJjZXB0b3IuLi5cIik7XG4gIH1cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGlzIGludGVyY2VwdG9yIGNhbiBiZSBhcHBsaWVkXG4gICAqIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LlxuICAgKi9cbiAgY2hlY2tFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQXBwbHkgdGhpcyBpbnRlcmNlcHRvciB0byB0aGUgY3VycmVudCBwcm9jZXNzLlxuICAgKiBSZXR1cm5zIGFuIGFscmVhZHkgcnVubmluZyBpbnRlcmNlcHRvciBpbnN0YW5jZSBpZiBpdCdzIHByZXNlbnQuXG4gICAqL1xuICBhcHBseSgpIHtcbiAgICBjb25zdCBsb2dnZXIgPSB0aGlzLmxvZ2dlci5leHRlbmQoXCJhcHBseVwiKTtcbiAgICBsb2dnZXIuaW5mbyhcImFwcGx5aW5nIHRoZSBpbnRlcmNlcHRvci4uLlwiKTtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBcIkFQUExJRURcIiAvKiBBUFBMSUVEICovKSB7XG4gICAgICBsb2dnZXIuaW5mbyhcImludGVyY2VwdGVkIGFscmVhZHkgYXBwbGllZCFcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNob3VsZEFwcGx5ID0gdGhpcy5jaGVja0Vudmlyb25tZW50KCk7XG4gICAgaWYgKCFzaG91bGRBcHBseSkge1xuICAgICAgbG9nZ2VyLmluZm8oXCJ0aGUgaW50ZXJjZXB0b3IgY2Fubm90IGJlIGFwcGxpZWQgaW4gdGhpcyBlbnZpcm9ubWVudCFcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiQVBQTFlJTkdcIiAvKiBBUFBMWUlORyAqLztcbiAgICBjb25zdCBydW5uaW5nSW5zdGFuY2UgPSB0aGlzLmdldEluc3RhbmNlKCk7XG4gICAgaWYgKHJ1bm5pbmdJbnN0YW5jZSkge1xuICAgICAgbG9nZ2VyLmluZm8oXCJmb3VuZCBhIHJ1bm5pbmcgaW5zdGFuY2UsIHJldXNpbmcuLi5cIik7XG4gICAgICB0aGlzLm9uID0gKGV2ZW50LCBsaXN0ZW5lcikgPT4ge1xuICAgICAgICBsb2dnZXIuaW5mbygncHJveHlpbmcgdGhlIFwiJXNcIiBsaXN0ZW5lcicsIGV2ZW50KTtcbiAgICAgICAgcnVubmluZ0luc3RhbmNlLmVtaXR0ZXIuYWRkTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goKCkgPT4ge1xuICAgICAgICAgIHJ1bm5pbmdJbnN0YW5jZS5lbWl0dGVyLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgICAgbG9nZ2VyLmluZm8oJ3JlbW92ZWQgcHJveGllZCBcIiVzXCIgbGlzdGVuZXIhJywgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuICAgICAgdGhpcy5yZWFkeVN0YXRlID0gXCJBUFBMSUVEXCIgLyogQVBQTElFRCAqLztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oXCJubyBydW5uaW5nIGluc3RhbmNlIGZvdW5kLCBzZXR0aW5nIHVwIGEgbmV3IGluc3RhbmNlLi4uXCIpO1xuICAgIHRoaXMuc2V0dXAoKTtcbiAgICB0aGlzLnNldEluc3RhbmNlKCk7XG4gICAgdGhpcy5yZWFkeVN0YXRlID0gXCJBUFBMSUVEXCIgLyogQVBQTElFRCAqLztcbiAgfVxuICAvKipcbiAgICogU2V0dXAgdGhlIG1vZHVsZSBhdWdtZW50cyBhbmQgc3R1YnMgbmVjZXNzYXJ5IGZvciB0aGlzIGludGVyY2VwdG9yLlxuICAgKiBUaGlzIG1ldGhvZCBpcyBub3QgcnVuIGlmIHRoZXJlJ3MgYSBydW5uaW5nIGludGVyY2VwdG9yIGluc3RhbmNlXG4gICAqIHRvIHByZXZlbnQgaW5zdGFudGlhdGluZyBhbiBpbnRlcmNlcHRvciBtdWx0aXBsZSB0aW1lcy5cbiAgICovXG4gIHNldHVwKCkge1xuICB9XG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gdGhlIGludGVyY2VwdG9yJ3MgcHVibGljIGV2ZW50cy5cbiAgICovXG4gIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IGxvZ2dlciA9IHRoaXMubG9nZ2VyLmV4dGVuZChcIm9uXCIpO1xuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFwiRElTUE9TSU5HXCIgLyogRElTUE9TSU5HICovIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gXCJESVNQT1NFRFwiIC8qIERJU1BPU0VEICovKSB7XG4gICAgICBsb2dnZXIuaW5mbyhcImNhbm5vdCBsaXN0ZW4gdG8gZXZlbnRzLCBhbHJlYWR5IGRpc3Bvc2VkIVwiKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBsb2dnZXIuaW5mbygnYWRkaW5nIFwiJXNcIiBldmVudCBsaXN0ZW5lcjonLCBldmVudCwgbGlzdGVuZXIpO1xuICAgIHRoaXMuZW1pdHRlci5vbihldmVudCwgbGlzdGVuZXIpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIG9uY2UoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgdGhpcy5lbWl0dGVyLm9uY2UoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgdGhpcy5lbWl0dGVyLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCkge1xuICAgIHRoaXMuZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEaXNwb3NlcyBvZiBhbnkgc2lkZS1lZmZlY3RzIHRoaXMgaW50ZXJjZXB0b3IgaGFzIGludHJvZHVjZWQuXG4gICAqL1xuICBkaXNwb3NlKCkge1xuICAgIGNvbnN0IGxvZ2dlciA9IHRoaXMubG9nZ2VyLmV4dGVuZChcImRpc3Bvc2VcIik7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gXCJESVNQT1NFRFwiIC8qIERJU1BPU0VEICovKSB7XG4gICAgICBsb2dnZXIuaW5mbyhcImNhbm5vdCBkaXNwb3NlLCBhbHJlYWR5IGRpc3Bvc2VkIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oXCJkaXNwb3NpbmcgdGhlIGludGVyY2VwdG9yLi4uXCIpO1xuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFwiRElTUE9TSU5HXCIgLyogRElTUE9TSU5HICovO1xuICAgIGlmICghdGhpcy5nZXRJbnN0YW5jZSgpKSB7XG4gICAgICBsb2dnZXIuaW5mbyhcIm5vIGludGVyY2VwdG9ycyBydW5uaW5nLCBza2lwcGluZyBkaXNwb3NlLi4uXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNsZWFySW5zdGFuY2UoKTtcbiAgICBsb2dnZXIuaW5mbyhcImdsb2JhbCBzeW1ib2wgZGVsZXRlZDpcIiwgZ2V0R2xvYmFsU3ltYm9sKHRoaXMuc3ltYm9sKSk7XG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBsb2dnZXIuaW5mbyhcImRpc3Bvc2luZyBvZiAlZCBzdWJzY3JpcHRpb25zLi4uXCIsIHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGgpO1xuICAgICAgZm9yIChjb25zdCBkaXNwb3NlIG9mIHRoaXMuc3Vic2NyaXB0aW9ucykge1xuICAgICAgICBkaXNwb3NlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICAgIGxvZ2dlci5pbmZvKFwiZGlzcG9zZWQgb2YgYWxsIHN1YnNjcmlwdGlvbnMhXCIsIHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGgpO1xuICAgIH1cbiAgICB0aGlzLmVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgbG9nZ2VyLmluZm8oXCJkZXN0cm95ZWQgdGhlIGxpc3RlbmVyIVwiKTtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBcIkRJU1BPU0VEXCIgLyogRElTUE9TRUQgKi87XG4gIH1cbiAgZ2V0SW5zdGFuY2UoKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0R2xvYmFsU3ltYm9sKHRoaXMuc3ltYm9sKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmV0cmlldmVkIGdsb2JhbCBpbnN0YW5jZTpcIiwgKF9hID0gaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLmNvbnN0cnVjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EubmFtZSk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9XG4gIHNldEluc3RhbmNlKCkge1xuICAgIHNldEdsb2JhbFN5bWJvbCh0aGlzLnN5bWJvbCwgdGhpcyk7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcInNldCBnbG9iYWwgaW5zdGFuY2UhXCIsIHRoaXMuc3ltYm9sLmRlc2NyaXB0aW9uKTtcbiAgfVxuICBjbGVhckluc3RhbmNlKCkge1xuICAgIGRlbGV0ZUdsb2JhbFN5bWJvbCh0aGlzLnN5bWJvbCk7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcImNsZWFyZWQgZ2xvYmFsIGluc3RhbmNlIVwiLCB0aGlzLnN5bWJvbC5kZXNjcmlwdGlvbik7XG4gIH1cbn07XG5cbi8vIHNyYy9jcmVhdGVSZXF1ZXN0SWQudHNcbmZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RJZCgpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpO1xufVxuXG5leHBvcnQge1xuICBJTlRFUk5BTF9SRVFVRVNUX0lEX0hFQURFUl9OQU1FLFxuICBnZXRHbG9iYWxTeW1ib2wsXG4gIGRlbGV0ZUdsb2JhbFN5bWJvbCxcbiAgSW50ZXJjZXB0b3JSZWFkeVN0YXRlLFxuICBJbnRlcmNlcHRvcixcbiAgY3JlYXRlUmVxdWVzdElkXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstUUVEM1E2WjIubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-VUILOQBY.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/chunk-VUILOQBY.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLHttpRequestInterceptor: () => (/* binding */ XMLHttpRequestInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-6HYIRFX2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs\");\n/* harmony import */ var _chunk_IBYBTTYK_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-IBYBTTYK.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-IBYBTTYK.mjs\");\n/* harmony import */ var _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-HAGW22AN.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-HAGW22AN.mjs\");\n/* harmony import */ var _chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-OUWBQF3Z.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-OUWBQF3Z.mjs\");\n/* harmony import */ var _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-QED3Q6Z2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var _open_draft_until__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @open-draft/until */ \"(ssr)/./node_modules/@open-draft/until/lib/index.mjs\");\n/* harmony import */ var is_node_process__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! is-node-process */ \"(ssr)/./node_modules/is-node-process/lib/index.mjs\");\n\n\n\n\n\n\n// src/interceptors/XMLHttpRequest/index.ts\n\n\n// src/interceptors/XMLHttpRequest/XMLHttpRequestProxy.ts\n\n\n// src/interceptors/XMLHttpRequest/XMLHttpRequestController.ts\n\n\n\n// src/interceptors/XMLHttpRequest/utils/concatArrayBuffer.ts\nfunction concatArrayBuffer(left, right) {\n  const result = new Uint8Array(left.byteLength + right.byteLength);\n  result.set(left, 0);\n  result.set(right, left.byteLength);\n  return result;\n}\n\n// src/interceptors/XMLHttpRequest/polyfills/EventPolyfill.ts\nvar EventPolyfill = class {\n  constructor(type, options) {\n    this.AT_TARGET = 0;\n    this.BUBBLING_PHASE = 0;\n    this.CAPTURING_PHASE = 0;\n    this.NONE = 0;\n    this.type = \"\";\n    this.srcElement = null;\n    this.currentTarget = null;\n    this.eventPhase = 0;\n    this.isTrusted = true;\n    this.composed = false;\n    this.cancelable = true;\n    this.defaultPrevented = false;\n    this.bubbles = true;\n    this.lengthComputable = true;\n    this.loaded = 0;\n    this.total = 0;\n    this.cancelBubble = false;\n    this.returnValue = true;\n    this.type = type;\n    this.target = (options == null ? void 0 : options.target) || null;\n    this.currentTarget = (options == null ? void 0 : options.currentTarget) || null;\n    this.timeStamp = Date.now();\n  }\n  composedPath() {\n    return [];\n  }\n  initEvent(type, bubbles, cancelable) {\n    this.type = type;\n    this.bubbles = !!bubbles;\n    this.cancelable = !!cancelable;\n  }\n  preventDefault() {\n    this.defaultPrevented = true;\n  }\n  stopPropagation() {\n  }\n  stopImmediatePropagation() {\n  }\n};\n\n// src/interceptors/XMLHttpRequest/polyfills/ProgressEventPolyfill.ts\nvar ProgressEventPolyfill = class extends EventPolyfill {\n  constructor(type, init) {\n    super(type);\n    this.lengthComputable = (init == null ? void 0 : init.lengthComputable) || false;\n    this.composed = (init == null ? void 0 : init.composed) || false;\n    this.loaded = (init == null ? void 0 : init.loaded) || 0;\n    this.total = (init == null ? void 0 : init.total) || 0;\n  }\n};\n\n// src/interceptors/XMLHttpRequest/utils/createEvent.ts\nvar SUPPORTS_PROGRESS_EVENT = typeof ProgressEvent !== \"undefined\";\nfunction createEvent(target, type, init) {\n  const progressEvents = [\n    \"error\",\n    \"progress\",\n    \"loadstart\",\n    \"loadend\",\n    \"load\",\n    \"timeout\",\n    \"abort\"\n  ];\n  const ProgressEventClass = SUPPORTS_PROGRESS_EVENT ? ProgressEvent : ProgressEventPolyfill;\n  const event = progressEvents.includes(type) ? new ProgressEventClass(type, {\n    lengthComputable: true,\n    loaded: (init == null ? void 0 : init.loaded) || 0,\n    total: (init == null ? void 0 : init.total) || 0\n  }) : new EventPolyfill(type, {\n    target,\n    currentTarget: target\n  });\n  return event;\n}\n\n// src/utils/findPropertySource.ts\nfunction findPropertySource(target, propertyName) {\n  if (!(propertyName in target)) {\n    return null;\n  }\n  const hasProperty = Object.prototype.hasOwnProperty.call(target, propertyName);\n  if (hasProperty) {\n    return target;\n  }\n  const prototype = Reflect.getPrototypeOf(target);\n  return prototype ? findPropertySource(prototype, propertyName) : null;\n}\n\n// src/utils/createProxy.ts\nfunction createProxy(target, options) {\n  const proxy = new Proxy(target, optionsToProxyHandler(options));\n  return proxy;\n}\nfunction optionsToProxyHandler(options) {\n  const { constructorCall, methodCall, getProperty, setProperty } = options;\n  const handler = {};\n  if (typeof constructorCall !== \"undefined\") {\n    handler.construct = function(target, args, newTarget) {\n      const next = Reflect.construct.bind(null, target, args, newTarget);\n      return constructorCall.call(newTarget, args, next);\n    };\n  }\n  handler.set = function(target, propertyName, nextValue) {\n    const next = () => {\n      const propertySource = findPropertySource(target, propertyName) || target;\n      const ownDescriptors = Reflect.getOwnPropertyDescriptor(\n        propertySource,\n        propertyName\n      );\n      if (typeof (ownDescriptors == null ? void 0 : ownDescriptors.set) !== \"undefined\") {\n        ownDescriptors.set.apply(target, [nextValue]);\n        return true;\n      }\n      return Reflect.defineProperty(propertySource, propertyName, {\n        writable: true,\n        enumerable: true,\n        configurable: true,\n        value: nextValue\n      });\n    };\n    if (typeof setProperty !== \"undefined\") {\n      return setProperty.call(target, [propertyName, nextValue], next);\n    }\n    return next();\n  };\n  handler.get = function(target, propertyName, receiver) {\n    const next = () => target[propertyName];\n    const value = typeof getProperty !== \"undefined\" ? getProperty.call(target, [propertyName, receiver], next) : next();\n    if (typeof value === \"function\") {\n      return (...args) => {\n        const next2 = value.bind(target, ...args);\n        if (typeof methodCall !== \"undefined\") {\n          return methodCall.call(target, [propertyName, args], next2);\n        }\n        return next2();\n      };\n    }\n    return value;\n  };\n  return handler;\n}\n\n// src/interceptors/XMLHttpRequest/utils/isDomParserSupportedType.ts\nfunction isDomParserSupportedType(type) {\n  const supportedTypes = [\n    \"application/xhtml+xml\",\n    \"application/xml\",\n    \"image/svg+xml\",\n    \"text/html\",\n    \"text/xml\"\n  ];\n  return supportedTypes.some((supportedType) => {\n    return type.startsWith(supportedType);\n  });\n}\n\n// src/utils/parseJson.ts\nfunction parseJson(data) {\n  try {\n    const json = JSON.parse(data);\n    return json;\n  } catch (_) {\n    return null;\n  }\n}\n\n// src/interceptors/XMLHttpRequest/utils/createResponse.ts\nfunction createResponse(request, body) {\n  const responseBodyOrNull = (0,_chunk_IBYBTTYK_mjs__WEBPACK_IMPORTED_MODULE_1__.isResponseWithoutBody)(request.status) ? null : body;\n  return new Response(responseBodyOrNull, {\n    status: request.status,\n    statusText: request.statusText,\n    headers: createHeadersFromXMLHttpReqestHeaders(\n      request.getAllResponseHeaders()\n    )\n  });\n}\nfunction createHeadersFromXMLHttpReqestHeaders(headersString) {\n  const headers = new Headers();\n  const lines = headersString.split(/[\\r\\n]+/);\n  for (const line of lines) {\n    if (line.trim() === \"\") {\n      continue;\n    }\n    const [name, ...parts] = line.split(\": \");\n    const value = parts.join(\": \");\n    headers.append(name, value);\n  }\n  return headers;\n}\n\n// src/interceptors/XMLHttpRequest/XMLHttpRequestController.ts\nvar IS_MOCKED_RESPONSE = Symbol(\"isMockedResponse\");\nvar IS_NODE = (0,is_node_process__WEBPACK_IMPORTED_MODULE_7__.isNodeProcess)();\nvar XMLHttpRequestController = class {\n  constructor(initialRequest, logger) {\n    this.initialRequest = initialRequest;\n    this.logger = logger;\n    this.method = \"GET\";\n    this.url = null;\n    this.events = /* @__PURE__ */ new Map();\n    this.requestId = (0,_chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.createRequestId)();\n    this.requestHeaders = new Headers();\n    this.responseBuffer = new Uint8Array();\n    this.request = createProxy(initialRequest, {\n      setProperty: ([propertyName, nextValue], invoke) => {\n        switch (propertyName) {\n          case \"ontimeout\": {\n            const eventName = propertyName.slice(\n              2\n            );\n            this.request.addEventListener(eventName, nextValue);\n            return invoke();\n          }\n          default: {\n            return invoke();\n          }\n        }\n      },\n      methodCall: ([methodName, args], invoke) => {\n        var _a;\n        switch (methodName) {\n          case \"open\": {\n            const [method, url] = args;\n            if (typeof url === \"undefined\") {\n              this.method = \"GET\";\n              this.url = toAbsoluteUrl(method);\n            } else {\n              this.method = method;\n              this.url = toAbsoluteUrl(url);\n            }\n            this.logger = this.logger.extend(`${this.method} ${this.url.href}`);\n            this.logger.info(\"open\", this.method, this.url.href);\n            return invoke();\n          }\n          case \"addEventListener\": {\n            const [eventName, listener] = args;\n            this.registerEvent(eventName, listener);\n            this.logger.info(\"addEventListener\", eventName, listener);\n            return invoke();\n          }\n          case \"setRequestHeader\": {\n            const [name, value] = args;\n            this.requestHeaders.set(name, value);\n            this.logger.info(\"setRequestHeader\", name, value);\n            return invoke();\n          }\n          case \"send\": {\n            const [body] = args;\n            if (body != null) {\n              this.requestBody = typeof body === \"string\" ? (0,_chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_0__.encodeBuffer)(body) : body;\n            }\n            this.request.addEventListener(\"load\", () => {\n              if (typeof this.onResponse !== \"undefined\") {\n                const fetchResponse = createResponse(\n                  this.request,\n                  /**\n                   * The `response` property is the right way to read\n                   * the ambiguous response body, as the request's \"responseType\" may differ.\n                   * @see https://xhr.spec.whatwg.org/#the-response-attribute\n                   */\n                  this.request.response\n                );\n                this.onResponse.call(this, {\n                  response: fetchResponse,\n                  isMockedResponse: IS_MOCKED_RESPONSE in this.request,\n                  request: fetchRequest,\n                  requestId: this.requestId\n                });\n              }\n            });\n            const fetchRequest = this.toFetchApiRequest();\n            const onceRequestSettled = ((_a = this.onRequest) == null ? void 0 : _a.call(this, {\n              request: fetchRequest,\n              requestId: this.requestId\n            })) || Promise.resolve();\n            onceRequestSettled.finally(() => {\n              if (this.request.readyState < this.request.LOADING) {\n                this.logger.info(\n                  \"request callback settled but request has not been handled (readystate %d), performing as-is...\",\n                  this.request.readyState\n                );\n                if (IS_NODE) {\n                  this.request.setRequestHeader(\n                    _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.INTERNAL_REQUEST_ID_HEADER_NAME,\n                    this.requestId\n                  );\n                }\n                return invoke();\n              }\n            });\n            break;\n          }\n          default: {\n            return invoke();\n          }\n        }\n      }\n    });\n  }\n  registerEvent(eventName, listener) {\n    const prevEvents = this.events.get(eventName) || [];\n    const nextEvents = prevEvents.concat(listener);\n    this.events.set(eventName, nextEvents);\n    this.logger.info('registered event \"%s\"', eventName, listener);\n  }\n  /**\n   * Responds to the current request with the given\n   * Fetch API `Response` instance.\n   */\n  respondWith(response) {\n    this.logger.info(\n      \"responding with a mocked response: %d %s\",\n      response.status,\n      response.statusText\n    );\n    define(this.request, IS_MOCKED_RESPONSE, true);\n    define(this.request, \"status\", response.status);\n    define(this.request, \"statusText\", response.statusText);\n    define(this.request, \"responseURL\", this.url.href);\n    this.request.getResponseHeader = new Proxy(this.request.getResponseHeader, {\n      apply: (_, __, args) => {\n        this.logger.info(\"getResponseHeader\", args[0]);\n        if (this.request.readyState < this.request.HEADERS_RECEIVED) {\n          this.logger.info(\"headers not received yet, returning null\");\n          return null;\n        }\n        const headerValue = response.headers.get(args[0]);\n        this.logger.info(\n          'resolved response header \"%s\" to',\n          args[0],\n          headerValue\n        );\n        return headerValue;\n      }\n    });\n    this.request.getAllResponseHeaders = new Proxy(\n      this.request.getAllResponseHeaders,\n      {\n        apply: () => {\n          this.logger.info(\"getAllResponseHeaders\");\n          if (this.request.readyState < this.request.HEADERS_RECEIVED) {\n            this.logger.info(\"headers not received yet, returning empty string\");\n            return \"\";\n          }\n          const headersList = Array.from(response.headers.entries());\n          const allHeaders = headersList.map(([headerName, headerValue]) => {\n            return `${headerName}: ${headerValue}`;\n          }).join(\"\\r\\n\");\n          this.logger.info(\"resolved all response headers to\", allHeaders);\n          return allHeaders;\n        }\n      }\n    );\n    Object.defineProperties(this.request, {\n      response: {\n        enumerable: true,\n        configurable: false,\n        get: () => this.response\n      },\n      responseText: {\n        enumerable: true,\n        configurable: false,\n        get: () => this.responseText\n      },\n      responseXML: {\n        enumerable: true,\n        configurable: false,\n        get: () => this.responseXML\n      }\n    });\n    const totalResponseBodyLength = response.headers.has(\"Content-Length\") ? Number(response.headers.get(\"Content-Length\")) : (\n      /**\n       * @todo Infer the response body length from the response body.\n       */\n      void 0\n    );\n    this.logger.info(\"calculated response body length\", totalResponseBodyLength);\n    this.trigger(\"loadstart\", {\n      loaded: 0,\n      total: totalResponseBodyLength\n    });\n    this.setReadyState(this.request.HEADERS_RECEIVED);\n    this.setReadyState(this.request.LOADING);\n    const finalizeResponse = () => {\n      this.logger.info(\"finalizing the mocked response...\");\n      this.setReadyState(this.request.DONE);\n      this.trigger(\"load\", {\n        loaded: this.responseBuffer.byteLength,\n        total: totalResponseBodyLength\n      });\n      this.trigger(\"loadend\", {\n        loaded: this.responseBuffer.byteLength,\n        total: totalResponseBodyLength\n      });\n    };\n    if (response.body) {\n      this.logger.info(\"mocked response has body, streaming...\");\n      const reader = response.body.getReader();\n      const readNextResponseBodyChunk = async () => {\n        const { value, done } = await reader.read();\n        if (done) {\n          this.logger.info(\"response body stream done!\");\n          finalizeResponse();\n          return;\n        }\n        if (value) {\n          this.logger.info(\"read response body chunk:\", value);\n          this.responseBuffer = concatArrayBuffer(this.responseBuffer, value);\n          this.trigger(\"progress\", {\n            loaded: this.responseBuffer.byteLength,\n            total: totalResponseBodyLength\n          });\n        }\n        readNextResponseBodyChunk();\n      };\n      readNextResponseBodyChunk();\n    } else {\n      finalizeResponse();\n    }\n  }\n  responseBufferToText() {\n    return (0,_chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_0__.decodeBuffer)(this.responseBuffer);\n  }\n  get response() {\n    this.logger.info(\n      \"getResponse (responseType: %s)\",\n      this.request.responseType\n    );\n    if (this.request.readyState !== this.request.DONE) {\n      return null;\n    }\n    switch (this.request.responseType) {\n      case \"json\": {\n        const responseJson = parseJson(this.responseBufferToText());\n        this.logger.info(\"resolved response JSON\", responseJson);\n        return responseJson;\n      }\n      case \"arraybuffer\": {\n        const arrayBuffer = (0,_chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_0__.toArrayBuffer)(this.responseBuffer);\n        this.logger.info(\"resolved response ArrayBuffer\", arrayBuffer);\n        return arrayBuffer;\n      }\n      case \"blob\": {\n        const mimeType = this.request.getResponseHeader(\"Content-Type\") || \"text/plain\";\n        const responseBlob = new Blob([this.responseBufferToText()], {\n          type: mimeType\n        });\n        this.logger.info(\n          \"resolved response Blob (mime type: %s)\",\n          responseBlob,\n          mimeType\n        );\n        return responseBlob;\n      }\n      default: {\n        const responseText = this.responseBufferToText();\n        this.logger.info(\n          'resolving \"%s\" response type as text',\n          this.request.responseType,\n          responseText\n        );\n        return responseText;\n      }\n    }\n  }\n  get responseText() {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_5__.invariant)(\n      this.request.responseType === \"\" || this.request.responseType === \"text\",\n      \"InvalidStateError: The object is in invalid state.\"\n    );\n    if (this.request.readyState !== this.request.LOADING && this.request.readyState !== this.request.DONE) {\n      return \"\";\n    }\n    const responseText = this.responseBufferToText();\n    this.logger.info('getResponseText: \"%s\"', responseText);\n    return responseText;\n  }\n  get responseXML() {\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_5__.invariant)(\n      this.request.responseType === \"\" || this.request.responseType === \"document\",\n      \"InvalidStateError: The object is in invalid state.\"\n    );\n    if (this.request.readyState !== this.request.DONE) {\n      return null;\n    }\n    const contentType = this.request.getResponseHeader(\"Content-Type\") || \"\";\n    if (typeof DOMParser === \"undefined\") {\n      console.warn(\n        \"Cannot retrieve XMLHttpRequest response body as XML: DOMParser is not defined. You are likely using an environment that is not browser or does not polyfill browser globals correctly.\"\n      );\n      return null;\n    }\n    if (isDomParserSupportedType(contentType)) {\n      return new DOMParser().parseFromString(\n        this.responseBufferToText(),\n        contentType\n      );\n    }\n    return null;\n  }\n  errorWith(error) {\n    this.logger.info(\"responding with an error\");\n    this.setReadyState(this.request.DONE);\n    this.trigger(\"error\");\n    this.trigger(\"loadend\");\n  }\n  /**\n   * Transitions this request's `readyState` to the given one.\n   */\n  setReadyState(nextReadyState) {\n    this.logger.info(\n      \"setReadyState: %d -> %d\",\n      this.request.readyState,\n      nextReadyState\n    );\n    if (this.request.readyState === nextReadyState) {\n      this.logger.info(\"ready state identical, skipping transition...\");\n      return;\n    }\n    define(this.request, \"readyState\", nextReadyState);\n    this.logger.info(\"set readyState to: %d\", nextReadyState);\n    if (nextReadyState !== this.request.UNSENT) {\n      this.logger.info('triggerring \"readystatechange\" event...');\n      this.trigger(\"readystatechange\");\n    }\n  }\n  /**\n   * Triggers given event on the `XMLHttpRequest` instance.\n   */\n  trigger(eventName, options) {\n    const callback = this.request[`on${eventName}`];\n    const event = createEvent(this.request, eventName, options);\n    this.logger.info('trigger \"%s\"', eventName, options || \"\");\n    if (typeof callback === \"function\") {\n      this.logger.info('found a direct \"%s\" callback, calling...', eventName);\n      callback.call(this.request, event);\n    }\n    for (const [registeredEventName, listeners] of this.events) {\n      if (registeredEventName === eventName) {\n        this.logger.info(\n          'found %d listener(s) for \"%s\" event, calling...',\n          listeners.length,\n          eventName\n        );\n        listeners.forEach((listener) => listener.call(this.request, event));\n      }\n    }\n  }\n  /**\n   * Converts this `XMLHttpRequest` instance into a Fetch API `Request` instance.\n   */\n  toFetchApiRequest() {\n    this.logger.info(\"converting request to a Fetch API Request...\");\n    const fetchRequest = new Request(this.url.href, {\n      method: this.method,\n      headers: this.requestHeaders,\n      /**\n       * @see https://xhr.spec.whatwg.org/#cross-origin-credentials\n       */\n      credentials: this.request.withCredentials ? \"include\" : \"same-origin\",\n      body: [\"GET\", \"HEAD\"].includes(this.method) ? null : this.requestBody\n    });\n    const proxyHeaders = createProxy(fetchRequest.headers, {\n      methodCall: ([methodName, args], invoke) => {\n        switch (methodName) {\n          case \"append\":\n          case \"set\": {\n            const [headerName, headerValue] = args;\n            this.request.setRequestHeader(headerName, headerValue);\n            break;\n          }\n          case \"delete\": {\n            const [headerName] = args;\n            console.warn(\n              `XMLHttpRequest: Cannot remove a \"${headerName}\" header from the Fetch API representation of the \"${fetchRequest.method} ${fetchRequest.url}\" request. XMLHttpRequest headers cannot be removed.`\n            );\n            break;\n          }\n        }\n        return invoke();\n      }\n    });\n    define(fetchRequest, \"headers\", proxyHeaders);\n    this.logger.info(\"converted request to a Fetch API Request!\", fetchRequest);\n    return fetchRequest;\n  }\n};\nfunction toAbsoluteUrl(url) {\n  if (typeof location === \"undefined\") {\n    return new URL(url);\n  }\n  return new URL(url.toString(), location.href);\n}\nfunction define(target, property, value) {\n  Reflect.defineProperty(target, property, {\n    // Ensure writable properties to allow redefining readonly properties.\n    writable: true,\n    enumerable: true,\n    value\n  });\n}\n\n// src/interceptors/XMLHttpRequest/XMLHttpRequestProxy.ts\nfunction createXMLHttpRequestProxy({\n  emitter,\n  logger\n}) {\n  const XMLHttpRequestProxy = new Proxy(globalThis.XMLHttpRequest, {\n    construct(target, args, newTarget) {\n      logger.info(\"constructed new XMLHttpRequest\");\n      const originalRequest = Reflect.construct(\n        target,\n        args,\n        newTarget\n      );\n      const prototypeDescriptors = Object.getOwnPropertyDescriptors(\n        target.prototype\n      );\n      for (const propertyName in prototypeDescriptors) {\n        Reflect.defineProperty(\n          originalRequest,\n          propertyName,\n          prototypeDescriptors[propertyName]\n        );\n      }\n      const xhrRequestController = new XMLHttpRequestController(\n        originalRequest,\n        logger\n      );\n      xhrRequestController.onRequest = async function({ request, requestId }) {\n        const { interactiveRequest, requestController } = (0,_chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_3__.toInteractiveRequest)(request);\n        this.logger.info(\"awaiting mocked response...\");\n        emitter.once(\"request\", ({ requestId: pendingRequestId }) => {\n          if (pendingRequestId !== requestId) {\n            return;\n          }\n          if (requestController.responsePromise.state === \"pending\") {\n            requestController.respondWith(void 0);\n          }\n        });\n        const resolverResult = await (0,_open_draft_until__WEBPACK_IMPORTED_MODULE_6__.until)(async () => {\n          this.logger.info(\n            'emitting the \"request\" event for %s listener(s)...',\n            emitter.listenerCount(\"request\")\n          );\n          await (0,_chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_3__.emitAsync)(emitter, \"request\", {\n            request: interactiveRequest,\n            requestId\n          });\n          this.logger.info('all \"request\" listeners settled!');\n          const mockedResponse2 = await requestController.responsePromise;\n          this.logger.info(\"event.respondWith called with:\", mockedResponse2);\n          return mockedResponse2;\n        });\n        if (resolverResult.error) {\n          this.logger.info(\n            \"request listener threw an exception, aborting request...\",\n            resolverResult.error\n          );\n          xhrRequestController.errorWith(resolverResult.error);\n          return;\n        }\n        const mockedResponse = resolverResult.data;\n        if (typeof mockedResponse !== \"undefined\") {\n          this.logger.info(\n            \"received mocked response: %d %s\",\n            mockedResponse.status,\n            mockedResponse.statusText\n          );\n          if (mockedResponse.type === \"error\") {\n            this.logger.info(\n              \"received a network error response, rejecting the request promise...\"\n            );\n            xhrRequestController.errorWith(new TypeError(\"Network error\"));\n            return;\n          }\n          return xhrRequestController.respondWith(mockedResponse);\n        }\n        this.logger.info(\n          \"no mocked response received, performing request as-is...\"\n        );\n      };\n      xhrRequestController.onResponse = async function({\n        response,\n        isMockedResponse,\n        request,\n        requestId\n      }) {\n        this.logger.info(\n          'emitting the \"response\" event for %s listener(s)...',\n          emitter.listenerCount(\"response\")\n        );\n        emitter.emit(\"response\", {\n          response,\n          isMockedResponse,\n          request,\n          requestId\n        });\n      };\n      return xhrRequestController.request;\n    }\n  });\n  return XMLHttpRequestProxy;\n}\n\n// src/interceptors/XMLHttpRequest/index.ts\nvar _XMLHttpRequestInterceptor = class extends _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.Interceptor {\n  constructor() {\n    super(_XMLHttpRequestInterceptor.interceptorSymbol);\n  }\n  checkEnvironment() {\n    return typeof globalThis.XMLHttpRequest !== \"undefined\";\n  }\n  setup() {\n    const logger = this.logger.extend(\"setup\");\n    logger.info('patching \"XMLHttpRequest\" module...');\n    const PureXMLHttpRequest = globalThis.XMLHttpRequest;\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_5__.invariant)(\n      !PureXMLHttpRequest[_chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_2__.IS_PATCHED_MODULE],\n      'Failed to patch the \"XMLHttpRequest\" module: already patched.'\n    );\n    globalThis.XMLHttpRequest = createXMLHttpRequestProxy({\n      emitter: this.emitter,\n      logger: this.logger\n    });\n    logger.info(\n      'native \"XMLHttpRequest\" module patched!',\n      globalThis.XMLHttpRequest.name\n    );\n    Object.defineProperty(globalThis.XMLHttpRequest, _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_2__.IS_PATCHED_MODULE, {\n      enumerable: true,\n      configurable: true,\n      value: true\n    });\n    this.subscriptions.push(() => {\n      Object.defineProperty(globalThis.XMLHttpRequest, _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_2__.IS_PATCHED_MODULE, {\n        value: void 0\n      });\n      globalThis.XMLHttpRequest = PureXMLHttpRequest;\n      logger.info(\n        'native \"XMLHttpRequest\" module restored!',\n        globalThis.XMLHttpRequest.name\n      );\n    });\n  }\n};\nvar XMLHttpRequestInterceptor = _XMLHttpRequestInterceptor;\nXMLHttpRequestInterceptor.interceptorSymbol = Symbol(\"xhr\");\n\n\n//# sourceMappingURL=chunk-VUILOQBY.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1WVUlMT1FCWS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBSThCO0FBR0E7QUFHQTtBQUlBO0FBS0E7O0FBRTlCO0FBQ3FEOztBQUVyRDtBQUMwQzs7QUFFMUM7QUFDdUM7QUFDUzs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHdEQUF3RDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDZCQUE2QiwwRUFBcUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWMsOERBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsb0VBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsYUFBYSxFQUFFLGNBQWM7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGlFQUFZO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRkFBK0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixXQUFXLElBQUksWUFBWTtBQUNqRCxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaUVBQVk7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsVUFBVTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELFdBQVcscURBQXFELHFCQUFxQixFQUFFLGlCQUFpQjtBQUMxSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxvQkFBb0I7QUFDNUUsZ0JBQWdCLHdDQUF3QyxFQUFFLHlFQUFvQjtBQUM5RTtBQUNBLG1DQUFtQyw2QkFBNkI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHFDQUFxQyx3REFBSztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw4REFBUztBQUN6QjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSwrQ0FBK0MsNERBQVc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFEQUFVO0FBQ2QsMEJBQTBCLGtFQUFpQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELGtFQUFpQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1REFBdUQsa0VBQWlCO0FBQ3hFO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBSUU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8tbG9naW4vLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9jaHVuay1WVUlMT1FCWS5tanM/NjAzNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBkZWNvZGVCdWZmZXIsXG4gIGVuY29kZUJ1ZmZlcixcbiAgdG9BcnJheUJ1ZmZlclxufSBmcm9tIFwiLi9jaHVuay02SFlJUkZYMi5tanNcIjtcbmltcG9ydCB7XG4gIGlzUmVzcG9uc2VXaXRob3V0Qm9keVxufSBmcm9tIFwiLi9jaHVuay1JQllCVFRZSy5tanNcIjtcbmltcG9ydCB7XG4gIElTX1BBVENIRURfTU9EVUxFXG59IGZyb20gXCIuL2NodW5rLUhBR1cyMkFOLm1qc1wiO1xuaW1wb3J0IHtcbiAgZW1pdEFzeW5jLFxuICB0b0ludGVyYWN0aXZlUmVxdWVzdFxufSBmcm9tIFwiLi9jaHVuay1PVVdCUUYzWi5tanNcIjtcbmltcG9ydCB7XG4gIElOVEVSTkFMX1JFUVVFU1RfSURfSEVBREVSX05BTUUsXG4gIEludGVyY2VwdG9yLFxuICBjcmVhdGVSZXF1ZXN0SWRcbn0gZnJvbSBcIi4vY2h1bmstUUVEM1E2WjIubWpzXCI7XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvWE1MSHR0cFJlcXVlc3QvaW5kZXgudHNcbmltcG9ydCB7IGludmFyaWFudCBhcyBpbnZhcmlhbnQyIH0gZnJvbSBcIm91dHZhcmlhbnRcIjtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC9YTUxIdHRwUmVxdWVzdFByb3h5LnRzXG5pbXBvcnQgeyB1bnRpbCB9IGZyb20gXCJAb3Blbi1kcmFmdC91bnRpbFwiO1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L1hNTEh0dHBSZXF1ZXN0Q29udHJvbGxlci50c1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIm91dHZhcmlhbnRcIjtcbmltcG9ydCB7IGlzTm9kZVByb2Nlc3MgfSBmcm9tIFwiaXMtbm9kZS1wcm9jZXNzXCI7XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvWE1MSHR0cFJlcXVlc3QvdXRpbHMvY29uY2F0QXJyYXlCdWZmZXIudHNcbmZ1bmN0aW9uIGNvbmNhdEFycmF5QnVmZmVyKGxlZnQsIHJpZ2h0KSB7XG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGxlZnQuYnl0ZUxlbmd0aCArIHJpZ2h0LmJ5dGVMZW5ndGgpO1xuICByZXN1bHQuc2V0KGxlZnQsIDApO1xuICByZXN1bHQuc2V0KHJpZ2h0LCBsZWZ0LmJ5dGVMZW5ndGgpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L3BvbHlmaWxscy9FdmVudFBvbHlmaWxsLnRzXG52YXIgRXZlbnRQb2x5ZmlsbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IodHlwZSwgb3B0aW9ucykge1xuICAgIHRoaXMuQVRfVEFSR0VUID0gMDtcbiAgICB0aGlzLkJVQkJMSU5HX1BIQVNFID0gMDtcbiAgICB0aGlzLkNBUFRVUklOR19QSEFTRSA9IDA7XG4gICAgdGhpcy5OT05FID0gMDtcbiAgICB0aGlzLnR5cGUgPSBcIlwiO1xuICAgIHRoaXMuc3JjRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICB0aGlzLmV2ZW50UGhhc2UgPSAwO1xuICAgIHRoaXMuaXNUcnVzdGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNvbXBvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxhYmxlID0gdHJ1ZTtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmJ1YmJsZXMgPSB0cnVlO1xuICAgIHRoaXMubGVuZ3RoQ29tcHV0YWJsZSA9IHRydWU7XG4gICAgdGhpcy5sb2FkZWQgPSAwO1xuICAgIHRoaXMudG90YWwgPSAwO1xuICAgIHRoaXMuY2FuY2VsQnViYmxlID0gZmFsc2U7XG4gICAgdGhpcy5yZXR1cm5WYWx1ZSA9IHRydWU7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLnRhcmdldCA9IChvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLnRhcmdldCkgfHwgbnVsbDtcbiAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSAob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5jdXJyZW50VGFyZ2V0KSB8fCBudWxsO1xuICAgIHRoaXMudGltZVN0YW1wID0gRGF0ZS5ub3coKTtcbiAgfVxuICBjb21wb3NlZFBhdGgoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGluaXRFdmVudCh0eXBlLCBidWJibGVzLCBjYW5jZWxhYmxlKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmJ1YmJsZXMgPSAhIWJ1YmJsZXM7XG4gICAgdGhpcy5jYW5jZWxhYmxlID0gISFjYW5jZWxhYmxlO1xuICB9XG4gIHByZXZlbnREZWZhdWx0KCkge1xuICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gIH1cbiAgc3RvcFByb3BhZ2F0aW9uKCkge1xuICB9XG4gIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIHtcbiAgfVxufTtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC9wb2x5ZmlsbHMvUHJvZ3Jlc3NFdmVudFBvbHlmaWxsLnRzXG52YXIgUHJvZ3Jlc3NFdmVudFBvbHlmaWxsID0gY2xhc3MgZXh0ZW5kcyBFdmVudFBvbHlmaWxsIHtcbiAgY29uc3RydWN0b3IodHlwZSwgaW5pdCkge1xuICAgIHN1cGVyKHR5cGUpO1xuICAgIHRoaXMubGVuZ3RoQ29tcHV0YWJsZSA9IChpbml0ID09IG51bGwgPyB2b2lkIDAgOiBpbml0Lmxlbmd0aENvbXB1dGFibGUpIHx8IGZhbHNlO1xuICAgIHRoaXMuY29tcG9zZWQgPSAoaW5pdCA9PSBudWxsID8gdm9pZCAwIDogaW5pdC5jb21wb3NlZCkgfHwgZmFsc2U7XG4gICAgdGhpcy5sb2FkZWQgPSAoaW5pdCA9PSBudWxsID8gdm9pZCAwIDogaW5pdC5sb2FkZWQpIHx8IDA7XG4gICAgdGhpcy50b3RhbCA9IChpbml0ID09IG51bGwgPyB2b2lkIDAgOiBpbml0LnRvdGFsKSB8fCAwO1xuICB9XG59O1xuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L3V0aWxzL2NyZWF0ZUV2ZW50LnRzXG52YXIgU1VQUE9SVFNfUFJPR1JFU1NfRVZFTlQgPSB0eXBlb2YgUHJvZ3Jlc3NFdmVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbmZ1bmN0aW9uIGNyZWF0ZUV2ZW50KHRhcmdldCwgdHlwZSwgaW5pdCkge1xuICBjb25zdCBwcm9ncmVzc0V2ZW50cyA9IFtcbiAgICBcImVycm9yXCIsXG4gICAgXCJwcm9ncmVzc1wiLFxuICAgIFwibG9hZHN0YXJ0XCIsXG4gICAgXCJsb2FkZW5kXCIsXG4gICAgXCJsb2FkXCIsXG4gICAgXCJ0aW1lb3V0XCIsXG4gICAgXCJhYm9ydFwiXG4gIF07XG4gIGNvbnN0IFByb2dyZXNzRXZlbnRDbGFzcyA9IFNVUFBPUlRTX1BST0dSRVNTX0VWRU5UID8gUHJvZ3Jlc3NFdmVudCA6IFByb2dyZXNzRXZlbnRQb2x5ZmlsbDtcbiAgY29uc3QgZXZlbnQgPSBwcm9ncmVzc0V2ZW50cy5pbmNsdWRlcyh0eXBlKSA/IG5ldyBQcm9ncmVzc0V2ZW50Q2xhc3ModHlwZSwge1xuICAgIGxlbmd0aENvbXB1dGFibGU6IHRydWUsXG4gICAgbG9hZGVkOiAoaW5pdCA9PSBudWxsID8gdm9pZCAwIDogaW5pdC5sb2FkZWQpIHx8IDAsXG4gICAgdG90YWw6IChpbml0ID09IG51bGwgPyB2b2lkIDAgOiBpbml0LnRvdGFsKSB8fCAwXG4gIH0pIDogbmV3IEV2ZW50UG9seWZpbGwodHlwZSwge1xuICAgIHRhcmdldCxcbiAgICBjdXJyZW50VGFyZ2V0OiB0YXJnZXRcbiAgfSk7XG4gIHJldHVybiBldmVudDtcbn1cblxuLy8gc3JjL3V0aWxzL2ZpbmRQcm9wZXJ0eVNvdXJjZS50c1xuZnVuY3Rpb24gZmluZFByb3BlcnR5U291cmNlKHRhcmdldCwgcHJvcGVydHlOYW1lKSB7XG4gIGlmICghKHByb3BlcnR5TmFtZSBpbiB0YXJnZXQpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgaGFzUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGFyZ2V0LCBwcm9wZXJ0eU5hbWUpO1xuICBpZiAoaGFzUHJvcGVydHkpIHtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIGNvbnN0IHByb3RvdHlwZSA9IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KTtcbiAgcmV0dXJuIHByb3RvdHlwZSA/IGZpbmRQcm9wZXJ0eVNvdXJjZShwcm90b3R5cGUsIHByb3BlcnR5TmFtZSkgOiBudWxsO1xufVxuXG4vLyBzcmMvdXRpbHMvY3JlYXRlUHJveHkudHNcbmZ1bmN0aW9uIGNyZWF0ZVByb3h5KHRhcmdldCwgb3B0aW9ucykge1xuICBjb25zdCBwcm94eSA9IG5ldyBQcm94eSh0YXJnZXQsIG9wdGlvbnNUb1Byb3h5SGFuZGxlcihvcHRpb25zKSk7XG4gIHJldHVybiBwcm94eTtcbn1cbmZ1bmN0aW9uIG9wdGlvbnNUb1Byb3h5SGFuZGxlcihvcHRpb25zKSB7XG4gIGNvbnN0IHsgY29uc3RydWN0b3JDYWxsLCBtZXRob2RDYWxsLCBnZXRQcm9wZXJ0eSwgc2V0UHJvcGVydHkgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGhhbmRsZXIgPSB7fTtcbiAgaWYgKHR5cGVvZiBjb25zdHJ1Y3RvckNhbGwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBoYW5kbGVyLmNvbnN0cnVjdCA9IGZ1bmN0aW9uKHRhcmdldCwgYXJncywgbmV3VGFyZ2V0KSB7XG4gICAgICBjb25zdCBuZXh0ID0gUmVmbGVjdC5jb25zdHJ1Y3QuYmluZChudWxsLCB0YXJnZXQsIGFyZ3MsIG5ld1RhcmdldCk7XG4gICAgICByZXR1cm4gY29uc3RydWN0b3JDYWxsLmNhbGwobmV3VGFyZ2V0LCBhcmdzLCBuZXh0KTtcbiAgICB9O1xuICB9XG4gIGhhbmRsZXIuc2V0ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eU5hbWUsIG5leHRWYWx1ZSkge1xuICAgIGNvbnN0IG5leHQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eVNvdXJjZSA9IGZpbmRQcm9wZXJ0eVNvdXJjZSh0YXJnZXQsIHByb3BlcnR5TmFtZSkgfHwgdGFyZ2V0O1xuICAgICAgY29uc3Qgb3duRGVzY3JpcHRvcnMgPSBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgICAgcHJvcGVydHlTb3VyY2UsXG4gICAgICAgIHByb3BlcnR5TmFtZVxuICAgICAgKTtcbiAgICAgIGlmICh0eXBlb2YgKG93bkRlc2NyaXB0b3JzID09IG51bGwgPyB2b2lkIDAgOiBvd25EZXNjcmlwdG9ycy5zZXQpICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIG93bkRlc2NyaXB0b3JzLnNldC5hcHBseSh0YXJnZXQsIFtuZXh0VmFsdWVdKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wZXJ0eVNvdXJjZSwgcHJvcGVydHlOYW1lLCB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiBuZXh0VmFsdWVcbiAgICAgIH0pO1xuICAgIH07XG4gICAgaWYgKHR5cGVvZiBzZXRQcm9wZXJ0eSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIHNldFByb3BlcnR5LmNhbGwodGFyZ2V0LCBbcHJvcGVydHlOYW1lLCBuZXh0VmFsdWVdLCBuZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfTtcbiAgaGFuZGxlci5nZXQgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5TmFtZSwgcmVjZWl2ZXIpIHtcbiAgICBjb25zdCBuZXh0ID0gKCkgPT4gdGFyZ2V0W3Byb3BlcnR5TmFtZV07XG4gICAgY29uc3QgdmFsdWUgPSB0eXBlb2YgZ2V0UHJvcGVydHkgIT09IFwidW5kZWZpbmVkXCIgPyBnZXRQcm9wZXJ0eS5jYWxsKHRhcmdldCwgW3Byb3BlcnR5TmFtZSwgcmVjZWl2ZXJdLCBuZXh0KSA6IG5leHQoKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICBjb25zdCBuZXh0MiA9IHZhbHVlLmJpbmQodGFyZ2V0LCAuLi5hcmdzKTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXRob2RDYWxsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgcmV0dXJuIG1ldGhvZENhbGwuY2FsbCh0YXJnZXQsIFtwcm9wZXJ0eU5hbWUsIGFyZ3NdLCBuZXh0Mik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHQyKCk7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG4gIHJldHVybiBoYW5kbGVyO1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L3V0aWxzL2lzRG9tUGFyc2VyU3VwcG9ydGVkVHlwZS50c1xuZnVuY3Rpb24gaXNEb21QYXJzZXJTdXBwb3J0ZWRUeXBlKHR5cGUpIHtcbiAgY29uc3Qgc3VwcG9ydGVkVHlwZXMgPSBbXG4gICAgXCJhcHBsaWNhdGlvbi94aHRtbCt4bWxcIixcbiAgICBcImFwcGxpY2F0aW9uL3htbFwiLFxuICAgIFwiaW1hZ2Uvc3ZnK3htbFwiLFxuICAgIFwidGV4dC9odG1sXCIsXG4gICAgXCJ0ZXh0L3htbFwiXG4gIF07XG4gIHJldHVybiBzdXBwb3J0ZWRUeXBlcy5zb21lKChzdXBwb3J0ZWRUeXBlKSA9PiB7XG4gICAgcmV0dXJuIHR5cGUuc3RhcnRzV2l0aChzdXBwb3J0ZWRUeXBlKTtcbiAgfSk7XG59XG5cbi8vIHNyYy91dGlscy9wYXJzZUpzb24udHNcbmZ1bmN0aW9uIHBhcnNlSnNvbihkYXRhKSB7XG4gIHRyeSB7XG4gICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgcmV0dXJuIGpzb247XG4gIH0gY2F0Y2ggKF8pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L3V0aWxzL2NyZWF0ZVJlc3BvbnNlLnRzXG5mdW5jdGlvbiBjcmVhdGVSZXNwb25zZShyZXF1ZXN0LCBib2R5KSB7XG4gIGNvbnN0IHJlc3BvbnNlQm9keU9yTnVsbCA9IGlzUmVzcG9uc2VXaXRob3V0Qm9keShyZXF1ZXN0LnN0YXR1cykgPyBudWxsIDogYm9keTtcbiAgcmV0dXJuIG5ldyBSZXNwb25zZShyZXNwb25zZUJvZHlPck51bGwsIHtcbiAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICBoZWFkZXJzOiBjcmVhdGVIZWFkZXJzRnJvbVhNTEh0dHBSZXFlc3RIZWFkZXJzKFxuICAgICAgcmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxuICAgIClcbiAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVIZWFkZXJzRnJvbVhNTEh0dHBSZXFlc3RIZWFkZXJzKGhlYWRlcnNTdHJpbmcpIHtcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gIGNvbnN0IGxpbmVzID0gaGVhZGVyc1N0cmluZy5zcGxpdCgvW1xcclxcbl0rLyk7XG4gIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgIGlmIChsaW5lLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IFtuYW1lLCAuLi5wYXJ0c10gPSBsaW5lLnNwbGl0KFwiOiBcIik7XG4gICAgY29uc3QgdmFsdWUgPSBwYXJ0cy5qb2luKFwiOiBcIik7XG4gICAgaGVhZGVycy5hcHBlbmQobmFtZSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBoZWFkZXJzO1xufVxuXG4vLyBzcmMvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L1hNTEh0dHBSZXF1ZXN0Q29udHJvbGxlci50c1xudmFyIElTX01PQ0tFRF9SRVNQT05TRSA9IFN5bWJvbChcImlzTW9ja2VkUmVzcG9uc2VcIik7XG52YXIgSVNfTk9ERSA9IGlzTm9kZVByb2Nlc3MoKTtcbnZhciBYTUxIdHRwUmVxdWVzdENvbnRyb2xsZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGluaXRpYWxSZXF1ZXN0LCBsb2dnZXIpIHtcbiAgICB0aGlzLmluaXRpYWxSZXF1ZXN0ID0gaW5pdGlhbFJlcXVlc3Q7XG4gICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gICAgdGhpcy5tZXRob2QgPSBcIkdFVFwiO1xuICAgIHRoaXMudXJsID0gbnVsbDtcbiAgICB0aGlzLmV2ZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5yZXF1ZXN0SWQgPSBjcmVhdGVSZXF1ZXN0SWQoKTtcbiAgICB0aGlzLnJlcXVlc3RIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICB0aGlzLnJlc3BvbnNlQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICB0aGlzLnJlcXVlc3QgPSBjcmVhdGVQcm94eShpbml0aWFsUmVxdWVzdCwge1xuICAgICAgc2V0UHJvcGVydHk6IChbcHJvcGVydHlOYW1lLCBuZXh0VmFsdWVdLCBpbnZva2UpID0+IHtcbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICBjYXNlIFwib250aW1lb3V0XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IHByb3BlcnR5TmFtZS5zbGljZShcbiAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgbmV4dFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBpbnZva2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgcmV0dXJuIGludm9rZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1ldGhvZENhbGw6IChbbWV0aG9kTmFtZSwgYXJnc10sIGludm9rZSkgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHN3aXRjaCAobWV0aG9kTmFtZSkge1xuICAgICAgICAgIGNhc2UgXCJvcGVuXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IFttZXRob2QsIHVybF0gPSBhcmdzO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgdGhpcy5tZXRob2QgPSBcIkdFVFwiO1xuICAgICAgICAgICAgICB0aGlzLnVybCA9IHRvQWJzb2x1dGVVcmwobWV0aG9kKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMubWV0aG9kID0gbWV0aG9kO1xuICAgICAgICAgICAgICB0aGlzLnVybCA9IHRvQWJzb2x1dGVVcmwodXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubG9nZ2VyID0gdGhpcy5sb2dnZXIuZXh0ZW5kKGAke3RoaXMubWV0aG9kfSAke3RoaXMudXJsLmhyZWZ9YCk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwib3BlblwiLCB0aGlzLm1ldGhvZCwgdGhpcy51cmwuaHJlZik7XG4gICAgICAgICAgICByZXR1cm4gaW52b2tlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJhZGRFdmVudExpc3RlbmVyXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IFtldmVudE5hbWUsIGxpc3RlbmVyXSA9IGFyZ3M7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoZXZlbnROYW1lLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYWRkRXZlbnRMaXN0ZW5lclwiLCBldmVudE5hbWUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIHJldHVybiBpbnZva2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInNldFJlcXVlc3RIZWFkZXJcIjoge1xuICAgICAgICAgICAgY29uc3QgW25hbWUsIHZhbHVlXSA9IGFyZ3M7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RIZWFkZXJzLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwic2V0UmVxdWVzdEhlYWRlclwiLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gaW52b2tlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJzZW5kXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IFtib2R5XSA9IGFyZ3M7XG4gICAgICAgICAgICBpZiAoYm9keSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHRoaXMucmVxdWVzdEJvZHkgPSB0eXBlb2YgYm9keSA9PT0gXCJzdHJpbmdcIiA/IGVuY29kZUJ1ZmZlcihib2R5KSA6IGJvZHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25SZXNwb25zZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZldGNoUmVzcG9uc2UgPSBjcmVhdGVSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICogVGhlIGByZXNwb25zZWAgcHJvcGVydHkgaXMgdGhlIHJpZ2h0IHdheSB0byByZWFkXG4gICAgICAgICAgICAgICAgICAgKiB0aGUgYW1iaWd1b3VzIHJlc3BvbnNlIGJvZHksIGFzIHRoZSByZXF1ZXN0J3MgXCJyZXNwb25zZVR5cGVcIiBtYXkgZGlmZmVyLlxuICAgICAgICAgICAgICAgICAgICogQHNlZSBodHRwczovL3hoci5zcGVjLndoYXR3Zy5vcmcvI3RoZS1yZXNwb25zZS1hdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LnJlc3BvbnNlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVzcG9uc2UuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICAgICAgICByZXNwb25zZTogZmV0Y2hSZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgIGlzTW9ja2VkUmVzcG9uc2U6IElTX01PQ0tFRF9SRVNQT05TRSBpbiB0aGlzLnJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICByZXF1ZXN0OiBmZXRjaFJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHRoaXMucmVxdWVzdElkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gdGhpcy50b0ZldGNoQXBpUmVxdWVzdCgpO1xuICAgICAgICAgICAgY29uc3Qgb25jZVJlcXVlc3RTZXR0bGVkID0gKChfYSA9IHRoaXMub25SZXF1ZXN0KSA9PSBudWxsID8gdm9pZCAwIDogX2EuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICAgIHJlcXVlc3Q6IGZldGNoUmVxdWVzdCxcbiAgICAgICAgICAgICAgcmVxdWVzdElkOiB0aGlzLnJlcXVlc3RJZFxuICAgICAgICAgICAgfSkpIHx8IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgb25jZVJlcXVlc3RTZXR0bGVkLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0LnJlYWR5U3RhdGUgPCB0aGlzLnJlcXVlc3QuTE9BRElORykge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgICAgICAgICBcInJlcXVlc3QgY2FsbGJhY2sgc2V0dGxlZCBidXQgcmVxdWVzdCBoYXMgbm90IGJlZW4gaGFuZGxlZCAocmVhZHlzdGF0ZSAlZCksIHBlcmZvcm1pbmcgYXMtaXMuLi5cIixcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdC5yZWFkeVN0YXRlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoSVNfTk9ERSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoXG4gICAgICAgICAgICAgICAgICAgIElOVEVSTkFMX1JFUVVFU1RfSURfSEVBREVSX05BTUUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdElkXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaW52b2tlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHJldHVybiBpbnZva2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICByZWdpc3RlckV2ZW50KGV2ZW50TmFtZSwgbGlzdGVuZXIpIHtcbiAgICBjb25zdCBwcmV2RXZlbnRzID0gdGhpcy5ldmVudHMuZ2V0KGV2ZW50TmFtZSkgfHwgW107XG4gICAgY29uc3QgbmV4dEV2ZW50cyA9IHByZXZFdmVudHMuY29uY2F0KGxpc3RlbmVyKTtcbiAgICB0aGlzLmV2ZW50cy5zZXQoZXZlbnROYW1lLCBuZXh0RXZlbnRzKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCdyZWdpc3RlcmVkIGV2ZW50IFwiJXNcIicsIGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICB9XG4gIC8qKlxuICAgKiBSZXNwb25kcyB0byB0aGUgY3VycmVudCByZXF1ZXN0IHdpdGggdGhlIGdpdmVuXG4gICAqIEZldGNoIEFQSSBgUmVzcG9uc2VgIGluc3RhbmNlLlxuICAgKi9cbiAgcmVzcG9uZFdpdGgocmVzcG9uc2UpIHtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgXCJyZXNwb25kaW5nIHdpdGggYSBtb2NrZWQgcmVzcG9uc2U6ICVkICVzXCIsXG4gICAgICByZXNwb25zZS5zdGF0dXMsXG4gICAgICByZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgKTtcbiAgICBkZWZpbmUodGhpcy5yZXF1ZXN0LCBJU19NT0NLRURfUkVTUE9OU0UsIHRydWUpO1xuICAgIGRlZmluZSh0aGlzLnJlcXVlc3QsIFwic3RhdHVzXCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgZGVmaW5lKHRoaXMucmVxdWVzdCwgXCJzdGF0dXNUZXh0XCIsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgIGRlZmluZSh0aGlzLnJlcXVlc3QsIFwicmVzcG9uc2VVUkxcIiwgdGhpcy51cmwuaHJlZik7XG4gICAgdGhpcy5yZXF1ZXN0LmdldFJlc3BvbnNlSGVhZGVyID0gbmV3IFByb3h5KHRoaXMucmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlciwge1xuICAgICAgYXBwbHk6IChfLCBfXywgYXJncykgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiZ2V0UmVzcG9uc2VIZWFkZXJcIiwgYXJnc1swXSk7XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3QucmVhZHlTdGF0ZSA8IHRoaXMucmVxdWVzdC5IRUFERVJTX1JFQ0VJVkVEKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImhlYWRlcnMgbm90IHJlY2VpdmVkIHlldCwgcmV0dXJuaW5nIG51bGxcIik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGVyVmFsdWUgPSByZXNwb25zZS5oZWFkZXJzLmdldChhcmdzWzBdKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAncmVzb2x2ZWQgcmVzcG9uc2UgaGVhZGVyIFwiJXNcIiB0bycsXG4gICAgICAgICAgYXJnc1swXSxcbiAgICAgICAgICBoZWFkZXJWYWx1ZVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gaGVhZGVyVmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5yZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycyA9IG5ldyBQcm94eShcbiAgICAgIHRoaXMucmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMsXG4gICAgICB7XG4gICAgICAgIGFwcGx5OiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImdldEFsbFJlc3BvbnNlSGVhZGVyc1wiKTtcbiAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0LnJlYWR5U3RhdGUgPCB0aGlzLnJlcXVlc3QuSEVBREVSU19SRUNFSVZFRCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImhlYWRlcnMgbm90IHJlY2VpdmVkIHlldCwgcmV0dXJuaW5nIGVtcHR5IHN0cmluZ1wiKTtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBoZWFkZXJzTGlzdCA9IEFycmF5LmZyb20ocmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCkpO1xuICAgICAgICAgIGNvbnN0IGFsbEhlYWRlcnMgPSBoZWFkZXJzTGlzdC5tYXAoKFtoZWFkZXJOYW1lLCBoZWFkZXJWYWx1ZV0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBgJHtoZWFkZXJOYW1lfTogJHtoZWFkZXJWYWx1ZX1gO1xuICAgICAgICAgIH0pLmpvaW4oXCJcXHJcXG5cIik7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlc29sdmVkIGFsbCByZXNwb25zZSBoZWFkZXJzIHRvXCIsIGFsbEhlYWRlcnMpO1xuICAgICAgICAgIHJldHVybiBhbGxIZWFkZXJzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnJlcXVlc3QsIHtcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGdldDogKCkgPT4gdGhpcy5yZXNwb25zZVxuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlVGV4dDoge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBnZXQ6ICgpID0+IHRoaXMucmVzcG9uc2VUZXh0XG4gICAgICB9LFxuICAgICAgcmVzcG9uc2VYTUw6IHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgZ2V0OiAoKSA9PiB0aGlzLnJlc3BvbnNlWE1MXG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgdG90YWxSZXNwb25zZUJvZHlMZW5ndGggPSByZXNwb25zZS5oZWFkZXJzLmhhcyhcIkNvbnRlbnQtTGVuZ3RoXCIpID8gTnVtYmVyKHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiQ29udGVudC1MZW5ndGhcIikpIDogKFxuICAgICAgLyoqXG4gICAgICAgKiBAdG9kbyBJbmZlciB0aGUgcmVzcG9uc2UgYm9keSBsZW5ndGggZnJvbSB0aGUgcmVzcG9uc2UgYm9keS5cbiAgICAgICAqL1xuICAgICAgdm9pZCAwXG4gICAgKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwiY2FsY3VsYXRlZCByZXNwb25zZSBib2R5IGxlbmd0aFwiLCB0b3RhbFJlc3BvbnNlQm9keUxlbmd0aCk7XG4gICAgdGhpcy50cmlnZ2VyKFwibG9hZHN0YXJ0XCIsIHtcbiAgICAgIGxvYWRlZDogMCxcbiAgICAgIHRvdGFsOiB0b3RhbFJlc3BvbnNlQm9keUxlbmd0aFxuICAgIH0pO1xuICAgIHRoaXMuc2V0UmVhZHlTdGF0ZSh0aGlzLnJlcXVlc3QuSEVBREVSU19SRUNFSVZFRCk7XG4gICAgdGhpcy5zZXRSZWFkeVN0YXRlKHRoaXMucmVxdWVzdC5MT0FESU5HKTtcbiAgICBjb25zdCBmaW5hbGl6ZVJlc3BvbnNlID0gKCkgPT4ge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImZpbmFsaXppbmcgdGhlIG1vY2tlZCByZXNwb25zZS4uLlwiKTtcbiAgICAgIHRoaXMuc2V0UmVhZHlTdGF0ZSh0aGlzLnJlcXVlc3QuRE9ORSk7XG4gICAgICB0aGlzLnRyaWdnZXIoXCJsb2FkXCIsIHtcbiAgICAgICAgbG9hZGVkOiB0aGlzLnJlc3BvbnNlQnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgICAgIHRvdGFsOiB0b3RhbFJlc3BvbnNlQm9keUxlbmd0aFxuICAgICAgfSk7XG4gICAgICB0aGlzLnRyaWdnZXIoXCJsb2FkZW5kXCIsIHtcbiAgICAgICAgbG9hZGVkOiB0aGlzLnJlc3BvbnNlQnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgICAgIHRvdGFsOiB0b3RhbFJlc3BvbnNlQm9keUxlbmd0aFxuICAgICAgfSk7XG4gICAgfTtcbiAgICBpZiAocmVzcG9uc2UuYm9keSkge1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIm1vY2tlZCByZXNwb25zZSBoYXMgYm9keSwgc3RyZWFtaW5nLi4uXCIpO1xuICAgICAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcbiAgICAgIGNvbnN0IHJlYWROZXh0UmVzcG9uc2VCb2R5Q2h1bmsgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlc3BvbnNlIGJvZHkgc3RyZWFtIGRvbmUhXCIpO1xuICAgICAgICAgIGZpbmFsaXplUmVzcG9uc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlYWQgcmVzcG9uc2UgYm9keSBjaHVuazpcIiwgdmFsdWUpO1xuICAgICAgICAgIHRoaXMucmVzcG9uc2VCdWZmZXIgPSBjb25jYXRBcnJheUJ1ZmZlcih0aGlzLnJlc3BvbnNlQnVmZmVyLCB2YWx1ZSk7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKFwicHJvZ3Jlc3NcIiwge1xuICAgICAgICAgICAgbG9hZGVkOiB0aGlzLnJlc3BvbnNlQnVmZmVyLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICB0b3RhbDogdG90YWxSZXNwb25zZUJvZHlMZW5ndGhcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZWFkTmV4dFJlc3BvbnNlQm9keUNodW5rKCk7XG4gICAgICB9O1xuICAgICAgcmVhZE5leHRSZXNwb25zZUJvZHlDaHVuaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaW5hbGl6ZVJlc3BvbnNlKCk7XG4gICAgfVxuICB9XG4gIHJlc3BvbnNlQnVmZmVyVG9UZXh0KCkge1xuICAgIHJldHVybiBkZWNvZGVCdWZmZXIodGhpcy5yZXNwb25zZUJ1ZmZlcik7XG4gIH1cbiAgZ2V0IHJlc3BvbnNlKCkge1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICBcImdldFJlc3BvbnNlIChyZXNwb25zZVR5cGU6ICVzKVwiLFxuICAgICAgdGhpcy5yZXF1ZXN0LnJlc3BvbnNlVHlwZVxuICAgICk7XG4gICAgaWYgKHRoaXMucmVxdWVzdC5yZWFkeVN0YXRlICE9PSB0aGlzLnJlcXVlc3QuRE9ORSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5yZXF1ZXN0LnJlc3BvbnNlVHlwZSkge1xuICAgICAgY2FzZSBcImpzb25cIjoge1xuICAgICAgICBjb25zdCByZXNwb25zZUpzb24gPSBwYXJzZUpzb24odGhpcy5yZXNwb25zZUJ1ZmZlclRvVGV4dCgpKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlc29sdmVkIHJlc3BvbnNlIEpTT05cIiwgcmVzcG9uc2VKc29uKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlSnNvbjtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJhcnJheWJ1ZmZlclwiOiB7XG4gICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gdG9BcnJheUJ1ZmZlcih0aGlzLnJlc3BvbnNlQnVmZmVyKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcInJlc29sdmVkIHJlc3BvbnNlIEFycmF5QnVmZmVyXCIsIGFycmF5QnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIGFycmF5QnVmZmVyO1xuICAgICAgfVxuICAgICAgY2FzZSBcImJsb2JcIjoge1xuICAgICAgICBjb25zdCBtaW1lVHlwZSA9IHRoaXMucmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSB8fCBcInRleHQvcGxhaW5cIjtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VCbG9iID0gbmV3IEJsb2IoW3RoaXMucmVzcG9uc2VCdWZmZXJUb1RleHQoKV0sIHtcbiAgICAgICAgICB0eXBlOiBtaW1lVHlwZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICBcInJlc29sdmVkIHJlc3BvbnNlIEJsb2IgKG1pbWUgdHlwZTogJXMpXCIsXG4gICAgICAgICAgcmVzcG9uc2VCbG9iLFxuICAgICAgICAgIG1pbWVUeXBlXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXNwb25zZUJsb2I7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IHRoaXMucmVzcG9uc2VCdWZmZXJUb1RleHQoKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAncmVzb2x2aW5nIFwiJXNcIiByZXNwb25zZSB0eXBlIGFzIHRleHQnLFxuICAgICAgICAgIHRoaXMucmVxdWVzdC5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgcmVzcG9uc2VUZXh0XG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiByZXNwb25zZVRleHQ7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGdldCByZXNwb25zZVRleHQoKSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy5yZXF1ZXN0LnJlc3BvbnNlVHlwZSA9PT0gXCJcIiB8fCB0aGlzLnJlcXVlc3QucmVzcG9uc2VUeXBlID09PSBcInRleHRcIixcbiAgICAgIFwiSW52YWxpZFN0YXRlRXJyb3I6IFRoZSBvYmplY3QgaXMgaW4gaW52YWxpZCBzdGF0ZS5cIlxuICAgICk7XG4gICAgaWYgKHRoaXMucmVxdWVzdC5yZWFkeVN0YXRlICE9PSB0aGlzLnJlcXVlc3QuTE9BRElORyAmJiB0aGlzLnJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gdGhpcy5yZXF1ZXN0LkRPTkUpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZVRleHQgPSB0aGlzLnJlc3BvbnNlQnVmZmVyVG9UZXh0KCk7XG4gICAgdGhpcy5sb2dnZXIuaW5mbygnZ2V0UmVzcG9uc2VUZXh0OiBcIiVzXCInLCByZXNwb25zZVRleHQpO1xuICAgIHJldHVybiByZXNwb25zZVRleHQ7XG4gIH1cbiAgZ2V0IHJlc3BvbnNlWE1MKCkge1xuICAgIGludmFyaWFudChcbiAgICAgIHRoaXMucmVxdWVzdC5yZXNwb25zZVR5cGUgPT09IFwiXCIgfHwgdGhpcy5yZXF1ZXN0LnJlc3BvbnNlVHlwZSA9PT0gXCJkb2N1bWVudFwiLFxuICAgICAgXCJJbnZhbGlkU3RhdGVFcnJvcjogVGhlIG9iamVjdCBpcyBpbiBpbnZhbGlkIHN0YXRlLlwiXG4gICAgKTtcbiAgICBpZiAodGhpcy5yZXF1ZXN0LnJlYWR5U3RhdGUgIT09IHRoaXMucmVxdWVzdC5ET05FKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY29udGVudFR5cGUgPSB0aGlzLnJlcXVlc3QuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikgfHwgXCJcIjtcbiAgICBpZiAodHlwZW9mIERPTVBhcnNlciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIkNhbm5vdCByZXRyaWV2ZSBYTUxIdHRwUmVxdWVzdCByZXNwb25zZSBib2R5IGFzIFhNTDogRE9NUGFyc2VyIGlzIG5vdCBkZWZpbmVkLiBZb3UgYXJlIGxpa2VseSB1c2luZyBhbiBlbnZpcm9ubWVudCB0aGF0IGlzIG5vdCBicm93c2VyIG9yIGRvZXMgbm90IHBvbHlmaWxsIGJyb3dzZXIgZ2xvYmFscyBjb3JyZWN0bHkuXCJcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGlzRG9tUGFyc2VyU3VwcG9ydGVkVHlwZShjb250ZW50VHlwZSkpIHtcbiAgICAgIHJldHVybiBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKFxuICAgICAgICB0aGlzLnJlc3BvbnNlQnVmZmVyVG9UZXh0KCksXG4gICAgICAgIGNvbnRlbnRUeXBlXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBlcnJvcldpdGgoZXJyb3IpIHtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwicmVzcG9uZGluZyB3aXRoIGFuIGVycm9yXCIpO1xuICAgIHRoaXMuc2V0UmVhZHlTdGF0ZSh0aGlzLnJlcXVlc3QuRE9ORSk7XG4gICAgdGhpcy50cmlnZ2VyKFwiZXJyb3JcIik7XG4gICAgdGhpcy50cmlnZ2VyKFwibG9hZGVuZFwiKTtcbiAgfVxuICAvKipcbiAgICogVHJhbnNpdGlvbnMgdGhpcyByZXF1ZXN0J3MgYHJlYWR5U3RhdGVgIHRvIHRoZSBnaXZlbiBvbmUuXG4gICAqL1xuICBzZXRSZWFkeVN0YXRlKG5leHRSZWFkeVN0YXRlKSB7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgIFwic2V0UmVhZHlTdGF0ZTogJWQgLT4gJWRcIixcbiAgICAgIHRoaXMucmVxdWVzdC5yZWFkeVN0YXRlLFxuICAgICAgbmV4dFJlYWR5U3RhdGVcbiAgICApO1xuICAgIGlmICh0aGlzLnJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gbmV4dFJlYWR5U3RhdGUpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJyZWFkeSBzdGF0ZSBpZGVudGljYWwsIHNraXBwaW5nIHRyYW5zaXRpb24uLi5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlZmluZSh0aGlzLnJlcXVlc3QsIFwicmVhZHlTdGF0ZVwiLCBuZXh0UmVhZHlTdGF0ZSk7XG4gICAgdGhpcy5sb2dnZXIuaW5mbyhcInNldCByZWFkeVN0YXRlIHRvOiAlZFwiLCBuZXh0UmVhZHlTdGF0ZSk7XG4gICAgaWYgKG5leHRSZWFkeVN0YXRlICE9PSB0aGlzLnJlcXVlc3QuVU5TRU5UKSB7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKCd0cmlnZ2VycmluZyBcInJlYWR5c3RhdGVjaGFuZ2VcIiBldmVudC4uLicpO1xuICAgICAgdGhpcy50cmlnZ2VyKFwicmVhZHlzdGF0ZWNoYW5nZVwiKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGdpdmVuIGV2ZW50IG9uIHRoZSBgWE1MSHR0cFJlcXVlc3RgIGluc3RhbmNlLlxuICAgKi9cbiAgdHJpZ2dlcihldmVudE5hbWUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMucmVxdWVzdFtgb24ke2V2ZW50TmFtZX1gXTtcbiAgICBjb25zdCBldmVudCA9IGNyZWF0ZUV2ZW50KHRoaXMucmVxdWVzdCwgZXZlbnROYW1lLCBvcHRpb25zKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCd0cmlnZ2VyIFwiJXNcIicsIGV2ZW50TmFtZSwgb3B0aW9ucyB8fCBcIlwiKTtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oJ2ZvdW5kIGEgZGlyZWN0IFwiJXNcIiBjYWxsYmFjaywgY2FsbGluZy4uLicsIGV2ZW50TmFtZSk7XG4gICAgICBjYWxsYmFjay5jYWxsKHRoaXMucmVxdWVzdCwgZXZlbnQpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtyZWdpc3RlcmVkRXZlbnROYW1lLCBsaXN0ZW5lcnNdIG9mIHRoaXMuZXZlbnRzKSB7XG4gICAgICBpZiAocmVnaXN0ZXJlZEV2ZW50TmFtZSA9PT0gZXZlbnROYW1lKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgJ2ZvdW5kICVkIGxpc3RlbmVyKHMpIGZvciBcIiVzXCIgZXZlbnQsIGNhbGxpbmcuLi4nLFxuICAgICAgICAgIGxpc3RlbmVycy5sZW5ndGgsXG4gICAgICAgICAgZXZlbnROYW1lXG4gICAgICAgICk7XG4gICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIuY2FsbCh0aGlzLnJlcXVlc3QsIGV2ZW50KSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGlzIGBYTUxIdHRwUmVxdWVzdGAgaW5zdGFuY2UgaW50byBhIEZldGNoIEFQSSBgUmVxdWVzdGAgaW5zdGFuY2UuXG4gICAqL1xuICB0b0ZldGNoQXBpUmVxdWVzdCgpIHtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwiY29udmVydGluZyByZXF1ZXN0IHRvIGEgRmV0Y2ggQVBJIFJlcXVlc3QuLi5cIik7XG4gICAgY29uc3QgZmV0Y2hSZXF1ZXN0ID0gbmV3IFJlcXVlc3QodGhpcy51cmwuaHJlZiwge1xuICAgICAgbWV0aG9kOiB0aGlzLm1ldGhvZCxcbiAgICAgIGhlYWRlcnM6IHRoaXMucmVxdWVzdEhlYWRlcnMsXG4gICAgICAvKipcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly94aHIuc3BlYy53aGF0d2cub3JnLyNjcm9zcy1vcmlnaW4tY3JlZGVudGlhbHNcbiAgICAgICAqL1xuICAgICAgY3JlZGVudGlhbHM6IHRoaXMucmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPyBcImluY2x1ZGVcIiA6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgIGJvZHk6IFtcIkdFVFwiLCBcIkhFQURcIl0uaW5jbHVkZXModGhpcy5tZXRob2QpID8gbnVsbCA6IHRoaXMucmVxdWVzdEJvZHlcbiAgICB9KTtcbiAgICBjb25zdCBwcm94eUhlYWRlcnMgPSBjcmVhdGVQcm94eShmZXRjaFJlcXVlc3QuaGVhZGVycywge1xuICAgICAgbWV0aG9kQ2FsbDogKFttZXRob2ROYW1lLCBhcmdzXSwgaW52b2tlKSA9PiB7XG4gICAgICAgIHN3aXRjaCAobWV0aG9kTmFtZSkge1xuICAgICAgICAgIGNhc2UgXCJhcHBlbmRcIjpcbiAgICAgICAgICBjYXNlIFwic2V0XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IFtoZWFkZXJOYW1lLCBoZWFkZXJWYWx1ZV0gPSBhcmdzO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJkZWxldGVcIjoge1xuICAgICAgICAgICAgY29uc3QgW2hlYWRlck5hbWVdID0gYXJncztcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgYFhNTEh0dHBSZXF1ZXN0OiBDYW5ub3QgcmVtb3ZlIGEgXCIke2hlYWRlck5hbWV9XCIgaGVhZGVyIGZyb20gdGhlIEZldGNoIEFQSSByZXByZXNlbnRhdGlvbiBvZiB0aGUgXCIke2ZldGNoUmVxdWVzdC5tZXRob2R9ICR7ZmV0Y2hSZXF1ZXN0LnVybH1cIiByZXF1ZXN0LiBYTUxIdHRwUmVxdWVzdCBoZWFkZXJzIGNhbm5vdCBiZSByZW1vdmVkLmBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludm9rZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRlZmluZShmZXRjaFJlcXVlc3QsIFwiaGVhZGVyc1wiLCBwcm94eUhlYWRlcnMpO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJjb252ZXJ0ZWQgcmVxdWVzdCB0byBhIEZldGNoIEFQSSBSZXF1ZXN0IVwiLCBmZXRjaFJlcXVlc3QpO1xuICAgIHJldHVybiBmZXRjaFJlcXVlc3Q7XG4gIH1cbn07XG5mdW5jdGlvbiB0b0Fic29sdXRlVXJsKHVybCkge1xuICBpZiAodHlwZW9mIGxvY2F0aW9uID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIG5ldyBVUkwodXJsKTtcbiAgfVxuICByZXR1cm4gbmV3IFVSTCh1cmwudG9TdHJpbmcoKSwgbG9jYXRpb24uaHJlZik7XG59XG5mdW5jdGlvbiBkZWZpbmUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCB7XG4gICAgLy8gRW5zdXJlIHdyaXRhYmxlIHByb3BlcnRpZXMgdG8gYWxsb3cgcmVkZWZpbmluZyByZWFkb25seSBwcm9wZXJ0aWVzLlxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgdmFsdWVcbiAgfSk7XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvWE1MSHR0cFJlcXVlc3QvWE1MSHR0cFJlcXVlc3RQcm94eS50c1xuZnVuY3Rpb24gY3JlYXRlWE1MSHR0cFJlcXVlc3RQcm94eSh7XG4gIGVtaXR0ZXIsXG4gIGxvZ2dlclxufSkge1xuICBjb25zdCBYTUxIdHRwUmVxdWVzdFByb3h5ID0gbmV3IFByb3h5KGdsb2JhbFRoaXMuWE1MSHR0cFJlcXVlc3QsIHtcbiAgICBjb25zdHJ1Y3QodGFyZ2V0LCBhcmdzLCBuZXdUYXJnZXQpIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiY29uc3RydWN0ZWQgbmV3IFhNTEh0dHBSZXF1ZXN0XCIpO1xuICAgICAgY29uc3Qgb3JpZ2luYWxSZXF1ZXN0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgYXJncyxcbiAgICAgICAgbmV3VGFyZ2V0XG4gICAgICApO1xuICAgICAgY29uc3QgcHJvdG90eXBlRGVzY3JpcHRvcnMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhcbiAgICAgICAgdGFyZ2V0LnByb3RvdHlwZVxuICAgICAgKTtcbiAgICAgIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIGluIHByb3RvdHlwZURlc2NyaXB0b3JzKSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkoXG4gICAgICAgICAgb3JpZ2luYWxSZXF1ZXN0LFxuICAgICAgICAgIHByb3BlcnR5TmFtZSxcbiAgICAgICAgICBwcm90b3R5cGVEZXNjcmlwdG9yc1twcm9wZXJ0eU5hbWVdXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCB4aHJSZXF1ZXN0Q29udHJvbGxlciA9IG5ldyBYTUxIdHRwUmVxdWVzdENvbnRyb2xsZXIoXG4gICAgICAgIG9yaWdpbmFsUmVxdWVzdCxcbiAgICAgICAgbG9nZ2VyXG4gICAgICApO1xuICAgICAgeGhyUmVxdWVzdENvbnRyb2xsZXIub25SZXF1ZXN0ID0gYXN5bmMgZnVuY3Rpb24oeyByZXF1ZXN0LCByZXF1ZXN0SWQgfSkge1xuICAgICAgICBjb25zdCB7IGludGVyYWN0aXZlUmVxdWVzdCwgcmVxdWVzdENvbnRyb2xsZXIgfSA9IHRvSW50ZXJhY3RpdmVSZXF1ZXN0KHJlcXVlc3QpO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYXdhaXRpbmcgbW9ja2VkIHJlc3BvbnNlLi4uXCIpO1xuICAgICAgICBlbWl0dGVyLm9uY2UoXCJyZXF1ZXN0XCIsICh7IHJlcXVlc3RJZDogcGVuZGluZ1JlcXVlc3RJZCB9KSA9PiB7XG4gICAgICAgICAgaWYgKHBlbmRpbmdSZXF1ZXN0SWQgIT09IHJlcXVlc3RJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVxdWVzdENvbnRyb2xsZXIucmVzcG9uc2VQcm9taXNlLnN0YXRlID09PSBcInBlbmRpbmdcIikge1xuICAgICAgICAgICAgcmVxdWVzdENvbnRyb2xsZXIucmVzcG9uZFdpdGgodm9pZCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXNvbHZlclJlc3VsdCA9IGF3YWl0IHVudGlsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgJ2VtaXR0aW5nIHRoZSBcInJlcXVlc3RcIiBldmVudCBmb3IgJXMgbGlzdGVuZXIocykuLi4nLFxuICAgICAgICAgICAgZW1pdHRlci5saXN0ZW5lckNvdW50KFwicmVxdWVzdFwiKVxuICAgICAgICAgICk7XG4gICAgICAgICAgYXdhaXQgZW1pdEFzeW5jKGVtaXR0ZXIsIFwicmVxdWVzdFwiLCB7XG4gICAgICAgICAgICByZXF1ZXN0OiBpbnRlcmFjdGl2ZVJlcXVlc3QsXG4gICAgICAgICAgICByZXF1ZXN0SWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKCdhbGwgXCJyZXF1ZXN0XCIgbGlzdGVuZXJzIHNldHRsZWQhJyk7XG4gICAgICAgICAgY29uc3QgbW9ja2VkUmVzcG9uc2UyID0gYXdhaXQgcmVxdWVzdENvbnRyb2xsZXIucmVzcG9uc2VQcm9taXNlO1xuICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJldmVudC5yZXNwb25kV2l0aCBjYWxsZWQgd2l0aDpcIiwgbW9ja2VkUmVzcG9uc2UyKTtcbiAgICAgICAgICByZXR1cm4gbW9ja2VkUmVzcG9uc2UyO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlc29sdmVyUmVzdWx0LmVycm9yKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwicmVxdWVzdCBsaXN0ZW5lciB0aHJldyBhbiBleGNlcHRpb24sIGFib3J0aW5nIHJlcXVlc3QuLi5cIixcbiAgICAgICAgICAgIHJlc29sdmVyUmVzdWx0LmVycm9yXG4gICAgICAgICAgKTtcbiAgICAgICAgICB4aHJSZXF1ZXN0Q29udHJvbGxlci5lcnJvcldpdGgocmVzb2x2ZXJSZXN1bHQuZXJyb3IpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2NrZWRSZXNwb25zZSA9IHJlc29sdmVyUmVzdWx0LmRhdGE7XG4gICAgICAgIGlmICh0eXBlb2YgbW9ja2VkUmVzcG9uc2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgXCJyZWNlaXZlZCBtb2NrZWQgcmVzcG9uc2U6ICVkICVzXCIsXG4gICAgICAgICAgICBtb2NrZWRSZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICBtb2NrZWRSZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAobW9ja2VkUmVzcG9uc2UudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAgICAgICBcInJlY2VpdmVkIGEgbmV0d29yayBlcnJvciByZXNwb25zZSwgcmVqZWN0aW5nIHRoZSByZXF1ZXN0IHByb21pc2UuLi5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHhoclJlcXVlc3RDb250cm9sbGVyLmVycm9yV2l0aChuZXcgVHlwZUVycm9yKFwiTmV0d29yayBlcnJvclwiKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB4aHJSZXF1ZXN0Q29udHJvbGxlci5yZXNwb25kV2l0aChtb2NrZWRSZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICBcIm5vIG1vY2tlZCByZXNwb25zZSByZWNlaXZlZCwgcGVyZm9ybWluZyByZXF1ZXN0IGFzLWlzLi4uXCJcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgICB4aHJSZXF1ZXN0Q29udHJvbGxlci5vblJlc3BvbnNlID0gYXN5bmMgZnVuY3Rpb24oe1xuICAgICAgICByZXNwb25zZSxcbiAgICAgICAgaXNNb2NrZWRSZXNwb25zZSxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgcmVxdWVzdElkXG4gICAgICB9KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXG4gICAgICAgICAgJ2VtaXR0aW5nIHRoZSBcInJlc3BvbnNlXCIgZXZlbnQgZm9yICVzIGxpc3RlbmVyKHMpLi4uJyxcbiAgICAgICAgICBlbWl0dGVyLmxpc3RlbmVyQ291bnQoXCJyZXNwb25zZVwiKVxuICAgICAgICApO1xuICAgICAgICBlbWl0dGVyLmVtaXQoXCJyZXNwb25zZVwiLCB7XG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgaXNNb2NrZWRSZXNwb25zZSxcbiAgICAgICAgICByZXF1ZXN0LFxuICAgICAgICAgIHJlcXVlc3RJZFxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICByZXR1cm4geGhyUmVxdWVzdENvbnRyb2xsZXIucmVxdWVzdDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gWE1MSHR0cFJlcXVlc3RQcm94eTtcbn1cblxuLy8gc3JjL2ludGVyY2VwdG9ycy9YTUxIdHRwUmVxdWVzdC9pbmRleC50c1xudmFyIF9YTUxIdHRwUmVxdWVzdEludGVyY2VwdG9yID0gY2xhc3MgZXh0ZW5kcyBJbnRlcmNlcHRvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKF9YTUxIdHRwUmVxdWVzdEludGVyY2VwdG9yLmludGVyY2VwdG9yU3ltYm9sKTtcbiAgfVxuICBjaGVja0Vudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0eXBlb2YgZ2xvYmFsVGhpcy5YTUxIdHRwUmVxdWVzdCAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgfVxuICBzZXR1cCgpIHtcbiAgICBjb25zdCBsb2dnZXIgPSB0aGlzLmxvZ2dlci5leHRlbmQoXCJzZXR1cFwiKTtcbiAgICBsb2dnZXIuaW5mbygncGF0Y2hpbmcgXCJYTUxIdHRwUmVxdWVzdFwiIG1vZHVsZS4uLicpO1xuICAgIGNvbnN0IFB1cmVYTUxIdHRwUmVxdWVzdCA9IGdsb2JhbFRoaXMuWE1MSHR0cFJlcXVlc3Q7XG4gICAgaW52YXJpYW50MihcbiAgICAgICFQdXJlWE1MSHR0cFJlcXVlc3RbSVNfUEFUQ0hFRF9NT0RVTEVdLFxuICAgICAgJ0ZhaWxlZCB0byBwYXRjaCB0aGUgXCJYTUxIdHRwUmVxdWVzdFwiIG1vZHVsZTogYWxyZWFkeSBwYXRjaGVkLidcbiAgICApO1xuICAgIGdsb2JhbFRoaXMuWE1MSHR0cFJlcXVlc3QgPSBjcmVhdGVYTUxIdHRwUmVxdWVzdFByb3h5KHtcbiAgICAgIGVtaXR0ZXI6IHRoaXMuZW1pdHRlcixcbiAgICAgIGxvZ2dlcjogdGhpcy5sb2dnZXJcbiAgICB9KTtcbiAgICBsb2dnZXIuaW5mbyhcbiAgICAgICduYXRpdmUgXCJYTUxIdHRwUmVxdWVzdFwiIG1vZHVsZSBwYXRjaGVkIScsXG4gICAgICBnbG9iYWxUaGlzLlhNTEh0dHBSZXF1ZXN0Lm5hbWVcbiAgICApO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWxUaGlzLlhNTEh0dHBSZXF1ZXN0LCBJU19QQVRDSEVEX01PRFVMRSwge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goKCkgPT4ge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbFRoaXMuWE1MSHR0cFJlcXVlc3QsIElTX1BBVENIRURfTU9EVUxFLCB7XG4gICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgIH0pO1xuICAgICAgZ2xvYmFsVGhpcy5YTUxIdHRwUmVxdWVzdCA9IFB1cmVYTUxIdHRwUmVxdWVzdDtcbiAgICAgIGxvZ2dlci5pbmZvKFxuICAgICAgICAnbmF0aXZlIFwiWE1MSHR0cFJlcXVlc3RcIiBtb2R1bGUgcmVzdG9yZWQhJyxcbiAgICAgICAgZ2xvYmFsVGhpcy5YTUxIdHRwUmVxdWVzdC5uYW1lXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59O1xudmFyIFhNTEh0dHBSZXF1ZXN0SW50ZXJjZXB0b3IgPSBfWE1MSHR0cFJlcXVlc3RJbnRlcmNlcHRvcjtcblhNTEh0dHBSZXF1ZXN0SW50ZXJjZXB0b3IuaW50ZXJjZXB0b3JTeW1ib2wgPSBTeW1ib2woXCJ4aHJcIik7XG5cbmV4cG9ydCB7XG4gIFhNTEh0dHBSZXF1ZXN0SW50ZXJjZXB0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1WVUlMT1FCWS5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-VUILOQBY.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BatchInterceptor: () => (/* reexport safe */ _chunk_GUY7XK43_mjs__WEBPACK_IMPORTED_MODULE_0__.BatchInterceptor),\n/* harmony export */   INTERNAL_REQUEST_ID_HEADER_NAME: () => (/* reexport safe */ _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.INTERNAL_REQUEST_ID_HEADER_NAME),\n/* harmony export */   IS_PATCHED_MODULE: () => (/* reexport safe */ _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_3__.IS_PATCHED_MODULE),\n/* harmony export */   Interceptor: () => (/* reexport safe */ _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.Interceptor),\n/* harmony export */   InterceptorReadyState: () => (/* reexport safe */ _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.InterceptorReadyState),\n/* harmony export */   createRequestId: () => (/* reexport safe */ _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.createRequestId),\n/* harmony export */   decodeBuffer: () => (/* reexport safe */ _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_1__.decodeBuffer),\n/* harmony export */   deleteGlobalSymbol: () => (/* reexport safe */ _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.deleteGlobalSymbol),\n/* harmony export */   encodeBuffer: () => (/* reexport safe */ _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_1__.encodeBuffer),\n/* harmony export */   getCleanUrl: () => (/* binding */ getCleanUrl),\n/* harmony export */   getGlobalSymbol: () => (/* reexport safe */ _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__.getGlobalSymbol),\n/* harmony export */   isResponseWithoutBody: () => (/* reexport safe */ _chunk_IBYBTTYK_mjs__WEBPACK_IMPORTED_MODULE_2__.isResponseWithoutBody)\n/* harmony export */ });\n/* harmony import */ var _chunk_GUY7XK43_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-GUY7XK43.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-GUY7XK43.mjs\");\n/* harmony import */ var _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-6HYIRFX2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs\");\n/* harmony import */ var _chunk_IBYBTTYK_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-IBYBTTYK.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-IBYBTTYK.mjs\");\n/* harmony import */ var _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-HAGW22AN.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-HAGW22AN.mjs\");\n/* harmony import */ var _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chunk-QED3Q6Z2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs\");\n\n\n\n\n\n\n// src/utils/getCleanUrl.ts\nfunction getCleanUrl(url, isAbsolute = true) {\n  return [isAbsolute && url.origin, url.pathname].filter(Boolean).join(\"\");\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFOEI7QUFJQTtBQUdBO0FBR0E7QUFRQTs7QUFFOUI7QUFDQTtBQUNBO0FBQ0E7QUFjRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGVtby1sb2dpbi8uL25vZGVfbW9kdWxlcy9AbXN3anMvaW50ZXJjZXB0b3JzL2xpYi9ub2RlL2luZGV4Lm1qcz9hOWI3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEJhdGNoSW50ZXJjZXB0b3Jcbn0gZnJvbSBcIi4vY2h1bmstR1VZN1hLNDMubWpzXCI7XG5pbXBvcnQge1xuICBkZWNvZGVCdWZmZXIsXG4gIGVuY29kZUJ1ZmZlclxufSBmcm9tIFwiLi9jaHVuay02SFlJUkZYMi5tanNcIjtcbmltcG9ydCB7XG4gIGlzUmVzcG9uc2VXaXRob3V0Qm9keVxufSBmcm9tIFwiLi9jaHVuay1JQllCVFRZSy5tanNcIjtcbmltcG9ydCB7XG4gIElTX1BBVENIRURfTU9EVUxFXG59IGZyb20gXCIuL2NodW5rLUhBR1cyMkFOLm1qc1wiO1xuaW1wb3J0IHtcbiAgSU5URVJOQUxfUkVRVUVTVF9JRF9IRUFERVJfTkFNRSxcbiAgSW50ZXJjZXB0b3IsXG4gIEludGVyY2VwdG9yUmVhZHlTdGF0ZSxcbiAgY3JlYXRlUmVxdWVzdElkLFxuICBkZWxldGVHbG9iYWxTeW1ib2wsXG4gIGdldEdsb2JhbFN5bWJvbFxufSBmcm9tIFwiLi9jaHVuay1RRUQzUTZaMi5tanNcIjtcblxuLy8gc3JjL3V0aWxzL2dldENsZWFuVXJsLnRzXG5mdW5jdGlvbiBnZXRDbGVhblVybCh1cmwsIGlzQWJzb2x1dGUgPSB0cnVlKSB7XG4gIHJldHVybiBbaXNBYnNvbHV0ZSAmJiB1cmwub3JpZ2luLCB1cmwucGF0aG5hbWVdLmZpbHRlcihCb29sZWFuKS5qb2luKFwiXCIpO1xufVxuZXhwb3J0IHtcbiAgQmF0Y2hJbnRlcmNlcHRvcixcbiAgSU5URVJOQUxfUkVRVUVTVF9JRF9IRUFERVJfTkFNRSxcbiAgSVNfUEFUQ0hFRF9NT0RVTEUsXG4gIEludGVyY2VwdG9yLFxuICBJbnRlcmNlcHRvclJlYWR5U3RhdGUsXG4gIGNyZWF0ZVJlcXVlc3RJZCxcbiAgZGVjb2RlQnVmZmVyLFxuICBkZWxldGVHbG9iYWxTeW1ib2wsXG4gIGVuY29kZUJ1ZmZlcixcbiAgZ2V0Q2xlYW5VcmwsXG4gIGdldEdsb2JhbFN5bWJvbCxcbiAgaXNSZXNwb25zZVdpdGhvdXRCb2R5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/interceptors/ClientRequest/index.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/interceptors/ClientRequest/index.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientRequestInterceptor: () => (/* reexport safe */ _chunk_CCASONWB_mjs__WEBPACK_IMPORTED_MODULE_0__.ClientRequestInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_CCASONWB_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunk-CCASONWB.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-CCASONWB.mjs\");\n/* harmony import */ var _chunk_IBYBTTYK_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunk-IBYBTTYK.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-IBYBTTYK.mjs\");\n/* harmony import */ var _chunk_DERTLGL3_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../chunk-DERTLGL3.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-DERTLGL3.mjs\");\n/* harmony import */ var _chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunk-OUWBQF3Z.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-OUWBQF3Z.mjs\");\n/* harmony import */ var _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunk-QED3Q6Z2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs\");\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRWtDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHaEM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8tbG9naW4vLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9pbnRlcmNlcHRvcnMvQ2xpZW50UmVxdWVzdC9pbmRleC5tanM/ODMyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDbGllbnRSZXF1ZXN0SW50ZXJjZXB0b3Jcbn0gZnJvbSBcIi4uLy4uL2NodW5rLUNDQVNPTldCLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2h1bmstSUJZQlRUWUsubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay1ERVJUTEdMMy5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NodW5rLU9VV0JRRjNaLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2h1bmstUUVEM1E2WjIubWpzXCI7XG5leHBvcnQge1xuICBDbGllbnRSZXF1ZXN0SW50ZXJjZXB0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/interceptors/ClientRequest/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/interceptors/XMLHttpRequest/index.mjs":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/interceptors/XMLHttpRequest/index.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLHttpRequestInterceptor: () => (/* reexport safe */ _chunk_VUILOQBY_mjs__WEBPACK_IMPORTED_MODULE_0__.XMLHttpRequestInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_VUILOQBY_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunk-VUILOQBY.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-VUILOQBY.mjs\");\n/* harmony import */ var _chunk_6HYIRFX2_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunk-6HYIRFX2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-6HYIRFX2.mjs\");\n/* harmony import */ var _chunk_IBYBTTYK_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../chunk-IBYBTTYK.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-IBYBTTYK.mjs\");\n/* harmony import */ var _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunk-HAGW22AN.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-HAGW22AN.mjs\");\n/* harmony import */ var _chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunk-OUWBQF3Z.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-OUWBQF3Z.mjs\");\n/* harmony import */ var _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunk-QED3Q6Z2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs\");\n\n\n\n\n\n\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9pbnRlcmNlcHRvcnMvWE1MSHR0cFJlcXVlc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFFa0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR2hDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZW1vLWxvZ2luLy4vbm9kZV9tb2R1bGVzL0Btc3dqcy9pbnRlcmNlcHRvcnMvbGliL25vZGUvaW50ZXJjZXB0b3JzL1hNTEh0dHBSZXF1ZXN0L2luZGV4Lm1qcz83ZTNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFhNTEh0dHBSZXF1ZXN0SW50ZXJjZXB0b3Jcbn0gZnJvbSBcIi4uLy4uL2NodW5rLVZVSUxPUUJZLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2h1bmstNkhZSVJGWDIubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay1JQllCVFRZSy5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NodW5rLUhBR1cyMkFOLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vY2h1bmstT1VXQlFGM1oubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jaHVuay1RRUQzUTZaMi5tanNcIjtcbmV4cG9ydCB7XG4gIFhNTEh0dHBSZXF1ZXN0SW50ZXJjZXB0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/interceptors/XMLHttpRequest/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@mswjs/interceptors/lib/node/interceptors/fetch/index.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@mswjs/interceptors/lib/node/interceptors/fetch/index.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchInterceptor: () => (/* binding */ FetchInterceptor)\n/* harmony export */ });\n/* harmony import */ var _chunk_DERTLGL3_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunk-DERTLGL3.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-DERTLGL3.mjs\");\n/* harmony import */ var _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunk-HAGW22AN.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-HAGW22AN.mjs\");\n/* harmony import */ var _chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../chunk-OUWBQF3Z.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-OUWBQF3Z.mjs\");\n/* harmony import */ var _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunk-QED3Q6Z2.mjs */ \"(ssr)/./node_modules/@mswjs/interceptors/lib/node/chunk-QED3Q6Z2.mjs\");\n/* harmony import */ var outvariant__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! outvariant */ \"(ssr)/./node_modules/outvariant/lib/index.mjs\");\n/* harmony import */ var _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @open-draft/deferred-promise */ \"(ssr)/./node_modules/@open-draft/deferred-promise/build/index.mjs\");\n/* harmony import */ var _open_draft_until__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @open-draft/until */ \"(ssr)/./node_modules/@open-draft/until/lib/index.mjs\");\n\n\n\n\n\n// src/interceptors/fetch/index.ts\n\n\n\n\n// src/utils/canParseUrl.ts\nfunction canParseUrl(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch (_error) {\n    return false;\n  }\n}\n\n// src/interceptors/fetch/index.ts\nvar _FetchInterceptor = class extends _chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_3__.Interceptor {\n  constructor() {\n    super(_FetchInterceptor.symbol);\n  }\n  checkEnvironment() {\n    return typeof globalThis !== \"undefined\" && typeof globalThis.fetch !== \"undefined\";\n  }\n  async setup() {\n    const pureFetch = globalThis.fetch;\n    (0,outvariant__WEBPACK_IMPORTED_MODULE_4__.invariant)(\n      !pureFetch[_chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_1__.IS_PATCHED_MODULE],\n      'Failed to patch the \"fetch\" module: already patched.'\n    );\n    globalThis.fetch = async (input, init) => {\n      var _a;\n      const requestId = (0,_chunk_QED3Q6Z2_mjs__WEBPACK_IMPORTED_MODULE_3__.createRequestId)();\n      const resolvedInput = typeof input === \"string\" && typeof location !== \"undefined\" && !canParseUrl(input) ? new URL(input, location.origin) : input;\n      const request = new Request(resolvedInput, init);\n      this.logger.info(\"[%s] %s\", request.method, request.url);\n      const { interactiveRequest, requestController } = (0,_chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_2__.toInteractiveRequest)(request);\n      this.logger.info(\n        'emitting the \"request\" event for %d listener(s)...',\n        this.emitter.listenerCount(\"request\")\n      );\n      this.emitter.once(\"request\", ({ requestId: pendingRequestId }) => {\n        if (pendingRequestId !== requestId) {\n          return;\n        }\n        if (requestController.responsePromise.state === \"pending\") {\n          requestController.responsePromise.resolve(void 0);\n        }\n      });\n      this.logger.info(\"awaiting for the mocked response...\");\n      const signal = interactiveRequest.signal;\n      const requestAborted = new _open_draft_deferred_promise__WEBPACK_IMPORTED_MODULE_5__.DeferredPromise();\n      if (signal) {\n        signal.addEventListener(\n          \"abort\",\n          () => {\n            requestAborted.reject(signal.reason);\n          },\n          { once: true }\n        );\n      }\n      const resolverResult = await (0,_open_draft_until__WEBPACK_IMPORTED_MODULE_6__.until)(async () => {\n        const listenersFinished = (0,_chunk_OUWBQF3Z_mjs__WEBPACK_IMPORTED_MODULE_2__.emitAsync)(this.emitter, \"request\", {\n          request: interactiveRequest,\n          requestId\n        });\n        await Promise.race([\n          requestAborted,\n          // Put the listeners invocation Promise in the same race condition\n          // with the request abort Promise because otherwise awaiting the listeners\n          // would always yield some response (or undefined).\n          listenersFinished,\n          requestController.responsePromise\n        ]);\n        this.logger.info(\"all request listeners have been resolved!\");\n        const mockedResponse2 = await requestController.responsePromise;\n        this.logger.info(\"event.respondWith called with:\", mockedResponse2);\n        return mockedResponse2;\n      });\n      if (requestAborted.state === \"rejected\") {\n        return Promise.reject(requestAborted.rejectionReason);\n      }\n      if (resolverResult.error) {\n        return Promise.reject(createNetworkError(resolverResult.error));\n      }\n      const mockedResponse = resolverResult.data;\n      if (mockedResponse && !((_a = request.signal) == null ? void 0 : _a.aborted)) {\n        this.logger.info(\"received mocked response:\", mockedResponse);\n        if ((0,_chunk_DERTLGL3_mjs__WEBPACK_IMPORTED_MODULE_0__.isPropertyAccessible)(mockedResponse, \"type\") && mockedResponse.type === \"error\") {\n          this.logger.info(\n            \"received a network error response, rejecting the request promise...\"\n          );\n          return Promise.reject(createNetworkError(mockedResponse));\n        }\n        const responseClone = mockedResponse.clone();\n        this.emitter.emit(\"response\", {\n          response: responseClone,\n          isMockedResponse: true,\n          request: interactiveRequest,\n          requestId\n        });\n        Object.defineProperty(mockedResponse, \"url\", {\n          writable: false,\n          enumerable: true,\n          configurable: false,\n          value: request.url\n        });\n        return mockedResponse;\n      }\n      this.logger.info(\"no mocked response received!\");\n      return pureFetch(request).then((response) => {\n        const responseClone = response.clone();\n        this.logger.info(\"original fetch performed\", responseClone);\n        this.emitter.emit(\"response\", {\n          response: responseClone,\n          isMockedResponse: false,\n          request: interactiveRequest,\n          requestId\n        });\n        return response;\n      });\n    };\n    Object.defineProperty(globalThis.fetch, _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_1__.IS_PATCHED_MODULE, {\n      enumerable: true,\n      configurable: true,\n      value: true\n    });\n    this.subscriptions.push(() => {\n      Object.defineProperty(globalThis.fetch, _chunk_HAGW22AN_mjs__WEBPACK_IMPORTED_MODULE_1__.IS_PATCHED_MODULE, {\n        value: void 0\n      });\n      globalThis.fetch = pureFetch;\n      this.logger.info(\n        'restored native \"globalThis.fetch\"!',\n        globalThis.fetch.name\n      );\n    });\n  }\n};\nvar FetchInterceptor = _FetchInterceptor;\nFetchInterceptor.symbol = Symbol(\"fetch\");\nfunction createNetworkError(cause) {\n  return Object.assign(new TypeError(\"Failed to fetch\"), {\n    cause\n  });\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9pbnRlcmNlcHRvcnMvZmV0Y2gvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBRWtDO0FBR0E7QUFJQTtBQUlBOztBQUVsQztBQUN1QztBQUN3QjtBQUNyQjs7QUFFMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQ0FBc0MsNERBQVc7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscURBQVM7QUFDYixpQkFBaUIsa0VBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9FQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0NBQXdDLEVBQUUseUVBQW9CO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDZCQUE2QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGlDQUFpQyx5RUFBZTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFlBQVk7QUFDWjtBQUNBO0FBQ0EsbUNBQW1DLHdEQUFLO0FBQ3hDLGtDQUFrQyw4REFBUztBQUMzQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlFQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBLDRDQUE0QyxrRUFBaUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsOENBQThDLGtFQUFpQjtBQUMvRDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2RlbW8tbG9naW4vLi9ub2RlX21vZHVsZXMvQG1zd2pzL2ludGVyY2VwdG9ycy9saWIvbm9kZS9pbnRlcmNlcHRvcnMvZmV0Y2gvaW5kZXgubWpzP2NkMmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgaXNQcm9wZXJ0eUFjY2Vzc2libGVcbn0gZnJvbSBcIi4uLy4uL2NodW5rLURFUlRMR0wzLm1qc1wiO1xuaW1wb3J0IHtcbiAgSVNfUEFUQ0hFRF9NT0RVTEVcbn0gZnJvbSBcIi4uLy4uL2NodW5rLUhBR1cyMkFOLm1qc1wiO1xuaW1wb3J0IHtcbiAgZW1pdEFzeW5jLFxuICB0b0ludGVyYWN0aXZlUmVxdWVzdFxufSBmcm9tIFwiLi4vLi4vY2h1bmstT1VXQlFGM1oubWpzXCI7XG5pbXBvcnQge1xuICBJbnRlcmNlcHRvcixcbiAgY3JlYXRlUmVxdWVzdElkXG59IGZyb20gXCIuLi8uLi9jaHVuay1RRUQzUTZaMi5tanNcIjtcblxuLy8gc3JjL2ludGVyY2VwdG9ycy9mZXRjaC9pbmRleC50c1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSBcIm91dHZhcmlhbnRcIjtcbmltcG9ydCB7IERlZmVycmVkUHJvbWlzZSB9IGZyb20gXCJAb3Blbi1kcmFmdC9kZWZlcnJlZC1wcm9taXNlXCI7XG5pbXBvcnQgeyB1bnRpbCB9IGZyb20gXCJAb3Blbi1kcmFmdC91bnRpbFwiO1xuXG4vLyBzcmMvdXRpbHMvY2FuUGFyc2VVcmwudHNcbmZ1bmN0aW9uIGNhblBhcnNlVXJsKHVybCkge1xuICB0cnkge1xuICAgIG5ldyBVUkwodXJsKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIHNyYy9pbnRlcmNlcHRvcnMvZmV0Y2gvaW5kZXgudHNcbnZhciBfRmV0Y2hJbnRlcmNlcHRvciA9IGNsYXNzIGV4dGVuZHMgSW50ZXJjZXB0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihfRmV0Y2hJbnRlcmNlcHRvci5zeW1ib2wpO1xuICB9XG4gIGNoZWNrRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBnbG9iYWxUaGlzLmZldGNoICE9PSBcInVuZGVmaW5lZFwiO1xuICB9XG4gIGFzeW5jIHNldHVwKCkge1xuICAgIGNvbnN0IHB1cmVGZXRjaCA9IGdsb2JhbFRoaXMuZmV0Y2g7XG4gICAgaW52YXJpYW50KFxuICAgICAgIXB1cmVGZXRjaFtJU19QQVRDSEVEX01PRFVMRV0sXG4gICAgICAnRmFpbGVkIHRvIHBhdGNoIHRoZSBcImZldGNoXCIgbW9kdWxlOiBhbHJlYWR5IHBhdGNoZWQuJ1xuICAgICk7XG4gICAgZ2xvYmFsVGhpcy5mZXRjaCA9IGFzeW5jIChpbnB1dCwgaW5pdCkgPT4ge1xuICAgICAgdmFyIF9hO1xuICAgICAgY29uc3QgcmVxdWVzdElkID0gY3JlYXRlUmVxdWVzdElkKCk7XG4gICAgICBjb25zdCByZXNvbHZlZElucHV0ID0gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBsb2NhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhY2FuUGFyc2VVcmwoaW5wdXQpID8gbmV3IFVSTChpbnB1dCwgbG9jYXRpb24ub3JpZ2luKSA6IGlucHV0O1xuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KHJlc29sdmVkSW5wdXQsIGluaXQpO1xuICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIlslc10gJXNcIiwgcmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsKTtcbiAgICAgIGNvbnN0IHsgaW50ZXJhY3RpdmVSZXF1ZXN0LCByZXF1ZXN0Q29udHJvbGxlciB9ID0gdG9JbnRlcmFjdGl2ZVJlcXVlc3QocmVxdWVzdCk7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAnZW1pdHRpbmcgdGhlIFwicmVxdWVzdFwiIGV2ZW50IGZvciAlZCBsaXN0ZW5lcihzKS4uLicsXG4gICAgICAgIHRoaXMuZW1pdHRlci5saXN0ZW5lckNvdW50KFwicmVxdWVzdFwiKVxuICAgICAgKTtcbiAgICAgIHRoaXMuZW1pdHRlci5vbmNlKFwicmVxdWVzdFwiLCAoeyByZXF1ZXN0SWQ6IHBlbmRpbmdSZXF1ZXN0SWQgfSkgPT4ge1xuICAgICAgICBpZiAocGVuZGluZ1JlcXVlc3RJZCAhPT0gcmVxdWVzdElkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXF1ZXN0Q29udHJvbGxlci5yZXNwb25zZVByb21pc2Uuc3RhdGUgPT09IFwicGVuZGluZ1wiKSB7XG4gICAgICAgICAgcmVxdWVzdENvbnRyb2xsZXIucmVzcG9uc2VQcm9taXNlLnJlc29sdmUodm9pZCAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYXdhaXRpbmcgZm9yIHRoZSBtb2NrZWQgcmVzcG9uc2UuLi5cIik7XG4gICAgICBjb25zdCBzaWduYWwgPSBpbnRlcmFjdGl2ZVJlcXVlc3Quc2lnbmFsO1xuICAgICAgY29uc3QgcmVxdWVzdEFib3J0ZWQgPSBuZXcgRGVmZXJyZWRQcm9taXNlKCk7XG4gICAgICBpZiAoc2lnbmFsKSB7XG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIFwiYWJvcnRcIixcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0QWJvcnRlZC5yZWplY3Qoc2lnbmFsLnJlYXNvbik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZXJSZXN1bHQgPSBhd2FpdCB1bnRpbChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyc0ZpbmlzaGVkID0gZW1pdEFzeW5jKHRoaXMuZW1pdHRlciwgXCJyZXF1ZXN0XCIsIHtcbiAgICAgICAgICByZXF1ZXN0OiBpbnRlcmFjdGl2ZVJlcXVlc3QsXG4gICAgICAgICAgcmVxdWVzdElkXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgIHJlcXVlc3RBYm9ydGVkLFxuICAgICAgICAgIC8vIFB1dCB0aGUgbGlzdGVuZXJzIGludm9jYXRpb24gUHJvbWlzZSBpbiB0aGUgc2FtZSByYWNlIGNvbmRpdGlvblxuICAgICAgICAgIC8vIHdpdGggdGhlIHJlcXVlc3QgYWJvcnQgUHJvbWlzZSBiZWNhdXNlIG90aGVyd2lzZSBhd2FpdGluZyB0aGUgbGlzdGVuZXJzXG4gICAgICAgICAgLy8gd291bGQgYWx3YXlzIHlpZWxkIHNvbWUgcmVzcG9uc2UgKG9yIHVuZGVmaW5lZCkuXG4gICAgICAgICAgbGlzdGVuZXJzRmluaXNoZWQsXG4gICAgICAgICAgcmVxdWVzdENvbnRyb2xsZXIucmVzcG9uc2VQcm9taXNlXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKFwiYWxsIHJlcXVlc3QgbGlzdGVuZXJzIGhhdmUgYmVlbiByZXNvbHZlZCFcIik7XG4gICAgICAgIGNvbnN0IG1vY2tlZFJlc3BvbnNlMiA9IGF3YWl0IHJlcXVlc3RDb250cm9sbGVyLnJlc3BvbnNlUHJvbWlzZTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImV2ZW50LnJlc3BvbmRXaXRoIGNhbGxlZCB3aXRoOlwiLCBtb2NrZWRSZXNwb25zZTIpO1xuICAgICAgICByZXR1cm4gbW9ja2VkUmVzcG9uc2UyO1xuICAgICAgfSk7XG4gICAgICBpZiAocmVxdWVzdEFib3J0ZWQuc3RhdGUgPT09IFwicmVqZWN0ZWRcIikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVxdWVzdEFib3J0ZWQucmVqZWN0aW9uUmVhc29uKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXNvbHZlclJlc3VsdC5lcnJvcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY3JlYXRlTmV0d29ya0Vycm9yKHJlc29sdmVyUmVzdWx0LmVycm9yKSk7XG4gICAgICB9XG4gICAgICBjb25zdCBtb2NrZWRSZXNwb25zZSA9IHJlc29sdmVyUmVzdWx0LmRhdGE7XG4gICAgICBpZiAobW9ja2VkUmVzcG9uc2UgJiYgISgoX2EgPSByZXF1ZXN0LnNpZ25hbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmFib3J0ZWQpKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJyZWNlaXZlZCBtb2NrZWQgcmVzcG9uc2U6XCIsIG1vY2tlZFJlc3BvbnNlKTtcbiAgICAgICAgaWYgKGlzUHJvcGVydHlBY2Nlc3NpYmxlKG1vY2tlZFJlc3BvbnNlLCBcInR5cGVcIikgJiYgbW9ja2VkUmVzcG9uc2UudHlwZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgIFwicmVjZWl2ZWQgYSBuZXR3b3JrIGVycm9yIHJlc3BvbnNlLCByZWplY3RpbmcgdGhlIHJlcXVlc3QgcHJvbWlzZS4uLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY3JlYXRlTmV0d29ya0Vycm9yKG1vY2tlZFJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2VDbG9uZSA9IG1vY2tlZFJlc3BvbnNlLmNsb25lKCk7XG4gICAgICAgIHRoaXMuZW1pdHRlci5lbWl0KFwicmVzcG9uc2VcIiwge1xuICAgICAgICAgIHJlc3BvbnNlOiByZXNwb25zZUNsb25lLFxuICAgICAgICAgIGlzTW9ja2VkUmVzcG9uc2U6IHRydWUsXG4gICAgICAgICAgcmVxdWVzdDogaW50ZXJhY3RpdmVSZXF1ZXN0LFxuICAgICAgICAgIHJlcXVlc3RJZFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vY2tlZFJlc3BvbnNlLCBcInVybFwiLCB7XG4gICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICB2YWx1ZTogcmVxdWVzdC51cmxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtb2NrZWRSZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJubyBtb2NrZWQgcmVzcG9uc2UgcmVjZWl2ZWQhXCIpO1xuICAgICAgcmV0dXJuIHB1cmVGZXRjaChyZXF1ZXN0KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZUNsb25lID0gcmVzcG9uc2UuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcIm9yaWdpbmFsIGZldGNoIHBlcmZvcm1lZFwiLCByZXNwb25zZUNsb25lKTtcbiAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoXCJyZXNwb25zZVwiLCB7XG4gICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlQ2xvbmUsXG4gICAgICAgICAgaXNNb2NrZWRSZXNwb25zZTogZmFsc2UsXG4gICAgICAgICAgcmVxdWVzdDogaW50ZXJhY3RpdmVSZXF1ZXN0LFxuICAgICAgICAgIHJlcXVlc3RJZFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2xvYmFsVGhpcy5mZXRjaCwgSVNfUEFUQ0hFRF9NT0RVTEUsIHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogdHJ1ZVxuICAgIH0pO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKCgpID0+IHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWxUaGlzLmZldGNoLCBJU19QQVRDSEVEX01PRFVMRSwge1xuICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICB9KTtcbiAgICAgIGdsb2JhbFRoaXMuZmV0Y2ggPSBwdXJlRmV0Y2g7XG4gICAgICB0aGlzLmxvZ2dlci5pbmZvKFxuICAgICAgICAncmVzdG9yZWQgbmF0aXZlIFwiZ2xvYmFsVGhpcy5mZXRjaFwiIScsXG4gICAgICAgIGdsb2JhbFRoaXMuZmV0Y2gubmFtZVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxufTtcbnZhciBGZXRjaEludGVyY2VwdG9yID0gX0ZldGNoSW50ZXJjZXB0b3I7XG5GZXRjaEludGVyY2VwdG9yLnN5bWJvbCA9IFN5bWJvbChcImZldGNoXCIpO1xuZnVuY3Rpb24gY3JlYXRlTmV0d29ya0Vycm9yKGNhdXNlKSB7XG4gIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2hcIiksIHtcbiAgICBjYXVzZVxuICB9KTtcbn1cbmV4cG9ydCB7XG4gIEZldGNoSW50ZXJjZXB0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@mswjs/interceptors/lib/node/interceptors/fetch/index.mjs\n");

/***/ })

};
;